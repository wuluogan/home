import{b as t}from"./search-6423cffd.js";import{cN as e,cB as s,e as o,Y as r,f as a,o as i,c as m,a as p,u as l,k as u,q as j,dj as n}from"./index-c72c5b0c.js";import{D as g}from"./DataLists-aff5237d.js";import{P as c}from"./index-69256b9d.js";import"./AllArtists-b2fee903.js";import"./text-64fc9966.js";import"./use-compitable-a1866e01.js";import"./light-a7677734.js";import"./AddPlaylist-fbffd947.js";import"./CreatePlaylist-a7b4fb4f.js";import"./Input-b4caa030.js";import"./Suffix-af55cfcd.js";import"./index-92eb66c0.js";import"./use-merged-state-74230ec8.js";import"./light-6c88686a.js";import"./Checkbox-edaaabdb.js";import"./light-c071e0c7.js";import"./Space-5d75b1a8.js";import"./get-slot-a0e67e91.js";import"./_common-89f2509f.js";import"./Tag-827106b2.js";import"./_common-991711fd.js";import"./Avatar-62f97100.js";import"./utils-48198701.js";import"./light-4ec95d76.js";import"./SmallSongData-c72e9d99.js";import"./FormItem-e0127deb.js";import"./light-8d6c1748.js";import"./Popover-87b27d79.js";import"./light-cb0cf260.js";import"./Follower-ef4b8179.js";import"./next-frame-once-924ab492.js";import"./cssr-ed8d5782.js";import"./InputNumber-3459a9d0.js";import"./Add-b088e338.js";import"./Alert-e807b2ba.js";import"./_common-60fffae6.js";import"./Radio-3c9720cb.js";import"./RadioGroup-b4b538f1.js";import"./light-5b209fbc.js";import"./RecordDisc-b91e091f.js";import"./LinkTwo-8d6bc0a2.js";import"./light-bf1b7eb7.js";import"./PlayOne-22adba7e.js";import"./DeleteFour-7678c621.js";import"./Dropdown-db0b14d8.js";import"./create-07671515.js";import"./light-37eaa122.js";import"./create-ref-setter-ee697025.js";import"./DrawerContent-eda0377e.js";import"./light-ae2f09ac.js";import"./Pagination-10257b2a.js";import"./Select-714380b7.js";import"./light-20fa43af.js";import"./light-170bfcda.js";import"./Empty-3e1da814.js";import"./light-e632ba41.js";const v={class:"songs"},d={__name:"songs",setup(d){const{t:h}=e(),y=s(),f=o(y.currentRoute.value.query.keywords),b=o([]),x=o(0),D=o(30),q=o(y.currentRoute.value.query.page?Number(y.currentRoute.value.query.page):1),C=(e,s=30,o=0,r=1)=>{t(e,s,o,r).then((t=>{t.result.songs?(x.value=t.result.songCount,b.value=[],t.result.songs.forEach(((t,e)=>{b.value.push({id:t.id,num:e+1+(q.value-1)*D.value,name:t.name,artist:t.ar,album:t.al,alia:t.alia,time:n(t.dt),fee:t.fee,pc:t.pc?t.pc:null,mv:t.mv?t.mv:null})}))):$message.error(h("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};r((()=>y.currentRoute.value),(t=>{f.value=t.query.keywords,q.value=Number(t.query.page?t.query.page:1),"s-songs"==t.name&&C(f.value,D.value,q.value?(q.value-1)*D.value:0)}));const k=t=>{D.value=t,C(f.value,t,(q.value-1)*D.value)},w=t=>{y.push({path:"/music/search/songs",query:{keywords:f.value,page:t}})};return a((()=>{C(f.value,D.value,(q.value-1)*D.value)})),(t,e)=>(i(),m("div",v,[p(g,{listData:l(b)},null,8,["listData"]),l(b)[0]?(i(),u(c,{key:0,pageNumber:l(q),totalCount:l(x),onPageSizeChange:k,onPageNumberChange:w},null,8,["pageNumber","totalCount"])):j("",!0)]))}};export{d as default};
