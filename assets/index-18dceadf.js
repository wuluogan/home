import{y as e,D as t,aS as a,h as n,Q as s,cL as l,aM as o,S as r,c2 as c,a as u,cM as d,e as g,Y as p,f as m,o as h,k as y,w as v,bk as f,u as k,ao as S,cc as P,cd as b,cz as w,ce as L,cA as C,cf as _,cg as D,ch as T,_ as x,ac as j,cN as I,cB as z,cO as E,cP as $,r as M,c as A,j as F,c8 as B,ae as O,m as U,d as H,b as V,t as R,F as q,x as N,q as W,v as Y,c4 as X,an as Z,cQ as G,i as K,c5 as Q,bO as J,z as ee,cC as te,g as ae,am as ne,n as se,cR as le,cS as oe,p as ie,l as re,cb as ce,cv as ue,cT as de,cU as ge,cV as pe,cW as me,cX as he,cY as ye,cZ as ve,c_ as fe,c$ as ke,d0 as Se,d1 as Pe,cD as be,c6 as we}from"./index-c72c5b0c.js";import{g as Le,r as Ce}from"./login-8eba4a94.js";import{t as _e}from"./themeColor-10df075c.js";import{u as De}from"./use-os-theme-c81c64c8.js";import{d as Te}from"./dark-0cd2ed17.js";import{z as xe,d as je}from"./zhCN-bd9efa0e.js";import{g as Ie,a as ze}from"./search-6423cffd.js";import{_ as Ee}from"./Input-b4caa030.js";import{_ as $e}from"./text-64fc9966.js";import{_ as Me}from"./Tag-827106b2.js";import{_ as Ae}from"./Space-5d75b1a8.js";import{_ as Fe}from"./Scrollbar-4274af02.js";import{R as Be}from"./Right-6d9083bf.js";import{H as Oe,S as Ue}from"./SunOne-994d63a8.js";import{_ as He}from"./Avatar-62f97100.js";import{S as Ve}from"./SettingTwo-827e936b.js";import{_ as Re}from"./Dropdown-db0b14d8.js";import{_ as qe}from"./Progress-90277c5d.js";import{A as Ne}from"./AddPlaylist-fbffd947.js";import{A as We}from"./AllArtists-b2fee903.js";import{D as Ye}from"./DeleteFour-7678c621.js";import{_ as Xe,a as Ze}from"./DrawerContent-eda0377e.js";import{_ as Ge}from"./Slider-ec730116.js";import{_ as Ke}from"./Switch-6b042a41.js";import{_ as Qe}from"./Popover-87b27d79.js";import{_ as Je,a as et}from"./LayoutHeader-72d92eb5.js";import{_ as tt,a as at}from"./Layout-42480bef.js";import"./_common-60fffae6.js";import"./light-20fa43af.js";import"./light-cb0cf260.js";import"./light-170bfcda.js";import"./light-6c88686a.js";import"./light-4ec95d76.js";import"./light-50bc744e.js";import"./light-c071e0c7.js";import"./light-f72e4d05.js";import"./light-542ddaed.js";import"./light-5b209fbc.js";import"./light-e632ba41.js";import"./light-93a0afe9.js";import"./light-a43afc3c.js";import"./light-37eaa122.js";import"./light-5d80b650.js";import"./light-ae2f09ac.js";import"./_common-991711fd.js";import"./_common-89f2509f.js";import"./light-8d6c1748.js";import"./light-56c22105.js";import"./light-79b1ba92.js";import"./light-7a086192.js";import"./light-876c84f3.js";import"./_common-b0d8bea4.js";import"./light-bf1b7eb7.js";import"./_common-6222e43f.js";import"./light-66678653.js";import"./light-a7677734.js";import"./light-6a3b8d52.js";import"./index-92eb66c0.js";import"./Suffix-af55cfcd.js";import"./use-merged-state-74230ec8.js";import"./use-compitable-a1866e01.js";import"./get-slot-a0e67e91.js";import"./utils-48198701.js";import"./create-07671515.js";import"./Follower-ef4b8179.js";import"./next-frame-once-924ab492.js";import"./cssr-ed8d5782.js";import"./create-ref-setter-ee697025.js";import"./CreatePlaylist-a7b4fb4f.js";import"./Checkbox-edaaabdb.js";const nt=e({name:"GlobalStyle",setup(){if("undefined"==typeof document)return;const e=t(a,null),{body:i}=document,{style:c}=i;let u=!1,d=!0;n((()=>{s((()=>{var t,a;const{textColor2:n,fontSize:s,fontFamily:r,bodyColor:g,cubicBezierEaseInOut:p,lineHeight:m}=e?l({},(null===(t=e.mergedThemeRef.value)||void 0===t?void 0:t.common)||o,null===(a=e.mergedThemeOverridesRef.value)||void 0===a?void 0:a.common):o;if(u||!i.hasAttribute("n-styled")){c.setProperty("-webkit-text-size-adjust","100%"),c.setProperty("-webkit-tap-highlight-color","transparent"),c.padding="0",c.margin="0",c.backgroundColor=g,c.color=n,c.fontSize=s,c.fontFamily=r,c.lineHeight=m;const e=`color .3s ${p}, background-color .3s ${p}`;d?setTimeout((()=>{c.transition=e}),0):c.transition=e,i.setAttribute("n-styled",""),u=!0,d=!1}}))})),r((()=>{u&&i.removeAttribute("n-styled")}))},render:()=>null}),st=c("find-one",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M23.8 14C29.4333 14 34 18.4772 34 24C34 29.5228 29.4333 34 23.8 34C21.1876 34 18.8046 33.0372 17 31.4537",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M24 4C35.0457 4 44 12.9543 44 24C44 35.0457 35.0457 44 24 44C18.5856 44 13.6737 41.8485 10.0726 38.3537C6.32733 34.719 4 29.6313 4 24C4 18.6326 6.11433 13.759 9.55556 10.1667",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M9.55566 10.167L24.0001 24.0003L10.0727 38.3539",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),lt=c("history",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M5.81836 6.72729V14H13.0911",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M4 24C4 35.0457 12.9543 44 24 44V44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C16.598 4 10.1351 8.02111 6.67677 13.9981",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M24.005 12L24.0038 24.0088L32.4832 32.4882",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),ot=c("home-two",!1,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M44 44V20L24 4L4 20L4 44H16V26H32V44H44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M24 44V34",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),it=c("info",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 11C25.3807 11 26.5 12.1193 26.5 13.5C26.5 14.8807 25.3807 16 24 16C22.6193 16 21.5 14.8807 21.5 13.5C21.5 12.1193 22.6193 11 24 11Z",fill:e.colors[2]},null),u("path",{d:"M24.5 34V20H23.5H22.5",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M21 34H28",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),rt=c("left",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M31 36L19 24L31 12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),ct=c("login",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M25 33L16 24L25 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M42 23.9917H16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),ut=c("logout",!0,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M33 33L42 24L33 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M16 23.9917H42",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),dt=c("me",!1,(function(e){return u("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M24 23C26.7614 23 29 20.7614 29 18C29 15.2386 26.7614 13 24 13C21.2386 13 19 15.2386 19 18C19 20.7614 21.2386 23 24 23Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),u("path",{d:"M10.022 38.332C10.3657 33.1206 14.7016 29 20 29H28C33.2914 29 37.6229 33.1097 37.9767 38.3113",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])})),gt={__name:"index",setup(t){const a=d(),n=De(),s=g(null),l=g(null),o=document.querySelector('meta[name="theme-color"]'),i=()=>{"light"==a.getSiteTheme?(l.value=null,o.setAttribute("content","#ffffff")):"dark"==a.getSiteTheme&&(l.value=Te,o.setAttribute("content","#18181c"))},r=e=>{a.themeAuto&&("dark"==e?a.setSiteTheme("dark"):a.setSiteTheme("light"))},c=e=>{const t=_e[e];s.value={common:t},a.themeData=t,x("--main-color",t.primaryColor),x("--main-second-color",t.primaryColor+"1f"),x("--main-boxshadow-color",t.primaryColor+"26"),x("--main-boxshadow-hover-color",t.primaryColor+"05")},x=(e,t)=>{document.documentElement.style.setProperty(e,t)},j=e({setup(){window.$loadingBar=C(),window.$notification=_(),window.$message=D(),window.$dialog=T()},render(){}});return p((()=>a.getSiteTheme),(()=>{i()})),p((()=>n.value),(e=>{r(e)})),p((()=>a.themeType),(e=>c(e))),m((()=>{i(),c(a.themeType),r(n.value)})),(e,t)=>{const a=nt,n=S,o=P,i=b,r=w,c=L;return h(),y(c,{locale:k(xe),"date-locale":k(je),theme:k(l),"theme-overrides":k(s),breakpoints:{xs:0,mb:480,s:640,m:1024,l:1280,xl:1536,xxl:1920},abstract:"","inline-theme-disabled":""},{default:v((()=>[u(a),u(r,null,{default:v((()=>[u(i,null,{default:v((()=>[u(o,null,{default:v((()=>[u(n,null,{default:v((()=>[f(e.$slots,"default"),u(k(j))])),_:3})])),_:3})])),_:3})])),_:3})])),_:3},8,["locale","date-locale","theme","theme-overrides"])}}};const pt=x({name:"CollapseTransition",props:{name:{type:String,required:!1,default:"collapse"},dimension:{type:String,required:!1,default:"height",validator:e=>["height","width"].includes(e)},duration:{type:Number,required:!1,default:300},easing:{type:String,required:!1,default:"ease-in-out"}},watch:{dimension(){this.clearCachedDimensions()}},data:()=>({cachedStyles:null}),computed:{transition(){let e=[];return Object.keys(this.cachedStyles).forEach((t=>{e.push(`${this.convertToCssProperty(t)} ${this.duration}ms ${this.easing}`)})),e.join(", ")}},methods:{beforeAppear(e){this.$emit("before-appear",e)},appear(e){this.$emit("appear",e)},afterAppear(e){this.$emit("after-appear",e)},appearCancelled(e){this.$emit("appear-cancelled",e)},beforeEnter(e){this.$emit("before-enter",e)},enter(e,t){this.detectAndCacheDimensions(e),this.setClosedDimensions(e),this.hideOverflow(e),this.forceRepaint(e),this.setTransition(e),this.setOpenedDimensions(e),this.$emit("enter",e,t),setTimeout(t,this.duration)},afterEnter(e){this.unsetOverflow(e),this.unsetTransition(e),this.unsetDimensions(e),this.clearCachedDimensions(),this.$emit("after-enter",e)},enterCancelled(e){this.$emit("enter-cancelled",e)},beforeLeave(e){this.$emit("before-leave",e)},leave(e,t){this.detectAndCacheDimensions(e),this.setOpenedDimensions(e),this.hideOverflow(e),this.forceRepaint(e),this.setTransition(e),this.setClosedDimensions(e),this.$emit("leave",e,t),setTimeout(t,this.duration)},afterLeave(e){this.unsetOverflow(e),this.unsetTransition(e),this.unsetDimensions(e),this.clearCachedDimensions(),this.$emit("after-leave",e)},leaveCancelled(e){this.$emit("leave-cancelled",e)},detectAndCacheDimensions(e){if(this.cachedStyles)return;const t=e.style.visibility,a=e.style.display;e.style.visibility="hidden",e.style.display="",this.cachedStyles=this.detectRelevantDimensions(e),e.style.visibility=t,e.style.display=a},clearCachedDimensions(){this.cachedStyles=null},detectRelevantDimensions(e){return"height"===this.dimension?{height:e.offsetHeight+"px",paddingTop:e.style.paddingTop||this.getCssValue(e,"padding-top"),paddingBottom:e.style.paddingBottom||this.getCssValue(e,"padding-bottom")}:"width"===this.dimension?{width:e.offsetWidth+"px",paddingLeft:e.style.paddingLeft||this.getCssValue(e,"padding-left"),paddingRight:e.style.paddingRight||this.getCssValue(e,"padding-right")}:{}},setTransition(e){e.style.transition=this.transition},unsetTransition(e){e.style.transition=""},hideOverflow(e){e.style.overflow="hidden"},unsetOverflow(e){e.style.overflow=""},setClosedDimensions(e){Object.keys(this.cachedStyles).forEach((t=>{e.style[t]="0"}))},setOpenedDimensions(e){Object.keys(this.cachedStyles).forEach((t=>{e.style[t]=this.cachedStyles[t]}))},unsetDimensions(e){Object.keys(this.cachedStyles).forEach((t=>{e.style[t]=""}))},forceRepaint(e){getComputedStyle(e)[this.dimension]},getCssValue:(e,t)=>getComputedStyle(e,null).getPropertyValue(t),convertToCssProperty(e){const t=e.match(/([A-Z])/g);if(!t)return e;for(let a=0,n=t.length;a<n;a++)e=e.replace(new RegExp(t[a]),"-"+t[a].toLowerCase());return"-"===e.slice(0,1)&&(e=e.slice(1)),e}}},[["render",function(e,t,a,n,s,l){return h(),y(j,{name:a.name,onBeforeAppear:l.beforeAppear,onAppear:l.appear,onAfterAppear:l.afterAppear,onAppearCancelled:l.appearCancelled,onBeforeEnter:l.beforeEnter,onEnter:l.enter,onAfterEnter:l.afterEnter,onEnterCancelled:l.enterCancelled,onBeforeLeave:l.beforeLeave,onLeave:l.leave,onAfterLeave:l.afterLeave,onLeaveCancelled:l.leaveCancelled},{default:v((()=>[f(e.$slots,"default")])),_:3},8,["name","onBeforeAppear","onAppear","onAfterAppear","onAppearCancelled","onBeforeEnter","onEnter","onAfterEnter","onEnterCancelled","onBeforeLeave","onLeave","onAfterLeave","onLeaveCancelled"])}]]);let mt;const ht={class:"searchInp"},yt={key:0,class:"history-list"},vt={class:"list-title"},ft={key:1,class:"hot-list"},kt={class:"list-title"},St=["onClick"],Pt={class:"title"},bt={class:"name"},wt={key:0,class:"suggest-tip"},Lt={key:1,class:"suggest-all"},Ct={class:"loading"},_t={key:0,class:"suggest-item"},Dt={class:"type"},Tt={class:"name"},xt=["onClick"],jt={key:1,class:"suggest-item"},It={class:"type"},zt={class:"name"},Et=["onClick","innerHTML"],$t={key:2,class:"suggest-item"},Mt={class:"type"},At={class:"name"},Ft=["onClick"],Bt={key:3,class:"suggest-item"},Ot={class:"type"},Ut={class:"name"},Ht=["onClick"],Vt=x({__name:"index",setup(e){const{t:t}=I(),a=z(),n=E(),s=d(),l=$(),o=g(null),i=g(null),c=()=>{var e;null==(e=i.value)||e.focus(),l.searchInputActive=!0,n.showPlayList=!1,S()},f=M({hot:[],suggest:{}}),S=()=>{Ie().then((e=>{f.hot=e.data}))},P=(e,t)=>{switch(t){case 0:o.value=e,n.setSearchHistory(o.value.trim()),a.push({path:"/music/search/songs",query:{keywords:e,page:1}});break;case 1:a.push(`/music/song?id=${e}`);break;case 10:a.push(`/music/album?id=${e}`);break;case 100:a.push(`/music/artist?id=${e}`);break;case 1e3:a.push(`/music/playlist?id=${e}`)}},b=()=>{$dialog.warning({class:"s-dialog",title:t("general.dialog.delete"),content:t("nav.search.tip"),positiveText:t("general.dialog.delete"),negativeText:t("general.dialog.cancel"),onPositiveClick:()=>{n.setSearchHistory(null,!0),$message.success(t("general.message.deleteSuccess"))}})};return m((()=>{S(),document.addEventListener("click",(()=>{var e;null==(e=i.value)||e.blur(),l.searchInputActive=!1}))})),r((()=>{document.removeEventListener("click",(()=>{var e;null==(e=i.value)||e.blur(),l.searchInputActive=!1}))})),p((()=>o.value),(e=>{e.trim()&&((e,t=300,a=!1)=>{if(null!==mt&&clearTimeout(mt),a){var n=!mt;mt=setTimeout((function(){mt=null}),t),n&&"function"==typeof e&&e()}else mt=setTimeout((function(){"function"==typeof e&&e()}),t)})((()=>{var t;e.trim(),t=e.trim(),f.suggest=[],ze(t).then((e=>{f.suggest=e.result}))}),500)})),p((()=>n.showPlayList),(e=>{var t;e&&(null==(t=i.value)||t.blur(),l.searchInputActive=!1)})),(e,t)=>{const r=X,d=Ee,g=$e,p=Me,m=Ae,S=Fe,w=Z;return h(),A("div",ht,[u(d,{class:F(k(l).searchInputActive?"input focus":"input"),"input-props":{autoComplete:!1},placeholder:e.$t("nav.search.placeholder"),ref_key:"searchInpRef",ref:i,round:"",clearable:"",value:k(o),"onUpdate:value":t[0]||(t[0]=e=>B(o)?o.value=e:null),onFocus:c,onKeydown:t[1]||(t[1]=e=>{var t;"Enter"===e.key&&null!=o.value&&(o.value.trim(),null==(t=i.value)||t.blur(),l.searchInputActive=!1,n.setSearchHistory(o.value.trim()),a.push({path:"/music/search/songs",query:{keywords:o.value.trim()}}))}),onClick:t[2]||(t[2]=O((()=>{}),["stop"]))},{prefix:v((()=>[u(r,{size:"16",class:F(k(l).searchInputActive?"active":""),component:"Search"},null,8,["class"])])),_:1},8,["class","placeholder","value"]),u(pt,{easing:"ease-in-out"},{default:v((()=>[U(u(w,{class:"list","content-style":"padding: 0"},{default:v((()=>[u(S,null,{default:v((()=>[k(n).getSearchHistory[0]&&k(s).searchHistory?(h(),A("div",yt,[H("div",vt,[u(r,{size:"16",component:"CaretUp"}),u(g,null,{default:v((()=>[V(R(e.$t("nav.search.history")),1)])),_:1})]),u(m,null,{default:v((()=>[(h(!0),A(q,null,N(k(n).getSearchHistory,(e=>(h(),y(p,{key:e,bordered:!1,round:"",innerHTML:e,onClick:t=>P(e,0)},null,8,["innerHTML","onClick"])))),128))])),_:1}),H("div",{class:"del",onClick:b},[u(r,{size:"16",depth:3,component:"Trash",theme:"filled"}),u(g,{depth:3},{default:v((()=>[V(R(e.$t("nav.search.delHistory")),1)])),_:1})])])):W("",!0),k(f).hot[0]?(h(),A("div",ft,[H("div",kt,[u(r,{size:"16",component:"Flame",theme:"filled"}),u(g,null,{default:v((()=>[V(R(e.$t("nav.search.hotList")),1)])),_:1})]),(h(!0),A(q,null,N(k(f).hot,((e,t)=>(h(),A("div",{class:"hot-item",key:e,onClick:t=>P(e.searchWord,0)},[H("div",{class:F(t<3?"num hot":"num")},R(t+1),3),H("div",Pt,[H("span",bt,[V(R(e.searchWord)+" ",1),e.iconUrl?(h(),y(p,{key:0,class:"tag",round:"",bordered:!1,size:"small"},{default:v((()=>[V(R(1==e.iconType?"HOT":"UP"),1)])),_:2},1024)):W("",!0)]),u(g,{class:"tip",depth:"3",innerHTML:e.content},null,8,["innerHTML"])])],8,St)))),128))])):W("",!0)])),_:1})])),_:1},512),[[Y,k(l).searchInputActive&&!k(o)&&(k(n).getSearchHistory[0]||k(f).hot[0])]])])),_:1}),u(pt,{easing:"ease-in-out"},{default:v((()=>[U(u(w,{class:"list","content-style":"padding: 0"},{default:v((()=>[u(S,null,{default:v((()=>[0===Object.keys(k(f).suggest).length?(h(),A("div",wt,[u(r,{size:"16",component:"SearchCircleOutline"}),H("span",null,R(e.$t("nav.search.noSuggestions")),1)])):(h(),A("div",Lt,[U(H("div",Ct,[u(r,{size:"16",component:"SearchCircleOutline"}),H("span",null,R(e.$t("nav.search.searchTip")),1)],512),[[Y,!k(f).suggest.order]]),k(f).suggest.songs?(h(),A("div",_t,[H("div",Dt,[u(r,{size:"18",component:"MusicalNote",theme:"filled"}),H("span",Tt,R(e.$t("nav.search.songs")),1)]),(h(!0),A(q,null,N(k(f).suggest.songs,(e=>(h(),A("span",{class:"names",key:e,onClick:t=>P(e.id,1)},R(e.name)+" - "+R(e.artists[0].name),9,xt)))),128))])):W("",!0),k(f).suggest.artists?(h(),A("div",jt,[H("div",It,[u(r,{size:"18",component:"Mic",theme:"filled"}),H("span",zt,R(e.$t("nav.search.artists")),1)]),(h(!0),A(q,null,N(k(f).suggest.artists,(e=>(h(),A("span",{class:"names",key:e,onClick:t=>P(e.id,100),innerHTML:e.name},null,8,Et)))),128))])):W("",!0),k(f).suggest.albums?(h(),A("div",$t,[H("div",Mt,[u(r,{size:"18",component:"Disc",theme:"filled"}),H("span",At,R(e.$t("nav.search.albums")),1)]),(h(!0),A(q,null,N(k(f).suggest.albums,(e=>(h(),A("span",{class:"names",key:e,onClick:t=>P(e.id,10)},R(e.name)+" - "+R(e.artist.name),9,Ft)))),128))])):W("",!0),k(f).suggest.playlists?(h(),A("div",Bt,[H("div",Ot,[u(r,{size:"18",component:"Recording",theme:"filled"}),H("span",Ut,R(e.$t("nav.search.playlists")),1)]),(h(!0),A(q,null,N(k(f).suggest.playlists,(e=>(h(),A("span",{class:"names",key:e,onClick:t=>P(e.id,1e3)},R(e.name),9,Ht)))),128))])):W("",!0)]))])),_:1})])),_:1},512),[[Y,k(l).searchInputActive&&k(o)&&k(f).suggest]])])),_:1})])}}},[["__scopeId","data-v-0c360102"]]),Rt={class:"left"},qt=["src"],Nt={class:"controls"},Wt={class:"center"},Yt={class:"right"},Xt=x({__name:"index",setup(e){const{t:t}=I(),a=z(),n=G(),s=$(),l=d(),o=g(null),i=g(!1),r=e=>{"avatarImg"==e.target.className?i.value=!0:i.value=!1},c=e=>()=>ee(J,{style:{transform:"translateX(2px)"}},{default:()=>e}),y=()=>ee("div",{style:"display: flex; align-items: center; padding: 8px 12px; cursor: pointer",onclick:()=>{n.userLogin?a.push("/music/user"):a.push("/music/login"),i.value=!1}},[ee(He,{round:!0,style:"margin-right: 12px",src:n.userLogin?n.getUserData.avatarUrl.replace(/^http:/,"https:")+"?param=60y60":"/img/music/ico/user-filling.svg",fallbackSrc:"/img/music/ico/user-filling.svg"}),ee("div",null,[ee("div",null,[ee($e,{depth:2},{default:()=>n.userLogin?n.getUserData.nickname:t("nav.avatar.notLogin")})]),ee("div",{style:"font-size: 12px;"},[ee($e,{depth:3},{default:()=>n.userLogin?Object.keys(n.getUserOtherData).length?ee(qe,{height:4,type:"line",percentage:100*n.getUserOtherData.level.progress,color:l.themeData.primaryColor},{default:()=>"Lv."+n.getUserOtherData.level.level}):t("nav.avatar.loginError"):t("nav.avatar.notLoginSubtitle")})])])]),f=g([]),S=g([]),P=g([]),b=()=>{f.value=[{label:t("nav.discoverChildren.playlists"),key:"/discover/playlists"},{label:t("nav.discoverChildren.toplists"),key:"/discover/toplists"},{label:t("nav.discoverChildren.artists"),key:"/discover/artists"}]},w=e=>{S.value=e?[{label:t("nav.userChildren.playlist"),key:"/user/playlists"},{label:t("nav.userChildren.like"),key:"/user/like"},{label:t("nav.userChildren.album"),key:"/user/album"},{label:t("nav.userChildren.artist"),key:"/user/artists"},{label:t("nav.userChildren.cloud"),key:"/user/cloud"}]:[{label:t("nav.userChildren.login"),key:"/login"}]},L=()=>{P.value=[{key:"header",type:"render",render:y},{key:"header-divider",type:"divider"},{label:()=>ee($e,{style:{transform:"translateX(2px)"}},{default:()=>"light"==l.getSiteTheme?t("nav.avatar.dark"):t("nav.avatar.light")}),key:"changeTheme",icon:()=>ee(J,{style:{transform:"translateX(2px)"}},{default:()=>"light"==l.getSiteTheme?ee(te):ee(Ue)})},{label:t("nav.avatar.history"),key:"history",icon:c(ee(lt))},{label:t("nav.avatar.setting"),key:"setting",icon:c(ee(Ve))},{label:()=>ee($e,{style:{transform:"translateX(2px)"}},{default:()=>n.userLogin?t("nav.avatar.logout"):t("nav.avatar.login")}),key:"user",icon:()=>ee(J,{style:{transform:"translateX(2px)"}},{default:()=>n.userLogin?ee(ut):ee(ct)})},{label:t("nav.avatar.about"),key:"about",icon:c(ee(it))}]},C=g([]),_=()=>{C.value=[{label:t("nav.home"),key:"/music/music",icon:c(ee(ot))},{label:t("nav.discover"),key:"/music/discover",icon:c(ee(st))},{label:t("nav.user"),key:"/music/user",icon:c(ee(dt))}]},D=e=>{a.push(e)},T=e=>{switch(i.value=!1,e){case"changeTheme":"light"==l.getSiteTheme?l.setSiteTheme("dark"):l.setSiteTheme("light"),l.themeAuto=!1;break;case"history":a.push("/music/history");break;case"setting":a.push("/music/setting");break;case"user":n.userLogin?$dialog.warning({class:"s-dialog",title:t("nav.avatar.logout"),content:t("nav.avatar.tip"),positiveText:t("nav.avatar.logout"),negativeText:t("general.dialog.cancel"),onPositiveClick:()=>{n.userLogOut(),$message.success(t("nav.avatar.success")),o.value=setTimeout((()=>{document.location.reload()}),1e3)}}):a.push("/music/login")}};return p((()=>n.userLogin),(e=>{w(e)})),p((()=>l.language),(()=>{b(),_(),L(),w(n.userLogin)})),m((()=>{b(),_(),L(),w(n.userLogin)})),K((()=>{clearTimeout(o.value)})),(e,t)=>{const l=Q("router-link"),o=Re,c=ae;return h(),A("nav",null,[H("div",Rt,[H("div",{class:"logo",onClick:t[0]||(t[0]=e=>k(a).push("/music"))},[H("img",{src:k("/img/music/logo/favicon.png"),alt:"logo"},null,8,qt)]),u(j,{name:"fade",mode:"out-in"},{default:v((()=>[U(H("div",Nt,[u(k(J),{size:"22",component:k(rt),onClick:t[1]||(t[1]=e=>k(a).go(-1))},null,8,["component"]),u(k(J),{size:"22",component:k(Be),onClick:t[2]||(t[2]=e=>k(a).go(1))},null,8,["component"])],512),[[Y,!k(s).searchInputActive]])])),_:1})]),H("div",Wt,[u(l,{class:"link",to:"/music"},{default:v((()=>[V(R(e.$t("nav.home")),1)])),_:1}),u(o,{trigger:"hover",options:k(f),onSelect:D},{default:v((()=>[u(l,{class:"link",to:"/music/discover"},{default:v((()=>[V(R(e.$t("nav.discover")),1)])),_:1})])),_:1},8,["options"]),u(o,{trigger:"hover",options:k(S),onSelect:D},{default:v((()=>[u(l,{class:"link",to:"/music/user"},{default:v((()=>[V(R(e.$t("nav.user")),1)])),_:1})])),_:1},8,["options"])]),H("div",Yt,[u(Vt),u(o,{trigger:"click",options:k(C),onSelect:D},{default:v((()=>[u(c,{class:"mb-menu",circle:""},{icon:v((()=>[u(k(J),{component:k(Oe)},null,8,["component"])])),_:1})])),_:1},8,["options"]),u(o,{placement:"bottom-end",show:k(i),"show-arrow":!0,options:k(P),"on-clickoutside":r,onSelect:T},{default:v((()=>[u(k(He),{class:"avatar",round:"",size:"small",src:k(n).getUserData.avatarUrl?k(n).getUserData.avatarUrl.replace(/^http:/,"https:")+"?param=60y60":"/img/music/ico/user-filling.svg","img-props":{class:"avatarImg"},"fallback-src":"/img/music/ico/user-filling.svg",onClick:t[3]||(t[3]=e=>i.value=!k(i))},null,8,["src"])])),_:1},8,["show","options"])])])}}},[["__scopeId","data-v-ce9de455"]]);function Zt(e,t,a){var n=(a||{}).atBegin;return function(e,t,a){var n,s=a||{},l=s.noTrailing,o=void 0!==l&&l,i=s.noLeading,r=void 0!==i&&i,c=s.debounceMode,u=void 0===c?void 0:c,d=!1,g=0;function p(){n&&clearTimeout(n)}function m(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var i=this,c=Date.now()-g;function m(){g=Date.now(),t.apply(i,s)}function h(){n=void 0}d||(r||!u||n||m(),p(),void 0===u&&c>e?r?(g=Date.now(),o||(n=setTimeout(u?h:m,e))):m():!0!==o&&(n=setTimeout(u?h:m,void 0===u?e-c:e)))}return m.cancel=function(e){var t=(e||{}).upcomingOnly,a=void 0!==t&&t;p(),d=!a},m}(e,t,{debounceMode:!1!==(void 0!==n&&n)})}const Gt={class:"text"},Kt={key:0},Qt={class:"left"},Jt={key:1,class:"bar"},ea={class:"right"},ta={class:"name text-hidden"},aa=x({__name:"PlayListDrawer",setup(e){const{t:t}=I(),a=E(),n=g(!1),s=g(null);return p((()=>a.showPlayList),(e=>{n.value=e,ne().then((()=>{if(e&&a.getPlaylists[0]){const e=document.getElementById(`playlist${a.persistData.playSongIndex}`);e&&(s.value=setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center"})}),500))}else clearTimeout(s.value)}))})),m((()=>{n.value=a.showPlayList})),K((()=>{clearTimeout(s.value)})),(e,s)=>{const l=$e,o=J,i=Z,r=Xe,c=Ze;return h(),y(c,{class:"playlist-drawer",show:k(n),"onUpdate:show":s[0]||(s[0]=e=>B(n)?n.value=e:null),"z-index":1,width:400,"trap-focus":!1,"block-scroll":!1,placement:"right",to:"#mainContent",onAfterLeave:s[1]||(s[1]=e=>k(a).showPlayList=!1),onMaskClick:s[2]||(s[2]=e=>k(a).showPlayList=!1)},{default:v((()=>[u(r,{"native-scrollbar":!1,closable:""},{header:v((()=>[H("div",Gt,[u(l,{class:"name"},{default:v((()=>[V(R(e.$t("general.name.playlists")),1)])),_:1}),k(a).getPlaylists.length>0?(h(),y(l,{key:0,class:"num",depth:3},{default:v((()=>[V(R(e.$t("general.name.songSize",{size:k(a).getPlaylists.length})),1)])),_:1})):W("",!0)])])),default:v((()=>[u(j,{mode:"out-in"},{default:v((()=>[k(a).getPlaylists[0]?(h(),A("div",Kt,[(h(!0),A(q,null,N(k(a).getPlaylists,((e,n)=>(h(),y(i,{hoverable:"",class:F(n===k(a).persistData.playSongIndex?"songs play":"songs"),id:"playlist"+n,"content-style":{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center"},key:e,onClick:e=>(e=>{try{a.persistData.playSongIndex!==e&&("undefined"!=typeof $player&&le($player),a.persistData.playSongIndex=e,a.isLoadingSong=!0,a.setPlayState(!0))}catch(n){console.error(t("general.message.operationFailed"),n),$message.error(t("general.message.operationFailed"))}})(n)},{default:v((()=>[H("div",Qt,[n!==k(a).persistData.playSongIndex?(h(),y(l,{key:0,depth:3,class:"num"},{default:v((()=>[V(R(n+1),1)])),_:2},1024)):(h(),A("div",Jt,[(h(),A(q,null,N(3,(e=>H("div",{key:e,class:"line",style:se({animationDelay:`0.${e*e}s`,animationPlayState:k(a).getPlayState?"running":"paused",height:`${Math.floor(7*Math.random())+10}px`})},null,4))),64))]))]),H("div",ea,[H("div",ta,R(e.name),1),u(We,{class:"text-hidden",artistsData:e.artist},null,8,["artistsData"]),u(o,{class:"remove",size:"18",component:k(Ye),onClick:O((e=>k(a).removeSong(n)),["stop"])},null,8,["component","onClick"])])])),_:2},1032,["class","id","onClick"])))),128))])):(h(),y(l,{key:1},{default:v((()=>[V(R(e.$t("other.playlistEmpty")),1)])),_:1}))])),_:1})])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-9df1804a"]]);if(!na)var na={map:function(e,t){var a={};return t?e.map((function(e,n){return a.index=n,t.call(a,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var a={};return e.reduce(t?function(e,n,s){return a.index=s,e+t.call(a,n)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?na.map(e,t):e)}};var sa=function(){var e=5,t=8-e;function a(t,a,n){return(t<<2*e)+(a<<e)+n}function n(e){var t=[],a=!1;function n(){t.sort(e),a=!0}return{push:function(e){t.push(e),a=!1},peek:function(e){return a||n(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return a||n(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return a||n(),t}}}function s(e,t,a,n,s,l,o){var i=this;i.r1=e,i.r2=t,i.g1=a,i.g2=n,i.b1=s,i.b2=l,i.histo=o}function l(){this.vboxes=new n((function(e,t){return na.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function o(e,t){if(t.count()){var n=t.r2-t.r1+1,s=t.g2-t.g1+1,l=na.max([n,s,t.b2-t.b1+1]);if(1==t.count())return[t.copy()];var o,i,r,c,u=0,d=[],g=[];if(l==n)for(o=t.r1;o<=t.r2;o++){for(c=0,i=t.g1;i<=t.g2;i++)for(r=t.b1;r<=t.b2;r++)c+=e[a(o,i,r)]||0;d[o]=u+=c}else if(l==s)for(o=t.g1;o<=t.g2;o++){for(c=0,i=t.r1;i<=t.r2;i++)for(r=t.b1;r<=t.b2;r++)c+=e[a(i,o,r)]||0;d[o]=u+=c}else for(o=t.b1;o<=t.b2;o++){for(c=0,i=t.r1;i<=t.r2;i++)for(r=t.g1;r<=t.g2;r++)c+=e[a(i,r,o)]||0;d[o]=u+=c}return d.forEach((function(e,t){g[t]=u-e})),function(e){var a,n,s,l,i,r=e+"1",c=e+"2",p=0;for(o=t[r];o<=t[c];o++)if(d[o]>u/2){for(s=t.copy(),l=t.copy(),i=(a=o-t[r])<=(n=t[c]-o)?Math.min(t[c]-1,~~(o+n/2)):Math.max(t[r],~~(o-1-a/2));!d[i];)i++;for(p=g[i];!p&&d[i-1];)p=g[--i];return s[c]=i,l[r]=s[c]+1,[s,l]}}(l==n?"r":l==s?"g":"b")}}return s.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(e){var t=this,n=t.histo;if(!t._count_set||e){var s,l,o,i=0;for(s=t.r1;s<=t.r2;s++)for(l=t.g1;l<=t.g2;l++)for(o=t.b1;o<=t.b2;o++)i+=n[a(s,l,o)]||0;t._count=i,t._count_set=!0}return t._count},copy:function(){var e=this;return new s(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,s=n.histo;if(!n._avg||t){var l,o,i,r,c=0,u=1<<8-e,d=0,g=0,p=0;for(o=n.r1;o<=n.r2;o++)for(i=n.g1;i<=n.g2;i++)for(r=n.b1;r<=n.b2;r++)c+=l=s[a(o,i,r)]||0,d+=l*(o+.5)*u,g+=l*(i+.5)*u,p+=l*(r+.5)*u;n._avg=c?[~~(d/c),~~(g/c),~~(p/c)]:[~~(u*(n.r1+n.r2+1)/2),~~(u*(n.g1+n.g2+1)/2),~~(u*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var a=this,n=e[0]>>t;return gval=e[1]>>t,bval=e[2]>>t,n>=a.r1&&n<=a.r2&&gval>=a.g1&&gval<=a.g2&&bval>=a.b1&&bval<=a.b2}},l.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,a=0;a<t.size();a++)if(t.peek(a).vbox.contains(e))return t.peek(a).color;return this.nearest(e)},nearest:function(e){for(var t,a,n,s=this.vboxes,l=0;l<s.size();l++)((a=Math.sqrt(Math.pow(e[0]-s.peek(l).color[0],2)+Math.pow(e[1]-s.peek(l).color[1],2)+Math.pow(e[2]-s.peek(l).color[2],2)))<t||void 0===t)&&(t=a,n=s.peek(l).color);return n},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return na.naturalOrder(na.sum(e.color),na.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var a=e.length-1,n=e[a].color;n[0]>251&&n[1]>251&&n[2]>251&&(e[a].color=[255,255,255])}},{quantize:function(i,r){if(!i.length||r<2||r>256)return!1;var c,u,d,g=(c=i,d=new Array(1<<3*e),c.forEach((function(e){u=a(e[0]>>t,e[1]>>t,e[2]>>t),d[u]=(d[u]||0)+1})),d);g.forEach((function(){}));var p=function(e,a){var n,l,o,i=1e6,r=0,c=1e6,u=0,d=1e6,g=0;return e.forEach((function(e){(n=e[0]>>t)<i?i=n:n>r&&(r=n),(l=e[1]>>t)<c?c=l:l>u&&(u=l),(o=e[2]>>t)<d?d=o:o>g&&(g=o)})),new s(i,r,c,u,d,g,a)}(i,g),m=new n((function(e,t){return na.naturalOrder(e.count(),t.count())}));function h(e,t){for(var a,n=e.size(),s=0;s<1e3;){if(n>=t)return;if(s++>1e3)return;if((a=e.pop()).count()){var l=o(g,a),i=l[0],r=l[1];if(!i)return;e.push(i),r&&(e.push(r),n++)}else e.push(a),s++}}m.push(p),h(m,.75*r);for(var y=new n((function(e,t){return na.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));m.size();)y.push(m.pop());h(y,r);for(var v=new l;y.size();)v.push(y.pop());return v}}}().quantize,la=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};la.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var oa=function(){};oa.prototype.getColor=function(e,t){return void 0===t&&(t=10),this.getPalette(e,5,t)[0]},oa.prototype.getPalette=function(e,t,a){var n=function(e){var t=e.colorCount,a=e.quality;if(void 0!==t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(void 0===a||!Number.isInteger(a)||a<1)&&(a=10),{colorCount:t,quality:a}}({colorCount:t,quality:a}),s=new la(e),l=function(e,t,a){for(var n,s,l,o,i,r=e,c=[],u=0;u<t;u+=a)s=r[0+(n=4*u)],l=r[n+1],o=r[n+2],(void 0===(i=r[n+3])||i>=125)&&(s>250&&l>250&&o>250||c.push([s,l,o]));return c}(s.getImageData().data,s.width*s.height,n.quality),o=sa(l,n.colorCount);return o?o.palette():null},oa.prototype.getColorFromUrl=function(e,t,a){var n=this,s=document.createElement("img");s.addEventListener("load",(function(){var l=n.getPalette(s,5,a);t(l[0],e)})),s.src=e},oa.prototype.getImageData=function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){if(200==this.status){var e=new Uint8Array(this.response);i=e.length;for(var a=new Array(i),n=0;n<e.length;n++)a[n]=String.fromCharCode(e[n]);var s=a.join(""),l=window.btoa(s);t("data:image/png;base64,"+l)}},a.send()},oa.prototype.getColorAsync=function(e,t,a){var n=this;this.getImageData(e,(function(e){var s=document.createElement("img");s.addEventListener("load",(function(){var e=n.getPalette(s,5,a);t(e[0],this)})),s.src=e}))};const ia={class:"record"},ra=["src"],ca={class:"control"},ua={class:"play-state"},da=x({__name:"PlayerRecord",setup(e){const t=E();return(e,a)=>{const n=X;return h(),A("div",ia,[H("img",{class:F(k(t).getPlayState?"pointer play":"pointer"),src:"/img/music/ico/pointer.png",alt:"pointer"},null,2),H("div",{class:"pic",style:se({animationPlayState:k(t).getPlayState?"running":"paused"})},[H("img",{class:"album",src:k(t).getPlaySongData?k(t).getPlaySongData.album.picUrl.replace(/^http:/,"https:")+"?param=500y500":"/img/music/pic/default.png",alt:"cover"},null,8,ra)],4),H("div",ca,[k(t).getPersonalFmMode?(h(),y(n,{key:1,class:"dislike",size:"24",component:"ThumbsDown",onClick:a[1]||(a[1]=e=>k(t).setFmDislike(k(t).getPersonalFmData.id))})):(h(),y(n,{key:0,class:"prev",size:"36",component:"PlaySkipBackCircle",onClick:a[0]||(a[0]=O((e=>k(t).setPlaySongIndex("prev")),["stop"]))})),H("div",ua,[U(u(n,{size:"58",component:"PlayCircle",onClick:a[2]||(a[2]=O((e=>k(t).setPlayState(!0)),["stop"]))},null,512),[[Y,!k(t).getPlayState]]),U(u(n,{size:"58",component:"PauseCircle",onClick:a[3]||(a[3]=O((e=>k(t).setPlayState(!1)),["stop"]))},null,512),[[Y,k(t).getPlayState]])]),u(n,{class:"next",size:"36",component:"PlaySkipForwardCircle",onClick:a[4]||(a[4]=O((e=>k(t).setPlaySongIndex("next")),["stop"]))})])])}}},[["__scopeId","data-v-4212aef0"]]),ga={class:"cover"},pa={class:"pic"},ma=["src"],ha=["src"],ya={class:"control"},va={class:"data"},fa={class:"desc"},ka={class:"name text-hidden"},Sa={key:0,class:"message"},Pa={class:"time"},ba={class:"buttons"},wa={class:"play-state"},La=x({__name:"PlayerCover",setup(e){const t=z(),a=E(),n=G(),s=e=>{o(e)},l=()=>{o(a.getPlaySongTime.barMoveDistance),a.setPlayState(!0)},o=e=>{var t;if("undefined"!=typeof $player&&(null==(t=a.getPlaySongTime)?void 0:t.duration)){const t=a.getPlaySongTime.duration/100*e;oe($player,t)}},i=(e,n)=>{a.setBigPlayerState(!1),t.push({path:e,query:n})};return(e,t)=>{const o=X,r=Ge;return h(),A("div",ga,[H("div",pa,[H("img",{class:"album",src:k(a).getPlaySongData?k(a).getPlaySongData.album.picUrl.replace(/^http:/,"https:")+"?param=1024y1024":"/img/music/pic/default.png",alt:"cover"},null,8,ma),H("img",{class:"shadow",src:k(a).getPlaySongData?k(a).getPlaySongData.album.picUrl.replace(/^http:/,"https:")+"?param=1024y1024":"/img/music/pic/default.png",alt:"shadow"},null,8,ha)]),H("div",ya,[H("div",va,[H("div",fa,[H("span",ka,R(k(a).getPlaySongData?k(a).getPlaySongData.name:e.$t("other.noSong")),1),k(a).getPlaySongData?(h(),A("div",Sa,[u(We,{artistsData:[k(a).getPlaySongData.artist[0],k(a).getPlaySongData.artist[1]?k(a).getPlaySongData.artist[1]:null]},null,8,["artistsData"]),H("span",{class:"ablum text-hidden",onClick:t[0]||(t[0]=e=>i("/album",{id:k(a).getPlaySongData?k(a).getPlaySongData.album.id:null}))},R(k(a).getPlaySongData.album.name),1)])):W("",!0)]),k(a).getPlaySongData&&k(n).userLogin?(h(),y(o,{key:0,class:"like",size:"20",component:k(a).getSongIsLike(k(a).getPlaySongData.id)?"HeartSharp":"HeartOutline",onClick:t[1]||(t[1]=O((e=>k(a).getSongIsLike(k(a).getPlaySongData.id)?k(a).changeLikeList(k(a).getPlaySongData.id,!1):k(a).changeLikeList(k(a).getPlaySongData.id,!0)),["stop"]))},null,8,["component"])):W("",!0)]),H("div",Pa,[H("span",null,R(k(a).getPlaySongTime.songTimePlayed),1),u(r,{value:k(a).getPlaySongTime.barMoveDistance,"onUpdate:value":[t[2]||(t[2]=e=>k(a).getPlaySongTime.barMoveDistance=e),s],min:0,max:100,step:.1,tooltip:!1,onDragStart:t[3]||(t[3]=e=>k(a).setPlayState(!1)),"onUpdate:valueEnd":l},null,8,["value"]),H("span",null,R(k(a).getPlaySongTime.songTimeDuration),1)]),H("div",ba,[u(o,{style:se(k(a).getPersonalFmMode?"opacity: 0.2;pointer-events: none;":null),size:"16",class:"mode",component:"normal"===k(a).getPlaySongMode?"Repeat":"random"===k(a).getPlaySongMode?"Shuffle":"RecordingOutline",onClick:t[4]||(t[4]=e=>k(a).setPlaySongMode())},null,8,["style","component"]),k(a).getPersonalFmMode?(h(),y(o,{key:1,class:"dislike",size:"20",style:se(k(n).userLogin?null:"opacity: 0.2;pointer-events: none;"),component:"ThumbsDownSharp",onClick:t[6]||(t[6]=e=>k(a).setFmDislike(k(a).getPersonalFmData.id))},null,8,["style"])):(h(),y(o,{key:0,class:"prev",size:"30",component:"PlaySkipBackCircleOutline",onClick:t[5]||(t[5]=O((e=>k(a).setPlaySongIndex("prev")),["stop"]))})),H("div",wa,[u(o,{size:"50",component:k(a).getPlayState?"PauseCircle":"PlayCircle",onClick:t[7]||(t[7]=O((e=>k(a).setPlayState(!k(a).getPlayState)),["stop"]))},null,8,["component"])]),u(o,{class:"next",size:"30",component:"PlaySkipForwardCircleOutline",onClick:t[8]||(t[8]=O((e=>k(a).setPlaySongIndex("next")),["stop"]))}),u(o,{class:"comment",size:"18",component:"Chatbox",onClick:t[9]||(t[9]=e=>i("/comment",{id:k(a).getPlaySongData?k(a).getPlaySongData.id:null}))})])])])}}},[["__scopeId","data-v-a4592fb7"]]),Ca=x({__name:"CountDown",setup(e){var t,a;const n=E(),s=g(0),l=g(n.getPlaySongLyric.hasYrc?null==(t=n.getPlaySongLyric)?void 0:t.yrc[0].time:null==(a=n.getPlaySongLyric)?void 0:a.lrc[0].time);return p((()=>n.getPlaySongTime.currentTime),(e=>{if(n.getPlaySongLyric.lrc[0]){const t=1-(l.value-e-.5)/l.value;s.value=Number(Math.floor(3*t))}})),p((()=>{var e;return null==(e=n.getPlaySongLyric)?void 0:e.lrc}),(e=>{var t;n.getPlaySongLyric.lrc[0]&&(l.value=n.getPlaySongLyric.hasYrc?null==(t=n.getPlaySongLyric)?void 0:t.yrc[0].time:e[0].time,s.value=0)})),(e,t)=>(h(),y(j,{mode:"out-in",appear:""},{default:v((()=>[k(s)<=2&&k(l)>1&&k(n).getPlaySongLyric.lrc[0]?(h(),A("div",{key:0,class:"countdown",style:se({animationPlayState:k(n).getPlayState?"running":"paused"})},[H("span",{class:F(["point",k(s)>2?"hidden":null])},"●",2),H("span",{class:F(["point",k(s)>1?"hidden":null])},"●",2),H("span",{class:F(["point",k(s)>0?"hidden":null])},"●",2)],4)):W("",!0)])),_:1}))}},[["__scopeId","data-v-f03fa367"]]),_a=["id"],Da=["id","onClick"],Ta=["id","onClick"],xa=["innerHTML"],ja=["innerHTML"],Ia=(e=>(ie("data-v-1505ef53"),e=e(),re(),e))((()=>H("div",{class:"placeholder"},null,-1))),za=x({__name:"RollingLyrics",emits:["lrcTextClick"],setup(e,{emit:t}){const a=E(),n=d(),s=t,l=(e,t)=>e>=t?e-t:t-e,o=e=>{s("lrcTextClick",e)};return(e,t)=>k(a).getPlaySongLyric.lrc[0]?(h(),A("div",{key:0,class:F(["cover"===k(n).playerStyle?"lrc-all cover":"lrc-all record","center"===k(n).lyricsBlock?"center":"top"]),style:se("center"===k(n).lyricsPosition?{textAlign:"center",paddingRight:"0"}:null)},[H("div",{class:"placeholder",id:k(a).getPlaySongLyric.hasYrc&&k(n).showYrc?"yrc-1":"lrc-1"},[k(n).countDownShow?(h(),y(Ca,{key:0,style:se({fontSize:k(n).lyricsFontSize+"vh"})},null,8,["style"])):W("",!0)],8,_a),k(a).getPlaySongLyric.hasYrc&&k(n).showYrc?(h(!0),A(q,{key:1},N(k(a).getPlaySongLyric.yrc,((e,t)=>(h(),A("div",{class:F(["yrc",{on:k(a).getPlaySongLyricIndex===t,blur:k(n).lyricsBlur}]),style:se({marginBottom:k(n).lyricsFontSize-1.6+"vh",transformOrigin:"center"===k(n).lyricsPosition?"center":null,filter:k(n).lyricsBlur?`blur(${l(k(a).getPlaySongLyricIndex,t)}px)`:"none"}),key:e,id:"yrc"+t,onClick:t=>o(e.time)},[H("div",{class:"lyric",style:se({fontSize:k(n).lyricsFontSize+"vh"})},[(h(!0),A(q,null,N(e.content,((s,l)=>(h(),A("div",{class:F(["text",{fill:k(a).getPlaySongLyricIndex===t&&k(a).getPlaySongTime.currentTime+.2>=s.time,transform:k(n).showYrcTransform}]),key:l,style:se({"--dur":`${Math.max(s.duration-.2,.1)}s`})},[H("span",{class:"word",innerHTML:s.content.replace(/ /g," ")},null,8,xa),H("span",{class:F(["filler",{long:l===e.content.length-1&&s.duration>1,animation:k(n).showYrcAnimation,paused:!k(a).playState}]),innerHTML:s.content.replace(/ /g," ")},null,10,ja)],6)))),128))],4),k(a).getPlaySongLyric.hasYrcTran&&k(n).showTransl&&e.tran?(h(),A("span",{key:0,style:se({fontSize:k(n).lyricsFontSize-1+"vh"}),class:"lyric-fy"},R(e.tran),5)):W("",!0),k(a).getPlaySongLyric.hasYrcRoma&&k(n).showRoma&&e.roma?(h(),A("span",{key:1,style:se({fontSize:k(n).lyricsFontSize-1.5+"vh"}),class:"lyric-roma"},R(e.roma),5)):W("",!0)],14,Ta)))),128)):(h(!0),A(q,{key:0},N(k(a).getPlaySongLyric.lrc,((e,t)=>(h(),A("div",{class:F(["lrc",{on:k(a).getPlaySongLyricIndex==t,blur:k(n).lyricsBlur}]),style:se({marginBottom:k(n).lyricsFontSize-1.6+"vh",transformOrigin:"center"===k(n).lyricsPosition?"center":null,filter:k(n).lyricsBlur?`blur(${l(k(a).getPlaySongLyricIndex,t)}px)`:"none"}),key:e,id:"lrc"+t,onClick:t=>o(e.time)},[H("span",{class:"lyric",style:se({fontSize:k(n).lyricsFontSize+"vh"})},R(e.content),5),k(a).getPlaySongLyric.hasLrcTran&&k(n).showTransl&&e.tran?(h(),A("span",{key:0,style:se({fontSize:k(n).lyricsFontSize-1+"vh"}),class:"lyric-fy"},R(e.tran),5)):W("",!0),k(a).getPlaySongLyric.hasLrcRoma&&k(n).showRoma&&e.roma?(h(),A("span",{key:1,style:se({fontSize:k(n).lyricsFontSize-1.5+"vh"}),class:"lyric-roma"},R(e.roma),5)):W("",!0)],14,Da)))),128)),Ia],6)):W("",!0)}},[["__scopeId","data-v-1505ef53"]]),Ea=e=>(ie("data-v-84b09486"),e=e(),re(),e),$a={class:"set"},Ma=Ea((()=>H("div",{class:"name"},[V(" 播放页快捷设置 "),H("span",{class:"tip"},"关闭后需在设置页开启")],-1))),Aa=Ea((()=>H("div",{class:"name"},[V(" 显示逐字歌词 "),H("span",{class:"tip"},"是否在歌曲具有逐字歌词时显示，实验性功能")],-1))),Fa=Ea((()=>H("div",{class:"name"},[V(" 显示歌词翻译 "),H("span",{class:"tip"},"是否在具有翻译歌词时显示")],-1))),Ba=Ea((()=>H("div",{class:"name"},[V(" 显示歌词音译 "),H("span",{class:"tip"},"是否在具有音译歌词时显示")],-1))),Oa=Ea((()=>H("div",{class:"name"},[V(" 显示前奏等待 "),H("span",{class:"tip"},"部分歌曲前奏可能存在显示错误")],-1))),Ua=Ea((()=>H("div",{class:"name"},[V(" 智能暂停滚动 "),H("span",{class:"tip"},"鼠标移入歌词区域是否暂停滚动")],-1))),Ha=Ea((()=>H("div",{class:"name"},[V(" 歌词模糊 "),H("span",{class:"tip"},"未播放或已播放歌词模糊显示，实验性功能")],-1))),Va=x({__name:"LyricSetting",setup(e,{expose:t}){const a=d(),n=z(),s=E(),l=g(!1),{showTransl:o,lyricsBlur:i,lrcMousePause:r,showYrc:c,showRoma:p,countDownShow:m,showLyricSetting:f}=ce(a);return t({openLyricSetting:()=>{l.value=!0}}),(e,t)=>{const a=Ke,d=Z,g=ae,S=Ae,P=Fe,b=ue;return h(),y(b,{bordered:!1,"z-index":1e4,class:"s-modal lyric-set",show:k(l),"onUpdate:show":t[8]||(t[8]=e=>B(l)?l.value=e:null),preset:"card",title:"歌词设置"},{default:v((()=>[u(P,null,{default:v((()=>[H("div",$a,[u(d,{class:"set-item"},{default:v((()=>[Ma,u(a,{value:k(f),"onUpdate:value":t[0]||(t[0]=e=>B(f)?f.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Aa,u(a,{value:k(c),"onUpdate:value":t[1]||(t[1]=e=>B(c)?c.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Fa,u(a,{value:k(o),"onUpdate:value":t[2]||(t[2]=e=>B(o)?o.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Ba,u(a,{value:k(p),"onUpdate:value":t[3]||(t[3]=e=>B(p)?p.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Oa,u(a,{value:k(m),"onUpdate:value":t[4]||(t[4]=e=>B(m)?m.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Ua,u(a,{value:k(r),"onUpdate:value":t[5]||(t[5]=e=>B(r)?r.value=e:null),round:!1},null,8,["value"])])),_:1}),u(d,{class:"set-item"},{default:v((()=>[Ha,u(a,{value:k(i),"onUpdate:value":t[6]||(t[6]=e=>B(i)?i.value=e:null),round:!1},null,8,["value"])])),_:1}),u(S,{justify:"center"},{default:v((()=>[u(g,{class:"more",size:"large",strong:"",secondary:"",round:"",onClick:t[7]||(t[7]=()=>{l.value=!1,k(s).setBigPlayerState(!1),k(n).push("/music/setting/player")})},{default:v((()=>[V(" 更多设置 ")])),_:1})])),_:1})])])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-84b09486"]]),Ra=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],qa=(()=>{if("undefined"==typeof document)return!1;const e=Ra[0],t={};for(const a of Ra){if((null==a?void 0:a[1])in document){for(const[n,s]of a.entries())t[e[n]]=s;return t}}return!1})(),Na={change:qa.fullscreenchange,error:qa.fullscreenerror};let Wa={request:(e=document.documentElement,t)=>new Promise(((a,n)=>{const s=()=>{Wa.off("change",s),a()};Wa.on("change",s);const l=e[qa.requestFullscreen](t);l instanceof Promise&&l.then(s).catch(n)})),exit:()=>new Promise(((e,t)=>{if(!Wa.isFullscreen)return void e();const a=()=>{Wa.off("change",a),e()};Wa.on("change",a);const n=document[qa.exitFullscreen]();n instanceof Promise&&n.then(a).catch(t)})),toggle:(e,t)=>Wa.isFullscreen?Wa.exit():Wa.request(e,t),onchange(e){Wa.on("change",e)},onerror(e){Wa.on("error",e)},on(e,t){const a=Na[e];a&&document.addEventListener(a,t,!1)},off(e,t){const a=Na[e];a&&document.removeEventListener(a,t,!1)},raw:qa};Object.defineProperties(Wa,{isFullscreen:{get:()=>Boolean(document[qa.fullscreenElement])},element:{enumerable:!0,get:()=>document[qa.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[qa.fullscreenEnabled])}}),qa||(Wa={isEnabled:!1});const Ya=Wa,Xa={class:"icon-menu"},Za={class:"menu-left"},Ga={key:0,class:"icon"},Ka={class:"menu-right"},Qa={class:"icon"},Ja={class:"icon"},en={class:"tip"},tn={class:"left"},an={key:0,class:"lrcShow"},nn={class:"data"},sn={class:"name text-hidden"},ln={key:0},on={key:0,class:"artists text-hidden"},rn={key:0},cn=x({__name:"BigPlayer",setup(e){const t=z(),a=E(),n=$(),s=d(),l=g(!1),o=g(null),i=e=>{"undefined"!=typeof $player&&oe($player,e),a.setPlayState(!0),r.value=!1},r=g(!1),c=()=>{r.value=!1,w(a.getPlaySongLyricIndex)},f=g(null),S=de("Scan"),P=()=>{Ya.isEnabled&&(Ya.toggle(),S.value=Ya.isFullscreen?"Scan":"Contract",f.value=setTimeout((()=>{r.value=!1,w(a.getPlaySongLyricIndex)}),500))},b=()=>{a.setBigPlayerState(!1),t.push({path:"/music/comment",query:{id:a.getPlaySongData?a.getPlaySongData.id:null}})},w=e=>{const t=s.lyricsBlock,n=a.getPlaySongLyric.hasYrc&&s.showYrc?"yrc":"lrc",l=document.getElementById(n+e);if(l&&!r.value){const e=l.parentElement,a=e.clientHeight,n=l.offsetTop-e.offsetTop-("center"===t?a/2-l.offsetHeight/2:80);e.scrollTo({top:n,behavior:"smooth"})}},L=()=>{const e=document.querySelector('meta[name="theme-color"]');a.showBigPlayer?e.setAttribute("content",n.songPicColor):"light"===s.getSiteTheme?e.setAttribute("content","#ffffff"):"dark"===s.getSiteTheme&&e.setAttribute("content","#18181c")};return m((()=>{ne().then((()=>{w(a.getPlaySongLyricIndex)}))})),K((()=>{clearTimeout(f.value)})),p((()=>a.showBigPlayer),(e=>{L(),e&&(a.getPlaySongLyricIndex,ne().then((()=>{a.showPlayList=!1,w(a.getPlaySongLyricIndex)})))})),p((()=>a.getPlaySongLyricIndex),(e=>w(e))),p((()=>n.songPicColor),(()=>L())),(e,t)=>{const d=X,g=$e;return h(),y(j,{name:"up"},{default:v((()=>[k(a).showBigPlayer?(h(),A("div",{key:0,class:"bplayer",style:se([k(a).getPlaySongData&&"blur"===k(s).backgroundImageShow?"background-image: url("+k(a).getPlaySongData.album.picUrl.replace(/^http:/,"https:")+"?param=50y50)":"",`backgroundColor: ${k(n).songPicColor}`])},[H("div",{class:F("blur"===k(s).backgroundImageShow?"gray blur":"gray")},null,2),H("div",Xa,[H("div",Za,[k(s).showLyricSetting?(h(),A("div",Ga,[u(d,{class:"setting",size:"30",component:"Setting",onClick:t[0]||(t[0]=e=>k(o).openLyricSetting())})])):W("",!0)]),H("div",Ka,[H("div",Qa,[u(d,{class:"screenfull",component:k(S),onClick:P},null,8,["component"])]),H("div",Ja,[u(d,{class:"close",component:"ChevronDown",onClick:t[1]||(t[1]=e=>k(a).setBigPlayerState(!1))})])])]),H("div",{class:F(k(a).getPlaySongLyric.lrc[0]&&k(a).getPlaySongLyric.lrc.length>4?"all":"all noLrc")},[u(j,{name:"lrc"},{default:v((()=>[U(H("div",en,[u(g,null,{default:v((()=>[V(R(e.$t("other.lrcClicks")),1)])),_:1})],512),[[Y,k(r)]])])),_:1}),H("div",tn,["cover"===k(s).playerStyle?(h(),y(La,{key:0})):(h(),y(da,{key:1}))]),H("div",{class:"right",onMouseenter:t[4]||(t[4]=e=>l.value=!0),onMouseleave:t[5]||(t[5]=e=>l.value=!1)},[u(j,{name:"lrc"},{default:v((()=>[k(a).getPlaySongLyric.lrc[0]&&k(a).getPlaySongLyric.lrc.length>4?(h(),A("div",an,[U(H("div",nn,[H("div",sn,[H("span",null,R(k(a).getPlaySongData?k(a).getPlaySongData.name:e.$t("other.noSong")),1),k(a).getPlaySongData&&k(a).getPlaySongData.alia?(h(),A("span",ln,R(k(a).getPlaySongData.alia[0]),1)):W("",!0)]),k(a).getPlaySongData&&k(a).getPlaySongData.artist?(h(),A("div",on,[(h(!0),A(q,null,N(k(a).getPlaySongData.artist,((e,t)=>(h(),A("span",{class:"artist",key:e},[H("span",null,R(e.name),1),t!=k(a).getPlaySongData.artist.length-1?(h(),A("span",rn,"/")):W("",!0)])))),128))])):W("",!0)],512),[[Y,"record"===k(s).playerStyle]]),u(za,{onMouseenter:t[2]||(t[2]=e=>r.value=!!k(s).lrcMousePause),onMouseleave:c,onLrcTextClick:i}),U(H("div",{class:F(k(l)?"menu show":"menu")},[k(a).getPlaySongTransl?(h(),y(d,{key:0,class:F(k(s).showTransl?"open":""),component:"Language",onClick:t[3]||(t[3]=e=>k(s).setShowTransl(!k(s).showTransl))},null,8,["class"])):W("",!0),u(d,{class:"open",component:"Chatbox",onClick:b})],2),[[Y,"record"===k(s).playerStyle]])])):W("",!0)])),_:1})],32)],2),u(Va,{ref_key:"LyricSettingRef",ref:o},null,512)],4)):W("",!0)])),_:1})}}},[["__scopeId","data-v-62256b2e"]]),un={class:"slider"},dn={class:"slider-tooltip"},gn={class:"all"},pn={class:"data"},mn=["src"],hn={class:"name"},yn={key:0,class:"artisrOrLrc"},vn={class:"control"},fn={class:"play-state"},kn={key:0,class:"like"},Sn={class:"add-playlist"},Pn={class:"pattern"},bn={class:"volume"},wn=x({__name:"index",setup(e){const{t:t}=I(),a=z(),n=d(),s=E(),l=$(),{persistData:o}=ce(s),i=g(null),r=g(null),c=!!{}.VITE_UNM_API,f=g(null),S=e=>{L(e)},P=(e,a=n.songLevel)=>{try{const{id:l,fee:o,pc:i}=e;!c||!n.useUnmServer||i||1!==o&&4!==o?he(l).then((e=>{e.success?(i||1!==o&&4!==o||$message.info(t("general.message.vipTip")),ye(l,a).then((e=>{e.data&&e.data[0]&&e.data[0].url?f.value=ve(e.data[0].url.replace(/^http:/,"https:")):(console.error("Invalid music URL response:",e),$message.warning(t("general.message.playError")),s.setPlaySongIndex("next"))}))):c&&n.useUnmServer?b(l):($message.warning(t("general.message.playError")),s.setPlaySongIndex("next"))})):b(l),fe(l).then((e=>{s.setPlaySongLyric(e)}))}catch(l){s.getPlaylists[0]&&s.getPlayState&&($message.warning(t("general.message.playError")),s.setPlaySongIndex("next"))}},b=e=>{ke(e).then((e=>{200===e.code&&(e.data.url.replace(/^http:/,""),f.value=ve(e.data.url.replace(/^http:/,"")))})).catch((e=>{$message.warning(t("general.message.playError")),s.setPlaySongIndex("next")}))},w=()=>{L(s.getPlaySongTime.barMoveDistance),s.setPlayState(!0)},L=e=>{var t;if(f.value&&(null==(t=s.getPlaySongTime)?void 0:t.duration)){const t=s.getPlaySongTime.duration/100*e;oe(f.value,t)}},C=()=>{o.value.playVolume>0?(o.value.playVolumeMute=o.value.playVolume,o.value.playVolume=0):o.value.playVolume=o.value.playVolumeMute},_=Zt(500,(e=>{void 0===e&&(window.document.title=sessionStorage.getItem("siteTitle")??{}.VITE_SITE_TITLE),P(e),D(null==e?void 0:e.album.picUrl)})),D=e=>{if(!e)return!1;const t=e.replace(/^http:/,"https:")+"?param=50y50",a=new Image;fetch(t).then((e=>e.blob())).then((e=>{a.src=URL.createObjectURL(e),a.addEventListener("load",(async()=>{const e=new oa,t=await e.getColor(a);t.join(","),l.songPicColor=`rgb(${t.join(",")})`}))})).catch((e=>{console.error("图像处理出错："+e),l.songPicColor="rgb(128,128,128)"}))};return m((()=>{window.$getPlaySongData=P,s.getPlaylists[0]&&s.getPlaySongData&&(P(s.getPlaySongData),D(s.getPlaySongData.album.picUrl))})),p((()=>s.getPlaySongData),(e=>{s.setPlaySongTime({currentTime:0,duration:0}),_(e)})),p((()=>o.value.playVolume),(e=>{f.value&&ge(f.value,e)})),p((()=>s.getPlayState),(e=>{ne().then((()=>{f.value&&!s.isLoadingSong&&pe(f.value,e?"play":"pause",o.value.playVolume)}))})),(e,t)=>{const l=Ge,c=X,d=$e,g=Qe,p=Z;return h(),A(q,null,[u(j,{name:"show"},{default:v((()=>[U(u(p,{class:"player","content-style":"padding: 0"},{default:v((()=>[H("div",un,[H("span",null,R(k(s).getPlaySongTime.songTimePlayed),1),u(l,{value:k(s).getPlaySongTime.barMoveDistance,"onUpdate:value":[t[0]||(t[0]=e=>k(s).getPlaySongTime.barMoveDistance=e),S],min:0,max:100,step:.1,tooltip:!1,onDragStart:t[1]||(t[1]=e=>k(s).setPlayState(!1)),"onUpdate:valueEnd":w},{tooltip:v((({value:e})=>[H("div",dn,R(k(me)(k(s).getPlaySongTime.duration/100*e)),1)])),_:1},8,["value"]),H("span",null,R(k(s).getPlaySongTime.songTimeDuration),1)]),H("div",gn,[H("div",pn,[H("div",{class:"pic",onClick:t[2]||(t[2]=O((e=>k(s).setBigPlayerState(!0)),["stop"]))},[H("img",{src:k(s).getPlaySongData&&k(s).getPlaySongData.album&&k(s).getPlaySongData.album.picUrl?k(s).getPlaySongData.album.picUrl.replace(/^http:/,"https:")+"?param=50y50":"/img/music/pic/default.png",alt:"pic"},null,8,mn),u(c,{class:"open",size:"30",component:"ChevronUp"})]),H("div",hn,[H("div",{class:"song text-hidden",onClick:t[3]||(t[3]=O((e=>k(a).push(`/music/song?id=${k(s).getPlaySongData.id}`)),["stop"]))},R(k(s).getPlaySongData?k(s).getPlaySongData.name:e.$t("other.noSong")),1),k(s).getPlaySongData?(h(),A("div",yn,[u(j,{name:"fade",mode:"out-in"},{default:v((()=>[k(n).bottomLyricShow?(h(),y(j,{key:0,name:"fade",mode:"out-in"},{default:v((()=>[k(s).getPlayState&&k(s).getPlaySongLyric.lrc[0]?k(n).showYrc&&-1!=k(s).getPlaySongLyricIndex&&k(s).getPlaySongLyric.hasYrc?(h(),y(d,{key:1,class:"lrc text-hidden"},{default:v((()=>[(h(!0),A(q,null,N(k(s).getPlaySongLyric.yrc[k(s).getPlaySongLyricIndex].content,(e=>(h(),y(d,{key:e,depth:3},{default:v((()=>[V(R(e.content),1)])),_:2},1024)))),128))])),_:1})):-1!=k(s).getPlaySongLyricIndex&&k(s).getPlaySongLyric.lrc[0]?(h(),y(d,{key:2,class:"lrc text-hidden",depth:3,innerHTML:k(s).getPlaySongLyric.lrc[k(s).getPlaySongLyricIndex].content},null,8,["innerHTML"])):(h(),y(We,{key:3,class:"text-hidden",artistsData:k(s).getPlaySongData.artist},null,8,["artistsData"])):(h(),y(We,{key:0,class:"text-hidden",artistsData:k(s).getPlaySongData.artist},null,8,["artistsData"]))])),_:1})):(h(),y(We,{key:1,class:"text-hidden",artistsData:k(s).getPlaySongData.artist},null,8,["artistsData"]))])),_:1})])):W("",!0)])]),H("div",vn,[k(s).getPersonalFmMode?(h(),y(c,{key:1,class:"dislike",size:"20",component:"ThumbsDown",onClick:t[5]||(t[5]=e=>k(s).setFmDislike(k(s).getPersonalFmData.id))})):(h(),y(c,{key:0,class:"prev",size:"30",component:"PlaySkipBackCircle",onClick:t[4]||(t[4]=O((e=>k(s).setPlaySongIndex("prev")),["stop"]))})),H("div",fn,[u(c,{size:"46",component:k(s).getPlayState?"PauseCircle":"PlayCircle",onClick:t[6]||(t[6]=O((e=>k(s).setPlayState(!k(s).getPlayState)),["stop"]))},null,8,["component"])]),u(c,{class:"next",size:"30",component:"PlaySkipForwardCircle",onClick:t[7]||(t[7]=O((e=>k(s).setPlaySongIndex("next")),["stop"]))})]),H("div",{class:F(k(s).getPersonalFmMode?"menu fm":"menu")},[u(g,{trigger:"hover","keep-alive-on-hover":!1},{trigger:v((()=>[k(s).getPlaySongData?(h(),A("div",kn,[u(c,{class:"like-icon",size:"24",component:k(s).getSongIsLike(k(s).getPlaySongData.id)?"HeartSharp":"HeartOutline",onClick:t[8]||(t[8]=O((e=>k(s).getSongIsLike(k(s).getPlaySongData.id)?k(s).changeLikeList(k(s).getPlaySongData.id,!1):k(s).changeLikeList(k(s).getPlaySongData.id,!0)),["stop"]))},null,8,["component"])])):W("",!0)])),default:v((()=>[V(" "+R(k(s).getSongIsLike(k(s).getPlaySongData.id)?e.$t("menu.cancelCollection"):e.$t("menu.collection")),1)])),_:1}),u(g,{trigger:"hover","keep-alive-on-hover":!1},{trigger:v((()=>[H("div",Sn,[u(c,{class:"add-icon",size:"30",component:"AddCircle",onClick:t[9]||(t[9]=O((e=>k(i).openAddToPlaylist(k(s).getPlaySongData.id)),["stop"]))})])])),default:v((()=>[V(" "+R(e.$t("menu.add")),1)])),_:1}),H("div",Pn,[u(c,{component:"normal"===k(o).playSongMode?"Repeat":"random"===k(o).playSongMode?"Shuffle":"RecordingOutline",onClick:t[10]||(t[10]=e=>k(s).setPlaySongMode())},null,8,["component"])]),u(g,{trigger:"hover","keep-alive-on-hover":!1},{trigger:v((()=>[H("div",{class:F(k(s).showPlayList?"playlist open":"playlist")},[u(c,{size:"30",component:"ListCircle",onClick:t[11]||(t[11]=O((e=>k(s).showPlayList=!k(s).showPlayList),["stop"]))})],2)])),default:v((()=>[V(" "+R(e.$t("general.name.playlists")),1)])),_:1}),H("div",bn,[u(c,{size:"28",component:0==k(o).playVolume?"VolumeOff":k(o).playVolume<.4?"VolumeLow":k(o).playVolume<.7?"VolumeMedium":"VolumeHigh",onClick:O(C,["stop"])},null,8,["component"]),u(l,{class:"volmePg",value:k(o).playVolume,"onUpdate:value":t[12]||(t[12]=e=>k(o).playVolume=e),tooltip:!1,min:0,max:1,step:.01,onClick:t[13]||(t[13]=O((()=>{}),["stop"]))},null,8,["value"])])],2)])])),_:1},512),[[Y,k(s).getPlaylists[0]&&k(s).showPlayBar]])])),_:1}),u(aa,{ref_key:"PlayListDrawerRef",ref:r},null,512),u(Ne,{ref_key:"addPlayListRef",ref:i},null,512),u(cn)],64)}}},[["__scopeId","data-v-1e2d6767"]]),Ln=x({__name:"index",setup(e){const{t:t}=I(),a=E(),n=G(),s=d(),l=$(),o=z(),i=g(null),r=!(!{}.VITE_ANN_TITLE||!{}.VITE_ANN_CONTENT),c={}.VITE_ANN_TITLE,p={}.VITE_ANN_CONTENT,f=Number({}.VITE_ANN_DURATION),S=e=>{if("Space"===e.code){if(e.target.tagName,"video"===o.currentRoute.value.name)return!1;if("BODY"!==e.target.tagName)return!1;e.preventDefault(),a.setPlayState(!a.getPlayState)}},P=e=>{const t=e?e==={}.VITE_SITE_TITLE?e:e+" - "+{}.VITE_SITE_TITLE:sessionStorage.getItem("siteTitle")??{}.VITE_SITE_TITLE;l.siteTitle=t,sessionStorage.setItem("siteTitle",t),a.getPlayState||(window.document.title=t)},b=()=>{const e=(new Date).toLocaleDateString();if(localStorage.getItem("lastSignInDate")!==e){const a=[Se(0),Pe()];Promise.all(a).then((a=>{localStorage.setItem("lastSignInDate",e),t("general.message.signInSuccess"),a[0],a[1],$notification.success({content:t("general.message.signInSuccess"),meta:t("general.message.signInSuccessDesc"),duration:3e3})})).catch((e=>{console.error(t("general.message.signInFailed"),e),$message.error(t("general.message.signInFailed"))}))}},w=()=>{$message?$message.success(t("other.cleanAll")):alert(t("other.cleanAll")),localStorage.clear(),document.location.reload()},L=()=>{ne().then((()=>{var e;if(i.value)null==(e=i.value)||e.scrollIntoView({behavior:"smooth"});else{const e=document.getElementById("mainContent");null==e||e.scrollIntoView({behavior:"smooth"})}}))};return m((()=>{try{window.$scrollToTop=L,window.$cleanAll=w,window.$signIn=b,window.$setSiteTitle=P;const e=document.documentElement;e&&e.setAttribute("lang",s.language),r&&$notification.info({content:c,meta:p,duration:f}),Le().then((e=>{e.data.profile&&n.userLogin?(s.autoSignIn&&b(),(()=>{const e=Date.now(),t=new Date(localStorage.getItem("lastRefreshDate")).getTime();(e-t>=2592e5||!t)&&Ce().then((t=>{200===t.code?localStorage.setItem("lastRefreshDate",new Date(e).toLocaleDateString()):console.error("刷新登录失败")}))})(),n.userLogin=!0,n.setUserData(e.data.profile),n.setUserOtherData()):(n.userLogOut(),"cloud"===a.getPlayListMode&&($message.info(t("other.loginExpired")),a.setPlaylists([]),a.setPlayListMode("list")))})).catch((e=>(console.error(t("general.message.acquisitionFailed"),e),$message.error(t("general.message.acquisitionFailed")),o.push("/music/500"),!1))),a.setLikeList(),window.addEventListener("keydown",S)}catch(e){console.error("组件挂载错误:",e)}})),(e,t)=>{const n=Je,s=tt,o=Q("router-view"),r=et,c=at;return h(),y(gt,null,{default:v((()=>[u(c,{style:{height:"100vh"}},{default:v((()=>[u(n,{bordered:""},{default:v((()=>[u(Xt)])),_:1}),u(r,{position:"absolute",class:F(k(a).getPlaylists[0]&&k(a).showPlayBar?"show":""),"native-scrollbar":!1,embedded:""},{default:v((()=>[H("main",{ref_key:"mainContent",ref:i,class:F(["main",{playlist:k(a).showPlayList,search:k(l).searchInputActive}]),id:"mainContent"},[u(s,{bottom:k(a).getPlaylists[0]&&k(a).showPlayBar?100:40,style:{transition:"all 0.3s"}},null,8,["bottom"]),u(o,null,{default:v((({Component:e})=>[(h(),y(be,null,[u(j,{name:"scale",mode:"out-in"},{default:v((()=>[(h(),y(we(e)))])),_:2},1024)],1024))])),_:1}),u(wn)],2)])),_:1},8,["class"])])),_:1})])),_:1})}}},[["__scopeId","data-v-5c7730b0"]]);export{Ln as default};
