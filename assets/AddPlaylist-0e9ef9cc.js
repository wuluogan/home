import{_ as e,d8 as s,di as a,e as t,o as l,c as r,a as i,w as n,b as o,t as d,n as c,u,ac as m,F as p,x as g,d as f,k as y,ch as _,dI as v,cJ as L}from"./index-d93ecfd9.js";import{_ as P}from"./CreatePlaylist-db76e905.js";import{_ as k}from"./Tag-9bd41f20.js";import{_ as h}from"./Avatar-d697b90d.js";import{_ as x}from"./text-f881741e.js";import{_ as U}from"./Space-76cfe381.js";const $={key:0},j=["onClick"],w={class:"desc"},C=e({__name:"AddPlaylist",setup(e,{expose:C}){const{t:b}=s(),A=a(),S=t(null),z=t(!1),I=t(null),F=()=>{z.value=!1};return C({openAddToPlaylist:e=>{if(!A.userLogin)return $message.error(b("general.message.needLogin")),!1;A.getUserPlayLists.has||A.getUserPlayLists.isLoading||A.setUserPlayLists(),z.value=!0,I.value=e,z.value,I.value}}),(e,s)=>{const a=k,t=h,C=x,T=U,J=L;return l(),r(p,null,[i(J,{class:"add-playlist s-modal",show:u(z),"onUpdate:show":s[1]||(s[1]=e=>_(z)?z.value=e:null),preset:"card",bordered:!1,"on-after-leave":F},{header:n((()=>[o(d(e.$t("menu.add"))+" ",1),i(a,{round:"",class:"tag",type:"primary",style:c({marginLeft:"12px",fontSize:"13px",transform:"translateY(-2px)",cursor:"pointer"}),bordered:!1,onClick:s[0]||(s[0]=e=>u(S).openCreatePlaylist())},{default:n((()=>[o(d(e.$t("menu.create")),1)])),_:1},8,["style"])])),default:n((()=>[i(m,{mode:"out-in"},{default:n((()=>[u(A).getUserPlayLists.own[0]?(l(),r("div",$,[i(T,{vertical:"",class:"list"},{default:n((()=>[(l(!0),r(p,null,g(u(A).getUserPlayLists.own.slice(1),(s=>(l(),r("div",{class:"item",key:s,onClick:e=>{return a=s.id,t=u(I),void v(a,t).then((e=>{200===e.status?($message.success(b("general.message.addSuccess")),F(),A.setUserPlayLists()):$message.error(b("general.message.addFailure"))}));var a,t}},[i(t,{class:"pic",src:s.cover?s.cover.replace(/^http:/,"https:")+"?param=60y60":"/img/music/pic/default.png","fallback-src":"/img/music/pic/default.png"},null,8,["src"]),f("div",w,[i(C,{class:"name"},{default:n((()=>[o(d(s.name),1)])),_:2},1024),i(C,{class:"num"},{default:n((()=>[o(d(e.$t("general.name.songSize",{size:s.trackCount})),1)])),_:2},1024)])],8,j)))),128))])),_:1})])):(l(),y(C,{key:1},{default:n((()=>[o(d(e.$t("general.message.isLoading")),1)])),_:1}))])),_:1})])),_:1},8,["show"]),i(P,{ref_key:"createPlaylistRef",ref:S},null,512)],64)}}},[["__scopeId","data-v-4fe61cf0"]]);export{C as A};
