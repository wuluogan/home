import{_ as e,cN as a,cB as t,cO as s,e as l,Y as r,f as o,o as i,c as u,d as n,a as p,w as m,u as c,c8 as d,k as v,q as g,dr as y,dc as j,ds as h,g as f,cv as _,b as q,t as C,n as k,F as b,x as T,c4 as L}from"./index-c72c5b0c.js";import{C as x}from"./CoverLists-b729b53c.js";import{P as $}from"./index-69256b9d.js";import{_ as F}from"./Space-5d75b1a8.js";import{_ as S}from"./Tag-827106b2.js";import{_ as w}from"./text-64fc9966.js";import{a as P,_ as I}from"./ListItem-0c465486.js";import{_ as R}from"./Scrollbar-4274af02.js";import{_ as N}from"./Switch-6b042a41.js";import"./album-8a3f3da2.js";import"./AllArtists-b2fee903.js";import"./Input-b4caa030.js";import"./Suffix-af55cfcd.js";import"./index-92eb66c0.js";import"./use-merged-state-74230ec8.js";import"./light-6c88686a.js";import"./FormItem-e0127deb.js";import"./light-8d6c1748.js";import"./Popover-87b27d79.js";import"./light-cb0cf260.js";import"./Follower-ef4b8179.js";import"./next-frame-once-924ab492.js";import"./cssr-ed8d5782.js";import"./use-compitable-a1866e01.js";import"./Select-714380b7.js";import"./create-07671515.js";import"./light-20fa43af.js";import"./light-170bfcda.js";import"./Empty-3e1da814.js";import"./getCoverUrl-bb08aa65.js";import"./PlayOne-22adba7e.js";import"./LinkTwo-8d6bc0a2.js";import"./light-bf1b7eb7.js";import"./Unlike-d603c2d2.js";import"./Image-6ba3d672.js";import"./utils-48198701.js";import"./light-a43afc3c.js";import"./Tooltip-f5342231.js";import"./Grid-1728937a.js";import"./get-slot-a0e67e91.js";import"./DeleteFour-7678c621.js";import"./Skeleton-163a49d9.js";import"./use-houdini-1a86f12f.js";import"./Dropdown-db0b14d8.js";import"./light-37eaa122.js";import"./create-ref-setter-ee697025.js";import"./Pagination-10257b2a.js";import"./light-e632ba41.js";import"./_common-89f2509f.js";import"./_common-991711fd.js";import"./light-a7677734.js";import"./light-56c22105.js";import"./_common-6222e43f.js";const U={class:"playlists"},D={class:"menu"},E={key:0,class:"all-cat"},z={key:1,class:"error"},A=e({__name:"playlists",setup(e){const{t:A}=a(),O=t(),B=s(),Y=l(!1),G=l(O.currentRoute.value.query.cat?O.currentRoute.value.query.cat:"全部歌单"),H=l([]),V=l(0),J=l(30),K=l(O.currentRoute.value.query.page?Number(O.currentRoute.value.query.page):1),M=l(!!O.currentRoute.value.query.hq&&"true"==O.currentRoute.value.query.hq),Q=l(!0),W=l(!1),X=e=>{H.value=[],O.push({path:"/music/discover/playlists",query:{cat:G.value,hq:!!e,page:1}})},Z=(e="全部歌单",a=30,t=0)=>{y(e,a,t).then((e=>{V.value=e.total,H.value=[],e.playlists[0]?e.playlists.forEach((e=>{H.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:j(e.playCount)})})):$message.error(A("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))},ee=(e="全部歌单",a=30)=>{const t=H.value[0]?H.value[H.value.length-1].updateTime:null;h(e,a,t).then((e=>{e.playlists[0]?(e.more?Q.value=!0:Q.value=!1,W.value=!1,e.playlists.forEach((e=>{H.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:j(e.playCount),updateTime:e.updateTime})}))):(Q.value=!1,$message.error(A("general.message.acquisitionFailed")))}))},ae=e=>{H.value=[],O.push({path:"/music/discover/playlists",query:{cat:e,page:1}}),Y.value=!1},te=e=>{J.value=e,Z(G.value,e,(K.value-1)*J.value)},se=e=>{O.push({path:"/music/discover/playlists",query:{cat:G.value,page:e}})};return r((()=>O.currentRoute.value),(e=>{G.value=e.query.cat?e.query.cat:"全部歌单",M.value=!!e.query.hq&&"true"==e.query.hq,"dsc-playlists"==e.name&&(M.value?(H.value=[],ee(G.value)):(K.value=e.query.page?Number(e.query.page):1,Z(G.value,J.value,(K.value-1)*J.value)))})),o((()=>{$setSiteTitle(A("nav.discover")+" - "+A("general.name.playlist")),B.catList.sub&&B.highqualityCatList[0]||B.setCatList(!0),M.value?ee(G.value):Z(G.value,J.value,(K.value-1)*J.value)})),(e,a)=>{const t=L,s=f,l=S,r=w,o=F,y=P,j=I,h=R,A=_,O=N;return i(),u("div",U,[n("div",D,[p(s,{strong:"",secondary:"",class:"cat","icon-placement":"right",round:"",onClick:a[0]||(a[0]=e=>Y.value=!0)},{icon:m((()=>[p(t,{class:"up",component:"ChevronForward"})])),default:m((()=>[q(" "+C(c(G)),1)])),_:1}),p(A,{class:"s-modal",show:c(Y),"onUpdate:show":a[2]||(a[2]=e=>d(Y)?Y.value=e:null),preset:"card",title:e.$t("general.name.playlistType"),bordered:!1},{header:m((()=>[q(C(e.$t("general.name.playlistType"))+" ",1),p(l,{round:"",class:"tag",type:"全部歌单"==c(G)?"primary":"default",style:k({marginLeft:"12px",fontSize:"12px",transform:"translateY(-2px)",cursor:"pointer"}),bordered:!1,onClick:a[1]||(a[1]=e=>ae("全部歌单"))},{default:m((()=>[q(C(e.$t("general.name.allPLaylist")),1)])),_:1},8,["type","style"])])),default:m((()=>[p(h,null,{default:m((()=>{var a;return[(null==(a=c(B).catList)?void 0:a.sub[0])?(i(),u("div",E,[p(j,null,{default:m((()=>[(i(!0),u(b,null,T(c(B).catList.categories,((e,a)=>(i(),v(y,{key:e},{prefix:m((()=>[p(r,{class:"type"},{default:m((()=>[q(C(e),1)])),_:2},1024)])),default:m((()=>[p(o,null,{default:m((()=>[(i(!0),u(b,null,T(c(B).catList.sub.filter((e=>e.category==a)),(e=>(i(),v(l,{round:"",class:"tag",size:"large",key:e,bordered:!1,type:e.name==c(G)?"primary":"default",onClick:a=>ae(e.name)},{icon:m((()=>[e.hot?(i(),v(t,{key:0,class:"icon",component:"Flame"})):g("",!0)])),default:m((()=>[q(C(e.name)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(i(),u("div",z,C(e.$t("general.message.acquisitionFailed")),1))]})),_:1})])),_:1},8,["show","title"]),(J=c(B).highqualityCatList,Z=c(G),"全部歌单"==Z||J.some((e=>e.name==Z))?(i(),v(o,{key:0,align:"center"},{default:m((()=>[p(r,null,{default:m((()=>[q(C(e.$t("general.name.bestPlaylist")),1)])),_:1}),p(O,{value:c(M),"onUpdate:value":[a[3]||(a[3]=e=>d(M)?M.value=e:null),X],round:!1},null,8,["value"])])),_:1})):g("",!0))]),p(x,{listData:c(H)},null,8,["listData"]),c(H)[0]&&!c(M)?(i(),v($,{key:0,totalCount:c(V),pageNumber:c(K),onPageSizeChange:te,onPageNumberChange:se},null,8,["totalCount","pageNumber"])):g("",!0),p(o,{justify:"center"},{default:m((()=>[c(M)&&c(Q)?(i(),v(s,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:c(W),onClick:a[4]||(a[4]=()=>{W.value=!0,ee(c(G))})},{default:m((()=>[q(C(e.$t("general.name.loadMore")),1)])),_:1},8,["loading"])):g("",!0)])),_:1})]);var J,Z}}},[["__scopeId","data-v-7550f653"]]);export{A as default};
