import{as as e,at as n,au as r,av as t,aw as o,ax as a,ay as l,az as i,aA as s,aB as u,aC as c,aD as d,aE as p,y as h,e as v,z as g,J as b,I as f,s as m,B as x,D as k,Q as w,aF as y,aG as C,aH as $,aI as S,T as U,P as A,$ as z,a1 as D,a4 as P,a0 as R,ak as V,C as _,A as F,a8 as B,Z as I,Y as M,aa as q,ab as O,aJ as T,aK as j,ac as H,m as X,aL as E,X as L,g as K,am as N}from"./index-d93ecfd9.js";import{_ as G}from"./Input-19ebdc3b.js";import{_ as J}from"./InputGroup-f41ddb03.js";import{u as Y}from"./Suffix-1fd55ec3.js";import{c as Z}from"./light-12c62e2d.js";import{u as Q}from"./use-merged-state-bb55b613.js";import{u as W,V as ee,a as ne,b as re}from"./Follower-829f72e1.js";function te(e){return null===e?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}const oe={rgb:{hex:r=>e(n(r)),hsl(e){const[o,a,l,i]=n(e);return r([...t(o,a,l),i])},hsv(e){const[r,t,l,i]=n(e);return o([...a(r,t,l),i])}},hex:{rgb:e=>l(n(e)),hsl(e){const[o,a,l,i]=n(e);return r([...t(o,a,l),i])},hsv(e){const[r,t,l,i]=n(e);return o([...a(r,t,l),i])}},hsl:{hex(n){const[r,t,o,a]=i(n);return e([...s(r,t,o),a])},rgb(e){const[n,r,t,o]=i(e);return l([...s(n,r,t),o])},hsv(e){const[n,r,t,a]=i(e);return o([...u(n,r,t),a])}},hsv:{hex(n){const[r,t,o,a]=c(n);return e([...d(r,t,o),a])},rgb(e){const[n,r,t,o]=c(e);return l([...d(n,r,t),o])},hsl(e){const[n,t,o,a]=c(e);return r([...p(n,t,o),a])}}};function ae(e,n,r){if(!(r=r||te(e)))return null;if(r===n)return e;return oe[r][n](e)}const le="12px",ie="6px",se=h({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const n=v(null);function r(r){const{value:t}=n;if(!t)return;const{width:o,left:a}=t.getBoundingClientRect(),l=(i=(r.clientX-a-6)/(o-12)*360,(i=Math.round(i))>=360?359:i<0?0:i);var i;e.onUpdateHue(l)}function t(){var n;f("mousemove",document,r),f("mouseup",document,t),null===(n=e.onComplete)||void 0===n||n.call(e)}return{railRef:n,handleMouseDown:function(e){n.value&&(b("mousemove",document,r),b("mouseup",document,t),r(e))}}},render(){const{clsPrefix:e}=this;return g("div",{class:`${e}-color-picker-slider`,style:{height:le,borderRadius:ie}},g("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:"linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",height:le,borderRadius:ie,position:"relative"},onMousedown:this.handleMouseDown},g("div",{style:{position:"absolute",left:ie,right:ie,top:0,bottom:0}},g("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${ie})`,borderRadius:ie,width:le,height:le}},g("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:ie,width:le,height:le}})))))}}),ue="12px",ce="6px",de=h({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const n=v(null);function r(r){const{value:t}=n;if(!t)return;const{width:o,left:a}=t.getBoundingClientRect(),l=(r.clientX-a)/(o-12);var i;e.onUpdateAlpha((i=l,(i=Math.round(100*i)/100)>1?1:i<0?0:i))}function t(){var n;f("mousemove",document,r),f("mouseup",document,t),null===(n=e.onComplete)||void 0===n||n.call(e)}return{railRef:n,railBackgroundImage:m((()=>{const{rgba:n}=e;return n?`linear-gradient(to right, rgba(${n[0]}, ${n[1]}, ${n[2]}, 0) 0%, rgba(${n[0]}, ${n[1]}, ${n[2]}, 1) 100%)`:""})),handleMouseDown:function(o){n.value&&e.rgba&&(b("mousemove",document,r),b("mouseup",document,t),r(o))}}},render(){const{clsPrefix:e}=this;return g("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:ue,borderRadius:ce},onMousedown:this.handleMouseDown},g("div",{style:{borderRadius:ce,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},g("div",{class:`${e}-color-picker-checkboard`}),g("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&g("div",{style:{position:"absolute",left:ce,right:ce,top:0,bottom:0}},g("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${100*this.alpha}% - ${ce})`,borderRadius:ce,width:ue,height:ue}},g("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:l(this.rgba),borderRadius:ce,width:ue,height:ue}}))))}}),pe="12px",he="6px",ve=h({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const n=v(null);function r(r){const{value:t}=n;if(!t)return;const{width:o,height:a,left:l,bottom:i}=t.getBoundingClientRect(),s=(i-r.clientY)/a,u=(r.clientX-l)/o,c=100*(u>1?1:u<0?0:u),d=100*(s>1?1:s<0?0:s);e.onUpdateSV(c,d)}function t(){var n;f("mousemove",document,r),f("mouseup",document,t),null===(n=e.onComplete)||void 0===n||n.call(e)}return{palleteRef:n,handleColor:m((()=>{const{rgba:n}=e;return n?`rgb(${n[0]}, ${n[1]}, ${n[2]})`:""})),handleMouseDown:function(e){n.value&&(b("mousemove",document,r),b("mouseup",document,t),r(e))}}},render(){const{clsPrefix:e}=this;return g("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},g("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),g("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&g("div",{class:`${e}-color-picker-handle`,style:{width:pe,height:pe,borderRadius:he,left:`calc(${this.displayedSv[0]}% - ${he})`,bottom:`calc(${this.displayedSv[1]}% - ${he})`}},g("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:he,width:pe,height:pe}})))}}),ge=x("n-color-picker");const be={paddingSmall:"0 4px"},fe=h({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const n=v(""),{themeRef:r}=k(ge,null);function t(){const{value:n}=e;if(null===n)return"";const{label:r}=e;return"HEX"===r?n:"A"===r?`${Math.floor(100*n)}%`:String(Math.floor(n))}return w((()=>{n.value=t()})),{mergedTheme:r,inputValue:n,handleInputChange:function(r){let o,a;switch(e.label){case"HEX":a=function(e){const n=e.trim();return!!/^#[0-9a-fA-F]+$/.test(n)&&[4,5,7,9].includes(n.length)}(r),a&&e.onUpdateValue(r),n.value=t();break;case"H":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),360))}(r),!1===o?n.value=t():e.onUpdateValue(o);break;case"S":case"L":case"V":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),100))}(r),!1===o?n.value=t():e.onUpdateValue(o);break;case"A":o=function(e){return!!/^\d{1,3}\.?\d*%$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e)/100,100))}(r),!1===o?n.value=t():e.onUpdateValue(o);break;case"R":case"G":case"B":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),255))}(r),!1===o?n.value=t():e.onUpdateValue(o)}},handleInputUpdateValue:function(e){n.value=e}}},render(){const{mergedTheme:e}=this;return g(G,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:be,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:"A"===this.label?"flex-grow: 1.25;":""})}}),me=h({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup:n=>({handleUnitUpdateValue(t,a){const{showAlpha:i}=n;if("hex"===n.mode)return void n.onUpdateValue((i?e:y)(a));let s;switch(s=null===n.valueArr?[0,0,0,0]:Array.from(n.valueArr),n.mode){case"hsv":s[t]=a,n.onUpdateValue((i?o:S)(s));break;case"rgb":s[t]=a,n.onUpdateValue((i?l:$)(s));break;case"hsl":s[t]=a,n.onUpdateValue((i?r:C)(s))}}}),render(){const{clsPrefix:n,modes:r}=this;return g("div",{class:`${n}-color-picker-input`},g("div",{class:`${n}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:1===r.length?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),g(J,null,{default:()=>{const{mode:n,valueArr:r,showAlpha:t}=this;if("hex"===n){let n=null;try{n=null===r?null:(t?e:y)(r)}catch(o){}return g(fe,{label:"HEX",showAlpha:t,value:n,onUpdateValue:e=>{this.handleUnitUpdateValue(0,e)}})}return(n+(t?"a":"")).split("").map(((e,n)=>g(fe,{label:e.toUpperCase(),value:null===r?null:r[n],onUpdateValue:e=>{this.handleUnitUpdateValue(n,e)}})))}}))}}),xe=h({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:n,renderLabelRef:t}=k(ge,null);return()=>{const{hsla:o,value:a,clsPrefix:l,onClick:i,disabled:s}=e,u=n.label||t.value;return g("div",{class:[`${l}-color-picker-trigger`,s&&`${l}-color-picker-trigger--disabled`],onClick:s?void 0:i},g("div",{class:`${l}-color-picker-trigger__fill`},g("div",{class:`${l}-color-picker-checkboard`}),g("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:o?r(o):""}}),a&&o?g("div",{class:`${l}-color-picker-trigger__value`,style:{color:o[2]>50||o[3]<.5?"black":"white"}},u?u(a):a):null))}}});function ke(e,n){if("hsv"===n){const[n,r,t,o]=c(e);return l([...d(n,r,t),o])}return e}const we=h({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){function n(n){const{mode:r}=e;let{value:t,mode:o}=n;return o||(o="hex",/^[a-zA-Z]+$/.test(t)?t=function(e){const n=document.createElement("canvas").getContext("2d");return n.fillStyle=e,n.fillStyle}(t):(U("color-picker",`color ${t} in swatches is invalid.`),t="#000000")),o===r?t:ae(t,r,o)}function r(r){e.onUpdateColor(n(r))}return{parsedSwatchesRef:m((()=>e.swatches.map((e=>{const n=te(e);return{value:e,mode:n,legalValue:ke(e,n)}})))),handleSwatchSelect:r,handleSwatchKeyDown:function(e,n){"Enter"===e.key&&r(n)}}},render(){const{clsPrefix:e}=this;return g("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map((n=>g("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(n)},onKeydown:e=>{this.handleSwatchKeyDown(e,n)}},g("div",{class:`${e}-color-picker-swatch__fill`,style:{background:n.legalValue}})))))}}),ye=h({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const n=te(e);return Boolean(!e||n&&"hsv"!==n)}},onUpdateColor:{type:Function,required:!0}},setup:e=>({handleChange:function(n){var r;const t=n.target.value;null===(r=e.onUpdateColor)||void 0===r||r.call(e,ae(t.toUpperCase(),e.mode,"hex")),n.stopPropagation()}}),render(){const{clsPrefix:e}=this;return g("div",{class:`${e}-color-picker-preview__preview`},g("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),g("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),Ce=A([z("color-picker","\n display: inline-block;\n box-sizing: border-box;\n height: var(--n-height);\n font-size: var(--n-font-size);\n width: 100%;\n position: relative;\n "),z("color-picker-panel","\n margin: 4px 0;\n width: 240px;\n font-size: var(--n-panel-font-size);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n ",[D(),z("input","\n text-align: center;\n ")]),z("color-picker-checkboard","\n background: white; \n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[A("&::after",'\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 12px 12px;\n background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n background-repeat: repeat;\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),z("color-picker-slider","\n margin-bottom: 8px;\n position: relative;\n box-sizing: border-box;\n ",[P("image","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n "),A("&::after",'\n content: "";\n position: absolute;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n pointer-events: none;\n ')]),z("color-picker-handle","\n z-index: 1;\n box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);\n position: absolute;\n background-color: white;\n overflow: hidden;\n ",[P("fill","\n box-sizing: border-box;\n border: 2px solid white;\n ")]),z("color-picker-pallete","\n height: 180px;\n position: relative;\n margin-bottom: 8px;\n cursor: crosshair;\n ",[P("layer","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[R("shadowed","\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n ")])]),z("color-picker-preview","\n display: flex;\n ",[P("sliders","\n flex: 1 0 auto;\n "),P("preview","\n position: relative;\n height: 30px;\n width: 30px;\n margin: 0 0 8px 6px;\n border-radius: 50%;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n overflow: hidden;\n "),P("fill","\n display: block;\n width: 30px;\n height: 30px;\n "),P("input","\n position: absolute;\n top: 0;\n left: 0;\n width: 30px;\n height: 30px;\n opacity: 0;\n z-index: 1;\n ")]),z("color-picker-input","\n display: flex;\n align-items: center;\n ",[z("input","\n flex-grow: 1;\n flex-basis: 0;\n "),P("mode","\n width: 72px;\n text-align: center;\n ")]),z("color-picker-control","\n padding: 12px;\n "),z("color-picker-action","\n display: flex;\n margin-top: -4px;\n border-top: 1px solid var(--n-divider-color);\n padding: 8px 12px;\n justify-content: flex-end;\n ",[z("button","margin-left: 8px;")]),z("color-picker-trigger","\n border: var(--n-border);\n height: 100%;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n transition: border-color .3s var(--n-bezier);\n cursor: pointer;\n ",[P("value","\n white-space: nowrap;\n position: relative;\n "),P("fill","\n border-radius: var(--n-border-radius);\n position: absolute;\n display: flex;\n align-items: center;\n justify-content: center;\n left: 4px;\n right: 4px;\n top: 4px;\n bottom: 4px;\n "),R("disabled","cursor: not-allowed"),z("color-picker-checkboard","\n border-radius: var(--n-border-radius);\n ",[A("&::after","\n --n-block-size: calc((var(--n-height) - 8px) / 3);\n background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);\n background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; \n ")])]),z("color-picker-swatches","\n display: grid;\n grid-gap: 8px;\n flex-wrap: wrap;\n position: relative;\n grid-template-columns: repeat(auto-fill, 18px);\n margin-top: 10px;\n ",[z("color-picker-swatch","\n width: 18px;\n height: 18px;\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 8px 8px;\n background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;\n background-repeat: repeat;\n ",[P("fill","\n position: relative;\n width: 100%;\n height: 100%;\n border-radius: 3px;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n cursor: pointer;\n "),A("&:focus","\n outline: none;\n ",[P("fill",[A("&::after",'\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n background: inherit;\n filter: blur(2px);\n content: "";\n ')])])])])]),$e=h({name:"ColorPicker",props:Object.assign(Object.assign({},F.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:W.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),setup(h,{slots:b}){const f=v(null);let x=null;const k=V(h),{mergedSizeRef:U,mergedDisabledRef:A}=k,{localeRef:z}=Y("global"),{mergedClsPrefixRef:D,namespaceRef:P,inlineThemeDisabled:R}=_(h),H=F("ColorPicker","-color-picker",Ce,Z,h,D);B(ge,{themeRef:H,renderLabelRef:I(h,"renderLabel"),colorPickerSlots:b});const X=v(h.defaultShow),E=Q(I(h,"show"),X);function G(e){const{onUpdateShow:n,"onUpdate:show":r}=h;n&&L(n,e),r&&L(r,e),X.value=e}const{defaultValue:J}=h,ee=v(void 0===J?function(e,n){switch(e[0]){case"hex":return n?"#000000FF":"#000000";case"rgb":return n?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return n?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return n?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}(h.modes,h.showAlpha):J),ne=Q(I(h,"value"),ee),re=v([ne.value]),oe=v(0),ae=m((()=>te(ne.value))),{modes:le}=h,ie=v(te(ne.value)||le[0]||"rgb");function ue(){const{modes:e}=h,{value:n}=ie,r=e.findIndex((e=>e===n));ie.value=~r?e[(r+1)%e.length]:"rgb"}let ce,pe,he,be,fe,xe,ke,$e;const Se=m((()=>{const{value:e}=ne;if(!e)return null;switch(ae.value){case"hsv":return c(e);case"hsl":return[ce,pe,he,$e]=i(e),[...u(ce,pe,he),$e];case"rgb":case"hex":return[fe,xe,ke,$e]=n(e),[...a(fe,xe,ke),$e]}})),Ue=m((()=>{const{value:e}=ne;if(!e)return null;switch(ae.value){case"rgb":case"hex":return n(e);case"hsv":return[ce,pe,be,$e]=c(e),[...d(ce,pe,be),$e];case"hsl":return[ce,pe,he,$e]=i(e),[...s(ce,pe,he),$e]}})),Ae=m((()=>{const{value:e}=ne;if(!e)return null;switch(ae.value){case"hsl":return i(e);case"hsv":return[ce,pe,be,$e]=c(e),[...p(ce,pe,be),$e];case"rgb":case"hex":return[fe,xe,ke,$e]=n(e),[...t(fe,xe,ke),$e]}})),ze=m((()=>{switch(ie.value){case"rgb":case"hex":return Ue.value;case"hsv":return Se.value;case"hsl":return Ae.value}})),De=v(0),Pe=v(1),Re=v([0,0]);function Ve(n,t){const{value:a}=Se,i=De.value,s=a?a[3]:1;Re.value=[n,t];const{showAlpha:u}=h;switch(ie.value){case"hsv":Be((u?o:S)([i,n,t,s]),"cursor");break;case"hsl":Be((u?r:C)([...p(i,n,t),s]),"cursor");break;case"rgb":Be((u?l:$)([...d(i,n,t),s]),"cursor");break;case"hex":Be((u?e:y)([...d(i,n,t),s]),"cursor")}}function _e(n){De.value=n;const{value:t}=Se;if(!t)return;const[,a,i,s]=t,{showAlpha:u}=h;switch(ie.value){case"hsv":Be((u?o:S)([n,a,i,s]),"cursor");break;case"rgb":Be((u?l:$)([...d(n,a,i),s]),"cursor");break;case"hex":Be((u?e:y)([...d(n,a,i),s]),"cursor");break;case"hsl":Be((u?r:C)([...p(n,a,i),s]),"cursor")}}function Fe(n){switch(ie.value){case"hsv":[ce,pe,be]=Se.value,Be(o([ce,pe,be,n]),"cursor");break;case"rgb":[fe,xe,ke]=Ue.value,Be(l([fe,xe,ke,n]),"cursor");break;case"hex":[fe,xe,ke]=Ue.value,Be(e([fe,xe,ke,n]),"cursor");break;case"hsl":[ce,pe,he]=Ae.value,Be(r([ce,pe,he,n]),"cursor")}Pe.value=n}function Be(e,n){x="cursor"===n?e:null;const{nTriggerFormChange:r,nTriggerFormInput:t}=k,{onUpdateValue:o,"onUpdate:value":a}=h;o&&L(o,e),a&&L(a,e),r(),t(),ee.value=e}function Ie(e){Be(e,"input"),N(Me)}function Me(e=!0){const{value:n}=ne;if(n){const{nTriggerFormChange:r,nTriggerFormInput:t}=k,{onComplete:o}=h;o&&o(n);const{value:a}=re,{value:l}=oe;e&&(a.splice(l+1,a.length,n),oe.value=l+1),r(),t()}}function qe(){const{value:e}=oe;e-1<0||(Be(re.value[e-1],"input"),Me(!1),oe.value=e-1)}function Oe(){const{value:e}=oe;e<0||e+1>=re.value.length||(Be(re.value[e+1],"input"),Me(!1),oe.value=e+1)}function Te(){Be(null,"input"),G(!1)}function je(){const{value:e}=ne,{onConfirm:n}=h;n&&n(e),G(!1)}const He=m((()=>oe.value>=1)),Xe=m((()=>{const{value:e}=re;return e.length>1&&oe.value<e.length-1}));M(E,(e=>{e||(re.value=[ne.value],oe.value=0)})),w((()=>{if(x&&x===ne.value);else{const{value:e}=Se;e&&(De.value=e[0],Pe.value=e[3],Re.value=[e[1],e[2]])}x=null}));const Ee=m((()=>{const{value:e}=U,{common:{cubicBezierEaseInOut:n},self:{textColor:r,color:t,panelFontSize:o,boxShadow:a,border:l,borderRadius:i,dividerColor:s,[q("height",e)]:u,[q("fontSize",e)]:c}}=H.value;return{"--n-bezier":n,"--n-text-color":r,"--n-color":t,"--n-panel-font-size":o,"--n-font-size":c,"--n-box-shadow":a,"--n-border":l,"--n-border-radius":i,"--n-height":u,"--n-divider-color":s}})),Le=R?O("color-picker",m((()=>U.value[0])),Ee,h):void 0;return{mergedClsPrefix:D,namespace:P,selfRef:f,hsla:Ae,rgba:Ue,mergedShow:E,mergedDisabled:A,isMounted:T(),adjustedTo:W(h),mergedValue:ne,handleTriggerClick(){G(!0)},handleClickOutside(e){var n;(null===(n=f.value)||void 0===n?void 0:n.contains(j(e)))||G(!1)},renderPanel:function(){var e;const{value:n}=Ue,{value:r}=De,{internalActions:t,modes:o,actions:a}=h,{value:l}=H,{value:i}=D;return g("div",{class:[`${i}-color-picker-panel`,null==Le?void 0:Le.themeClass.value],onDragstart:e=>{e.preventDefault()},style:R?void 0:Ee.value},g("div",{class:`${i}-color-picker-control`},g(ve,{clsPrefix:i,rgba:n,displayedHue:r,displayedSv:Re.value,onUpdateSV:Ve,onComplete:Me}),g("div",{class:`${i}-color-picker-preview`},g("div",{class:`${i}-color-picker-preview__sliders`},g(se,{clsPrefix:i,hue:r,onUpdateHue:_e,onComplete:Me}),h.showAlpha?g(de,{clsPrefix:i,rgba:n,alpha:Pe.value,onUpdateAlpha:Fe,onComplete:Me}):null),h.showPreview?g(ye,{clsPrefix:i,mode:ie.value,color:Ue.value&&y(Ue.value),onUpdateColor:e=>{Be(e,"input")}}):null),g(me,{clsPrefix:i,showAlpha:h.showAlpha,mode:ie.value,modes:o,onUpdateMode:ue,value:ne.value,valueArr:ze.value,onUpdateValue:Ie}),(null===(e=h.swatches)||void 0===e?void 0:e.length)&&g(we,{clsPrefix:i,mode:ie.value,swatches:h.swatches,onUpdateColor:e=>{Be(e,"input")}})),(null==a?void 0:a.length)?g("div",{class:`${i}-color-picker-action`},a.includes("confirm")&&g(K,{size:"small",onClick:je,theme:l.peers.Button,themeOverrides:l.peerOverrides.Button},{default:()=>z.value.confirm}),a.includes("clear")&&g(K,{size:"small",onClick:Te,disabled:!ne.value,theme:l.peers.Button,themeOverrides:l.peerOverrides.Button},{default:()=>z.value.clear})):null,b.action?g("div",{class:`${i}-color-picker-action`},{default:b.action}):t?g("div",{class:`${i}-color-picker-action`},t.includes("undo")&&g(K,{size:"small",onClick:qe,disabled:!He.value,theme:l.peers.Button,themeOverrides:l.peerOverrides.Button},{default:()=>z.value.undo}),t.includes("redo")&&g(K,{size:"small",onClick:Oe,disabled:!Xe.value,theme:l.peers.Button,themeOverrides:l.peerOverrides.Button},{default:()=>z.value.redo})):null)},cssVars:R?void 0:Ee,themeClass:null==Le?void 0:Le.themeClass,onRender:null==Le?void 0:Le.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:r}=this;return null==r||r(),g("div",{class:[this.themeClass,`${n}-color-picker`],ref:"selfRef",style:this.cssVars},g(ee,null,{default:()=>[g(ne,null,{default:()=>g(xe,{clsPrefix:n,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),g(re,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===W.tdkey,to:this.adjustedTo},{default:()=>g(H,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?X(this.renderPanel(),[[E,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}});export{$e as _};
