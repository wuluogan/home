import{_ as e,d8 as s,di as a,d7 as t,cP as l,e as o,f as r,o as i,c as n,a as c,w as d,k as p,F as m,x as u,u as g,d as f,bO as y,e0 as v,b as h,t as _,q as k,ac as x,am as C,z as w,dX as b,dY as z,dZ as $}from"./index-d93ecfd9.js";import{l as A}from"./artist-160951aa.js";import{_ as L}from"./Spin-c12f3861.js";import{_ as j}from"./Avatar-d697b90d.js";import{_ as U}from"./text-f881741e.js";import{_ as S,a as D}from"./Grid-86a1f343.js";import{_ as N}from"./Skeleton-8803bfe7.js";import{_ as F}from"./Dropdown-ca523edc.js";const I={class:"artistlists"},R={class:"cover"},X={class:"cover-loading"},Y=e({__name:"ArtistLists",props:{listData:{type:Array,default:[]},gridCollapsed:{type:Boolean,default:!1},gridCollapsedRows:{type:Number,default:1},loadingNum:{type:Number,default:6}},setup(e){const{t:Y}=s(),q=a(),B=t(),G=l(),J=o(0),O=o(0),P=o(!1),T=o(null),W=e=>()=>w(y,{style:{transform:"translateX(2px)"}},{default:()=>e}),Z=()=>{P.value=!1},E=e=>{const s=H(e.id)?1:2,a="zh-CN"===B.language?"":" ";A(s,e.id).then((t=>{200===t.code?($message.success(`${e.name+a}${Y(1==s?"menu.collection":"menu.cancelCollection",{name:Y("general.dialog.success")})}`),q.setUserArtistLists()):$message.error(`${e.name+a}${Y(1==s?"menu.collection":"menu.cancelCollection",{name:Y("general.dialog.failed")})}`)}))},H=e=>!q.getUserArtistLists.list[0]||!q.getUserArtistLists.list.some((s=>s.id===e));return r((()=>{!q.userLogin||q.getUserArtistLists.has||q.getUserArtistLists.isLoading||q.setUserArtistLists()})),(s,a)=>{const t=L,l=j,o=U,r=S,A=D,B=N,K=F;return i(),n("div",I,[c(x,{mode:"out-in"},{default:d((()=>[e.listData[0]?(i(),p(A,{key:0,"x-gap":"30","y-gap":"34",cols:"3 mb:4 s:5 l:6",responsive:"screen",collapsed:e.gridCollapsed,"collapsed-rows":e.gridCollapsedRows},{default:d((()=>[(i(!0),n(m,null,u(e.listData,(e=>(i(),p(r,{class:"item",key:e,onClick:s=>g(G).push(`/artist/songs?id=${e.id}&page=1`),onContextmenu:s=>{return t=e,(a=s).preventDefault(),P.value=!1,void C().then((()=>{T.value=[{key:"like",label:H(t.id)?Y("menu.collection",{name:Y("general.name.artists")}):Y("menu.cancelCollection",{name:Y("general.name.artists")}),show:!(!q.userLogin||!q.getUserArtistLists.has),icon:W(w(H(t.id)?b:z)),props:{onClick:()=>{E(t)}}},{key:"copy",label:Y("menu.copy",{name:Y("general.name.artists"),other:Y("general.name.link")}),icon:W(w($)),props:{onClick:()=>{if(navigator.clipboard)try{navigator.clipboard.writeText(`https://music.163.com/#/artist?id=${t.id}`),$message.success(Y("general.message.copySuccess"))}catch(e){console.error(Y("general.message.copyFailure"),e),$message.error(Y("general.message.copyFailure"))}else $message.error(Y("general.message.notSupported"))}}}],P.value=!0,J.value=a.clientX,O.value=a.clientY}));var a,t}},{default:d((()=>[f("div",R,[c(l,{lazy:"",round:"",class:"coverImg",src:e.cover.replace(/^http:/,"https:")+"?param=200y200","fallback-src":"/img/music/pic/default.png"},{placeholder:d((()=>[f("div",X,[c(t,{size:"small"})])])),_:2},1032,["src"]),c(l,{lazy:"",round:"",class:"shadow",src:e.cover.replace(/^http:/,"https:")+"?param=200y200","fallback-src":"/img/music/pic/default.png"},null,8,["src"]),c(g(y),{size:"40",component:g(v)},null,8,["component"])]),c(o,{class:"name text-hidden"},{default:d((()=>[h(_(e.name),1)])),_:2},1024),e.size?(i(),p(o,{key:0,class:"size",depth:3},{default:d((()=>[h(_(s.$t("general.name.songSize",{size:e.size})),1)])),_:2},1024)):k("",!0)])),_:2},1032,["onClick","onContextmenu"])))),128))])),_:1},8,["collapsed","collapsed-rows"])):(i(),p(A,{key:1,class:"loading","x-gap":"20","y-gap":"26",cols:"3 mb:4 s:5 l:6",responsive:"screen",collapsed:e.gridCollapsed,"collapsed-rows":e.gridCollapsedRows},{default:d((()=>[(i(!0),n(m,null,u(e.loadingNum,(e=>(i(),p(r,{class:"item",key:e},{default:d((()=>[c(B,{class:"pic",sharp:!1}),c(B,{text:"",style:{width:"60%"}})])),_:2},1024)))),128))])),_:1},8,["collapsed","collapsed-rows"]))])),_:1}),c(K,{style:{"--n-font-size":"14px","--n-border-radius":"6px"},placement:"bottom-start",trigger:"manual",size:"large",x:g(J),y:g(O),options:g(T),show:g(P),"on-clickoutside":Z,onSelect:a[0]||(a[0]=e=>P.value=!1)},null,8,["x","y","options","show"])])}}},[["__scopeId","data-v-2577846f"]]);export{Y as A};
