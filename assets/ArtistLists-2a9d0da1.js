import{_ as s,cN as e,cQ as a,cM as t,cB as l,e as o,f as r,o as i,c as n,a as c,w as p,k as m,F as d,x as u,u as g,d as f,b as y,t as v,q as h,ac as k,am as _,z as w,c4 as x,bO as C}from"./index-c72c5b0c.js";import{l as b}from"./artist-5e2ec7cd.js";import{L as z,a as L,_ as $}from"./LinkTwo-8d6bc0a2.js";import{U as A}from"./Unlike-d603c2d2.js";import{_ as j}from"./Avatar-62f97100.js";import{_ as U}from"./text-64fc9966.js";import{_ as N,a as S}from"./Grid-1728937a.js";import{_ as D}from"./Skeleton-163a49d9.js";import{_ as F}from"./Dropdown-db0b14d8.js";const I={class:"artistlists"},R={class:"cover"},B={class:"cover-loading"},O=s({__name:"ArtistLists",props:{listData:{type:Array,default:[]},gridCollapsed:{type:Boolean,default:!1},gridCollapsedRows:{type:Number,default:1},loadingNum:{type:Number,default:6}},setup(s){const{t:O}=e(),T=a(),X=t(),q=l(),G=o(0),M=o(0),Q=o(!1),Y=o(null),E=s=>()=>w(C,{style:{transform:"translateX(2px)"}},{default:()=>s}),H=()=>{Q.value=!1},J=s=>{const e=K(s.id)?1:2,a="zh-CN"===X.language?"":" ";b(e,s.id).then((t=>{200===t.code?($message.success(`${s.name+a}${O(1==e?"menu.collection":"menu.cancelCollection",{name:O("general.dialog.success")})}`),T.setUserArtistLists()):$message.error(`${s.name+a}${O(1==e?"menu.collection":"menu.cancelCollection",{name:O("general.dialog.failed")})}`)}))},K=s=>!T.getUserArtistLists.list[0]||!T.getUserArtistLists.list.some((e=>e.id===s));return r((()=>{!T.userLogin||T.getUserArtistLists.has||T.getUserArtistLists.isLoading||T.setUserArtistLists()})),(e,a)=>{const t=$,l=j,o=x,r=U,C=N,b=S,X=D,P=F;return i(),n("div",I,[c(k,{mode:"out-in"},{default:p((()=>[s.listData[0]?(i(),m(b,{key:0,"x-gap":"30","y-gap":"34",cols:"3 mb:4 s:5 l:6",responsive:"screen",collapsed:s.gridCollapsed,"collapsed-rows":s.gridCollapsedRows},{default:p((()=>[(i(!0),n(d,null,u(s.listData,(s=>(i(),m(C,{class:"item",key:s,onClick:e=>g(q).push(`/music/artist/songs?id=${s.id}&page=1`),onContextmenu:e=>{return t=s,(a=e).preventDefault(),Q.value=!1,void _().then((()=>{Y.value=[{key:"like",label:K(t.id)?O("menu.collection",{name:O("general.name.artists")}):O("menu.cancelCollection",{name:O("general.name.artists")}),show:!(!T.userLogin||!T.getUserArtistLists.has),icon:E(w(K(t.id)?z:A)),props:{onClick:()=>{J(t)}}},{key:"copy",label:O("menu.copy",{name:O("general.name.artists"),other:O("general.name.link")}),icon:E(w(L)),props:{onClick:()=>{if(navigator.clipboard)try{navigator.clipboard.writeText(`https://music.163.com/#/artist?id=${t.id}`),$message.success(O("general.message.copySuccess"))}catch(s){console.error(O("general.message.copyFailure"),s),$message.error(O("general.message.copyFailure"))}else $message.error(O("general.message.notSupported"))}}}],Q.value=!0,G.value=a.clientX,M.value=a.clientY}));var a,t}},{default:p((()=>[f("div",R,[c(l,{lazy:"",round:"",class:"coverImg",src:s.cover.replace(/^http:/,"https:")+"?param=200y200","fallback-src":"/img/music/pic/default.png"},{placeholder:p((()=>[f("div",B,[c(t,{size:"small"})])])),_:2},1032,["src"]),c(l,{lazy:"",round:"",class:"shadow",src:s.cover.replace(/^http:/,"https:")+"?param=200y200","fallback-src":"/img/music/pic/default.png"},null,8,["src"]),c(o,{size:"40",component:"Search"})]),c(r,{class:"name text-hidden"},{default:p((()=>[y(v(s.name),1)])),_:2},1024),s.size?(i(),m(r,{key:0,class:"size",depth:3},{default:p((()=>[y(v(e.$t("general.name.songSize",{size:s.size})),1)])),_:2},1024)):h("",!0)])),_:2},1032,["onClick","onContextmenu"])))),128))])),_:1},8,["collapsed","collapsed-rows"])):(i(),m(b,{key:1,class:"loading","x-gap":"20","y-gap":"26",cols:"3 mb:4 s:5 l:6",responsive:"screen",collapsed:s.gridCollapsed,"collapsed-rows":s.gridCollapsedRows},{default:p((()=>[(i(!0),n(d,null,u(s.loadingNum,(s=>(i(),m(C,{class:"item",key:s},{default:p((()=>[c(X,{class:"pic",sharp:!1}),c(X,{text:"",style:{width:"60%"}})])),_:2},1024)))),128))])),_:1},8,["collapsed","collapsed-rows"]))])),_:1}),c(P,{style:{"--n-font-size":"14px","--n-border-radius":"6px"},placement:"bottom-start",trigger:"manual",size:"large",x:g(G),y:g(M),options:g(Y),show:g(Q),"on-clickoutside":H,onSelect:a[0]||(a[0]=s=>Q.value=!1)},null,8,["x","y","options","show"])])}}},[["__scopeId","data-v-a99254f6"]]);export{O as A};
