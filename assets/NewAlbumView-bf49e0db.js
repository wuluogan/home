import{b as e}from"./album-8a3f3da2.js";import{_ as a,cN as t,cB as r,e as s,Y as l,f as o,o as i,c as u,d as m,t as p,a as n,w as j,u as c,k as v,q as g,de as b,F as d,x as y,b as h}from"./index-c72c5b0c.js";import{C as f}from"./CoverLists-b729b53c.js";import{P as w}from"./index-69256b9d.js";import{_}from"./Space-5d75b1a8.js";import{_ as q}from"./Tag-827106b2.js";import"./AllArtists-b2fee903.js";import"./text-64fc9966.js";import"./use-compitable-a1866e01.js";import"./light-a7677734.js";import"./Input-b4caa030.js";import"./Suffix-af55cfcd.js";import"./index-92eb66c0.js";import"./use-merged-state-74230ec8.js";import"./light-6c88686a.js";import"./FormItem-e0127deb.js";import"./light-8d6c1748.js";import"./Popover-87b27d79.js";import"./light-cb0cf260.js";import"./Follower-ef4b8179.js";import"./next-frame-once-924ab492.js";import"./cssr-ed8d5782.js";import"./Select-714380b7.js";import"./create-07671515.js";import"./light-20fa43af.js";import"./light-170bfcda.js";import"./Empty-3e1da814.js";import"./getCoverUrl-bb08aa65.js";import"./PlayOne-22adba7e.js";import"./LinkTwo-8d6bc0a2.js";import"./light-bf1b7eb7.js";import"./Unlike-d603c2d2.js";import"./Image-6ba3d672.js";import"./utils-48198701.js";import"./light-a43afc3c.js";import"./Tooltip-f5342231.js";import"./Grid-1728937a.js";import"./get-slot-a0e67e91.js";import"./DeleteFour-7678c621.js";import"./Skeleton-163a49d9.js";import"./use-houdini-1a86f12f.js";import"./Dropdown-db0b14d8.js";import"./light-37eaa122.js";import"./create-ref-setter-ee697025.js";import"./Pagination-10257b2a.js";import"./light-e632ba41.js";import"./_common-89f2509f.js";import"./_common-991711fd.js";const A={class:"new-album"},T={class:"title"},k={class:"key"},C=a({__name:"NewAlbumView",setup(a){const{t:C}=t(),L=r(),x=s([]),N=s(0),P=s(30),R=s(L.currentRoute.value.query.page?Number(L.currentRoute.value.query.page):1),S=s(L.currentRoute.value.query.area?L.currentRoute.value.query.area:"ALL"),F=[{label:C("general.type.all"),value:"ALL"},{label:C("general.type.china"),value:"ZH"},{label:C("general.type.western"),value:"EA"},{label:C("general.type.japan"),value:"JP"},{label:C("general.type.korea"),value:"KR"}],$=(a,t=30,r=0)=>{e(a,t,r).then((e=>{N.value=e.total,x.value=[],e.albums?e.albums.forEach((e=>{x.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:b(e.publishTime)})})):$message.error(C("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};l((()=>L.currentRoute.value),(e=>{S.value=e.query.area?e.query.area:"ALL",R.value=Number(e.query.page?e.query.page:1),"new-album"==e.name&&$(S.value,P.value,(R.value-1)*P.value)}));const D=e=>{P.value=e,$(S.value,e,(R.value-1)*P.value)},E=e=>{L.push({path:"/music/new-album",query:{area:S.value,page:e}})};return o((()=>{$setSiteTitle(C("home.title.newAlbum")),$(S.value,P.value,(R.value-1)*P.value)})),(e,a)=>{const t=q,r=_;return i(),u("div",A,[m("div",T,[m("span",k,p(e.$t("home.title.newAlbum")),1)]),n(r,{class:"category"},{default:j((()=>[(i(),u(d,null,y(F,(e=>n(t,{class:"tag",round:"",key:e,bordered:!1,type:e.value==c(S)?"primary":"default",onClick:a=>{return t=e.value,void L.push({path:"/music/new-album",query:{area:t,page:1}});var t}},{default:j((()=>[h(p(e.label),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),n(f,{listData:c(x),listType:"album"},null,8,["listData"]),c(x)[0]?(i(),v(w,{key:0,pageNumber:c(R),totalCount:c(N),onPageSizeChange:D,onPageNumberChange:E},null,8,["pageNumber","totalCount"])):g("",!0)])}}},[["__scopeId","data-v-76662a7f"]]);export{C as default};
