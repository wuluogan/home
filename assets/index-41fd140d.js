import{y as e,o as t,c as a,d as s,_ as l,d8 as n,cP as r,di as i,e as o,f as c,Y as u,c5 as m,u as d,a as p,w as v,k as g,q as w,ch as f,g as h,cJ as x,b as z,t as _,ac as k,c6 as S,cU as b,p as $,l as y,bO as j}from"./index-d93ecfd9.js";import{a as C,l as A}from"./artist-160951aa.js";import{_ as L}from"./Avatar-d697b90d.js";import{_ as M}from"./text-f881741e.js";import{_ as T}from"./Space-76cfe381.js";import{a as U,b as R}from"./Tabs-7872627f.js";import{_ as B}from"./Scrollbar-b297dc5c.js";import"./utils-5d91cb42.js";import"./Tag-9bd41f20.js";import"./_common-991711fd.js";import"./light-d2124738.js";import"./use-compitable-f583eb1a.js";import"./light-6dc1ea6d.js";import"./get-slot-a0e67e91.js";import"./_common-89f2509f.js";import"./Add-00122154.js";import"./use-merged-state-bb55b613.js";import"./cssr-2139d5e3.js";import"./light-af7849c2.js";const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},q=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5s-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1s1-.45 1-1s-.45-1-1-1z",fill:"currentColor"},null,-1)],D=e({name:"AlbumFilled",render:function(e,s){return t(),a("svg",V,q)}}),F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},I=[s("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4V7h4V3h-6z",fill:"currentColor"},null,-1)],H=e({name:"MusicNoteFilled",render:function(e,s){return t(),a("svg",F,I)}}),P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},N=[s("circle",{cx:"9",cy:"8",r:"4",fill:"currentColor"},null,-1),s("path",{d:"M9 14c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4zm11-4V7h-2v3h-3v2h3v3h2v-3h3v-2z",fill:"currentColor"},null,-1)],Y=e({name:"PersonAddAlt1Round",render:function(e,s){return t(),a("svg",P,N)}}),J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},K=[s("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4s4-1.79 4-4zM2 18v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4s-8 1.34-8 4zm16-8h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1z",fill:"currentColor"},null,-1)],O=e({name:"PersonRemoveAlt1Round",render:function(e,s){return t(),a("svg",J,K)}}),Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},W=[s("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l2.29 2.29c.63.63 1.71.18 1.71-.71V8.91c0-.89-1.08-1.34-1.71-.71L17 10.5z",fill:"currentColor"},null,-1)],E=e({name:"VideocamRound",render:function(e,s){return t(),a("svg",Q,W)}}),G={class:"artist"},X={key:0,class:"artistData"},Z={class:"cover"},ee={class:"data"},te={class:"num"},ae={key:1,class:"error"},se=(e=>($("data-v-7c5747cd"),e=e(),y(),e))((()=>s("br",null,null,-1))),le={key:3,class:"content"},ne=l({__name:"index",setup(e){const{t:l}=n(),$=r(),y=i(),V=o($.currentRoute.value.query.id),q=o(null),F=o(!1),I=o(!1),P=o($.currentRoute.value.path.split("/")[2]),N=e=>{e&&C(e).then((e=>{q.value={id:e.data.artist.id,name:e.data.artist.name,occupation:e.data.identify?e.data.identify.imageDesc:null,cover:e.data.artist.cover,desc:e.data.artist.briefDesc,albumSize:e.data.artist.albumSize,musicSize:e.data.artist.musicSize,mvSize:e.data.artist.mvSize},$setSiteTitle(e.data.artist.name+" - "+l("general.name.artists")),"undefined"!=typeof $scrollToTop&&$scrollToTop()})).catch((e=>{$.go(-1),console.error(l("general.message.acquisitionFailed"),e),$message.error(l("general.message.acquisitionFailed"))}))},J=e=>{$.push({path:`/artist/${e}`,query:{id:V.value,page:1}})},K=e=>{if(y.getUserArtistLists.list[0]){return-1===y.getUserArtistLists.list.findIndex((t=>t.id===Number(e)))}return!0};return c((()=>{N(V.value),I.value=K(V.value),!y.userLogin||y.getUserArtistLists.has||y.getUserArtistLists.isLoading||y.setUserArtistLists((()=>{V.value,K(V.value),I.value=K(V.value)}))})),u((()=>$.currentRoute.value),(e=>{V.value=e.query.id,P.value=e.path.split("/")[2],I.value=K(V.value),"artist"==e.path.split("/")[1]&&N(V.value)})),(e,n)=>{const r=L,i=M,o=j,c=h,u=T,C=B,N=x,Q=R,W=U,ne=m("router-view");return t(),a("div",G,[d(V)&&d(q)?(t(),a("div",X,[s("div",Z,[p(r,{round:"",class:"coverImg",src:d(q).cover.replace(/^http:/,"https:")+"?param=300y300","fallback-src":"/img/music/pic/default.png"},null,8,["src"])]),s("div",ee,[p(i,{class:"name"},{default:v((()=>[z(_(d(q).name),1)])),_:1}),p(i,{class:"occupation",depth:3},{default:v((()=>[z(_(d(q).occupation),1)])),_:1}),s("div",te,[p(i,{class:"musicSize",onClick:n[0]||(n[0]=e=>J("songs"))},{default:v((()=>[p(o,{component:d(H)},null,8,["component"]),z(" "+_(e.$t("general.name.songSize",{size:d(q).musicSize})),1)])),_:1}),p(i,{class:"albumSize",onClick:n[1]||(n[1]=e=>J("albums"))},{default:v((()=>[p(o,{component:d(D)},null,8,["component"]),z(" "+_(e.$t("general.name.albumSize",{size:d(q).albumSize})),1)])),_:1}),p(i,{class:"mvSize",onClick:n[2]||(n[2]=e=>J("videos"))},{default:v((()=>[p(o,{component:d(E)},null,8,["component"]),z(" "+_(e.$t("general.name.mvSize",{size:d(q).mvSize})),1)])),_:1})]),p(i,{class:"desc text-hidden",onClick:n[3]||(n[3]=e=>F.value=!0)},{default:v((()=>[z(_(d(q).desc),1)])),_:1}),d(y).userLogin?(t(),g(u,{key:0,class:"button"},{default:v((()=>[p(c,{type:d(I)?"primary":"default",strong:"",secondary:"",onClick:n[4]||(n[4]=e=>(e=>{const t=K(e.id)?1:2;A(t,e.id).then((a=>{200===a.code?($message.success(`${e.name} ${l(1==t?"menu.collection":"menu.cancelCollection",{name:l("general.dialog.success")})}`),y.setUserArtistLists((()=>{I.value=K(V.value)}))):$message.error(`${e.name} ${l(1==t?"menu.collection":"menu.cancelCollection",{name:l("general.dialog.failed")})}`)}))})(d(q)))},{icon:v((()=>[p(o,{component:d(I)?d(Y):d(O)},null,8,["component"])])),default:v((()=>[z(" "+_(d(I)?e.$t("menu.collection",{name:e.$t("general.name.artists")}):e.$t("menu.cancelCollection",{name:e.$t("general.name.artists")})),1)])),_:1},8,["type"])])),_:1})):w("",!0),p(N,{class:"s-modal",show:d(F),"onUpdate:show":n[5]||(n[5]=e=>f(F)?F.value=e:null),preset:"card",title:e.$t("general.name.artistDesc"),bordered:!1},{default:v((()=>[p(C,null,{default:v((()=>[p(i,{innerHTML:d(q).desc.replace(/\n/g,"<br>")},null,8,["innerHTML"])])),_:1})])),_:1},8,["show","title"])])])):d(V)?w("",!0):(t(),a("div",ae,[p(i,null,{default:v((()=>[z(_(e.$t("general.name.noKeywords")),1)])),_:1}),se,p(c,{strong:"",secondary:"",onClick:n[6]||(n[6]=e=>d($).go(-1)),style:{"margin-top":"20px"}},{default:v((()=>[z(_(e.$t("general.name.goBack")),1)])),_:1})])),d(q)?(t(),g(W,{key:2,class:"main-tab",type:"segment","onUpdate:value":[J,n[7]||(n[7]=e=>f(P)?P.value=e:null)],value:d(P)},{default:v((()=>[p(Q,{name:"songs"},{default:v((()=>[z(_(e.$t("general.name.hotSong")),1)])),_:1}),p(Q,{name:"albums"},{default:v((()=>[z(_(e.$t("general.name.album")),1)])),_:1}),p(Q,{name:"videos"},{default:v((()=>[z(" MV")])),_:1})])),_:1},8,["value"])):w("",!0),d(q)?(t(),a("main",le,[p(ne,{mvSize:d(q)?d(q).mvSize:null},{default:v((({Component:e})=>[(t(),g(b,null,[p(k,{name:"move",mode:"out-in"},{default:v((()=>[(t(),g(S(e)))])),_:2},1024)],1024))])),_:1},8,["mvSize"])])):w("",!0)])}}},[["__scopeId","data-v-7c5747cd"]]);export{ne as default};
