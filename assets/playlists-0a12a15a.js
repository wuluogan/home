import{y as e,o as a,c as t,d as l,_ as r,d8 as s,cP as o,d9 as i,e as u,Y as n,f as p,a as m,w as c,u as d,ch as v,k as g,q as y,ed as h,dO as j,ee as f,g as C,cJ as _,b as q,t as w,n as x,F as b,x as k,bO as L}from"./index-d93ecfd9.js";import{C as S}from"./CoverLists-0e646f28.js";import{P as T}from"./index-e01b8113.js";import{_ as $}from"./Space-76cfe381.js";import{_ as R}from"./Tag-9bd41f20.js";import{_ as z}from"./text-f881741e.js";import{a as P,_ as F}from"./ListItem-ca2bb28f.js";import{_ as I}from"./Scrollbar-b297dc5c.js";import{_ as D}from"./Switch-d55d0dfc.js";import"./album-72ad8940.js";import"./AllArtists-e33e1687.js";import"./Input-19ebdc3b.js";import"./Suffix-1fd55ec3.js";import"./index-92eb66c0.js";import"./use-merged-state-bb55b613.js";import"./light-1b9db3a7.js";import"./FormItem-ccd063f6.js";import"./light-d411e82b.js";import"./Popover-92ca2497.js";import"./light-f76c98be.js";import"./Follower-829f72e1.js";import"./next-frame-once-924ab492.js";import"./cssr-2139d5e3.js";import"./use-compitable-f583eb1a.js";import"./Select-d00ca0af.js";import"./create-07671515.js";import"./light-25af1eec.js";import"./light-16e65505.js";import"./Empty-d19cae85.js";import"./getCoverUrl-bb08aa65.js";import"./Spin-c12f3861.js";import"./light-f8d78f18.js";import"./Image-46cbaef1.js";import"./utils-5d91cb42.js";import"./light-c2ad2c79.js";import"./Tooltip-0ede3859.js";import"./Grid-86a1f343.js";import"./get-slot-a0e67e91.js";import"./Skeleton-8803bfe7.js";import"./use-houdini-2a8f5bbb.js";import"./Dropdown-ca523edc.js";import"./light-5ced6f1c.js";import"./create-ref-setter-ee697025.js";import"./Pagination-eed167c0.js";import"./light-f5dc26c8.js";import"./_common-89f2509f.js";import"./_common-991711fd.js";import"./light-6dc1ea6d.js";import"./light-8230dd77.js";import"./_common-6222e43f.js";const N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},U=[l("path",{d:"M9.29 6.71a.996.996 0 0 0 0 1.41L13.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z",fill:"currentColor"},null,-1)],A=e({name:"ChevronRightRound",render:function(e,l){return a(),t("svg",N,U)}}),B={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},E=[l("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1),l("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1)],M=e({name:"LocalFireDepartmentRound",render:function(e,l){return a(),t("svg",B,E)}}),O={class:"playlists"},Y={class:"menu"},G={key:0,class:"all-cat"},J={key:1,class:"error"},K=r({__name:"playlists",setup(e){const{t:r}=s(),N=o(),U=i(),B=u(!1),E=u(N.currentRoute.value.query.cat?N.currentRoute.value.query.cat:"全部歌单"),K=u([]),V=u(0),Z=u(30),H=u(N.currentRoute.value.query.page?Number(N.currentRoute.value.query.page):1),Q=u(!!N.currentRoute.value.query.hq&&"true"==N.currentRoute.value.query.hq),W=u(!0),X=u(!1),ee=e=>{K.value=[],N.push({path:"/discover/playlists",query:{cat:E.value,hq:!!e,page:1}})},ae=(e="全部歌单",a=30,t=0)=>{h(e,a,t).then((e=>{V.value=e.total,K.value=[],e.playlists[0]?e.playlists.forEach((e=>{K.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:j(e.playCount)})})):$message.error(r("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))},te=(e="全部歌单",a=30)=>{const t=K.value[0]?K.value[K.value.length-1].updateTime:null;f(e,a,t).then((e=>{e.playlists[0]?(e.more?W.value=!0:W.value=!1,X.value=!1,e.playlists.forEach((e=>{K.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:j(e.playCount),updateTime:e.updateTime})}))):(W.value=!1,$message.error(r("general.message.acquisitionFailed")))}))},le=e=>{K.value=[],N.push({path:"/discover/playlists",query:{cat:e,page:1}}),B.value=!1},re=e=>{Z.value=e,ae(E.value,e,(H.value-1)*Z.value)},se=e=>{N.push({path:"/discover/playlists",query:{cat:E.value,page:e}})};return n((()=>N.currentRoute.value),(e=>{E.value=e.query.cat?e.query.cat:"全部歌单",Q.value=!!e.query.hq&&"true"==e.query.hq,"dsc-playlists"==e.name&&(Q.value?(K.value=[],te(E.value)):(H.value=e.query.page?Number(e.query.page):1,ae(E.value,Z.value,(H.value-1)*Z.value)))})),p((()=>{$setSiteTitle(r("nav.discover")+" - "+r("general.name.playlist")),U.catList.sub&&U.highqualityCatList[0]||U.setCatList(!0),Q.value?te(E.value):ae(E.value,Z.value,(H.value-1)*Z.value)})),(e,r)=>{const s=L,o=C,i=R,u=z,n=$,p=P,h=F,j=I,f=_,N=D;return a(),t("div",O,[l("div",Y,[m(o,{strong:"",secondary:"",class:"cat","icon-placement":"right",round:"",onClick:r[0]||(r[0]=e=>B.value=!0)},{icon:c((()=>[m(s,{class:"up",component:d(A)},null,8,["component"])])),default:c((()=>[q(" "+w(d(E)),1)])),_:1}),m(f,{class:"s-modal",show:d(B),"onUpdate:show":r[2]||(r[2]=e=>v(B)?B.value=e:null),preset:"card",title:e.$t("general.name.playlistType"),bordered:!1},{header:c((()=>[q(w(e.$t("general.name.playlistType"))+" ",1),m(i,{round:"",class:"tag",type:"全部歌单"==d(E)?"primary":"default",style:x({marginLeft:"12px",fontSize:"12px",transform:"translateY(-2px)",cursor:"pointer"}),bordered:!1,onClick:r[1]||(r[1]=e=>le("全部歌单"))},{default:c((()=>[q(w(e.$t("general.name.allPLaylist")),1)])),_:1},8,["type","style"])])),default:c((()=>[m(j,null,{default:c((()=>{var l;return[(null==(l=d(U).catList)?void 0:l.sub[0])?(a(),t("div",G,[m(h,null,{default:c((()=>[(a(!0),t(b,null,k(d(U).catList.categories,((e,l)=>(a(),g(p,{key:e},{prefix:c((()=>[m(u,{class:"type"},{default:c((()=>[q(w(e),1)])),_:2},1024)])),default:c((()=>[m(n,null,{default:c((()=>[(a(!0),t(b,null,k(d(U).catList.sub.filter((e=>e.category==l)),(e=>(a(),g(i,{round:"",class:"tag",size:"large",key:e,bordered:!1,type:e.name==d(E)?"primary":"default",onClick:a=>le(e.name)},{icon:c((()=>[e.hot?(a(),g(s,{key:0,class:"icon",component:d(M)},null,8,["component"])):y("",!0)])),default:c((()=>[q(w(e.name)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(a(),t("div",J,w(e.$t("general.message.acquisitionFailed")),1))]})),_:1})])),_:1},8,["show","title"]),(Z=d(U).highqualityCatList,ae=d(E),"全部歌单"==ae||Z.some((e=>e.name==ae))?(a(),g(n,{key:0,align:"center"},{default:c((()=>[m(u,null,{default:c((()=>[q(w(e.$t("general.name.bestPlaylist")),1)])),_:1}),m(N,{value:d(Q),"onUpdate:value":[r[3]||(r[3]=e=>v(Q)?Q.value=e:null),ee],round:!1},null,8,["value"])])),_:1})):y("",!0))]),m(S,{listData:d(K)},null,8,["listData"]),d(K)[0]&&!d(Q)?(a(),g(T,{key:0,totalCount:d(V),pageNumber:d(H),onPageSizeChange:re,onPageNumberChange:se},null,8,["totalCount","pageNumber"])):y("",!0),m(n,{justify:"center"},{default:c((()=>[d(Q)&&d(W)?(a(),g(o,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:d(X),onClick:r[4]||(r[4]=()=>{X.value=!0,te(d(E))})},{default:c((()=>[q(w(e.$t("general.name.loadMore")),1)])),_:1},8,["loading"])):y("",!0)])),_:1})]);var Z,ae}}},[["__scopeId","data-v-f0b8978a"]]);export{K as default};
