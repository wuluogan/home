import{cj as e,_ as a,d8 as t,di as s,cP as n,o as i,k as m,w as l,d as o,c,q as r,a as d,b as u,t as p,u as k,eh as v,ei as D,ej as h,j as g,ek as f,dO as _,ac as y,bO as L,an as b}from"./index-d93ecfd9.js";import{_ as R}from"./text-f881741e.js";import{_ as T}from"./Skeleton-8803bfe7.js";const j=(a,t=0,s=null,n="music")=>e({method:"GET",url:`/comment/${n}`,params:{id:a,offset:t,before:s,timestamp:(new Date).getTime()}}),x={class:"user"},C={class:"avatar"},H=["src"],M=["src"],w={key:0,class:"associator"},O=["src"],I={class:"review"},P={class:"content"},U={key:0,class:"beReplied"},V={class:"thing"},$={class:"item"},q={key:0,class:"item"},z=a({__name:"index",props:{commentData:{type:Object,default:{}}},setup(a){const{t:j}=t(),z=s(),A=n(),E=a,G=()=>{if(z.userLogin){const a=E.commentData.liked?0:1;((a,t,s,n=0)=>e({method:"GET",hiddenBar:!0,url:"/comment/like",params:{id:a,cid:t,t:s,type:n,timestamp:(new Date).getTime()}}))(A.currentRoute.value.query.id,E.commentData.commentId,a).then((e=>{200===e.code?(E.commentData.liked=!E.commentData.liked,E.commentData.likedCount+=a?1:-1):$message.error(j("general.message.operationFailed"))}))}else $message.error(j("general.message.needLogin"))};return(e,t)=>{const s=R,n=L,j=b,z=T;return i(),m(y,{mode:"out-in"},{default:l((()=>[Object.keys(a.commentData).length?(i(),m(j,{key:0,class:"comment",hoverable:""},{default:l((()=>{var e,t,m;return[o("div",x,[o("div",C,[o("img",{class:"avatarImg",src:a.commentData.user.avatarUrl.replace(/^http:/,"https:")+"?param=50y50",alt:"avatar"},null,8,H),(null==(e=a.commentData.user.vipRights)?void 0:e.redVipAnnualCount)>0?(i(),c("img",{key:0,class:"musicPackage",src:a.commentData.user.vipRights.musicPackage.iconUrl.replace(/^http:/,"https:"),alt:"redVipAnnualCount",title:"网易音乐人"},null,8,M)):r("",!0)]),(null==(t=a.commentData.user.vipRights)?void 0:t.redVipLevel)>0?(i(),c("div",w,[a.commentData.user.vipRights.associator?(i(),c("img",{key:0,src:a.commentData.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"黑胶会员"},null,8,O)):r("",!0)])):r("",!0)]),o("div",I,[o("div",P,[d(s,{class:"name"},{default:l((()=>[u(p(a.commentData.user.nickname)+"：",1)])),_:1}),d(s,{class:"text",innerHTML:a.commentData.content},null,8,["innerHTML"])]),a.commentData.beReplied[0]?(i(),c("div",U,[d(s,{class:"name"},{default:l((()=>[u(" @"+p(a.commentData.beReplied[0].user.nickname)+"： ",1)])),_:1}),d(s,{class:"text"},{default:l((()=>[u(p(a.commentData.beReplied[0].content),1)])),_:1})])):r("",!0),o("div",V,[o("div",$,[d(n,{size:"14",depth:3,component:k(v)},null,8,["component"]),d(s,{depth:3,innerHTML:k(D)(a.commentData.time)},null,8,["innerHTML"])]),(null==(m=a.commentData.ipLocation)?void 0:m.location)?(i(),c("div",q,[d(n,{size:"14",depth:3,component:k(h)},null,8,["component"]),d(s,{depth:3,innerHTML:a.commentData.ipLocation.location},null,8,["innerHTML"])])):r("",!0),o("div",{class:g(a.commentData.liked?"like liked":"like"),onClick:G},[d(n,null,{default:l((()=>[d(k(f),{theme:a.commentData.liked?"filled":"outline"},null,8,["theme"])])),_:1}),u(" "+p(k(_)(a.commentData.likedCount)),1)],2)])])]})),_:1})):(i(),m(z,{key:1,class:"skeleton"}))])),_:1})}}},[["__scopeId","data-v-ae6c5767"]]);export{z as C,j as g};
