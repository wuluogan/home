import{_ as e,d8 as s,cP as a,d9 as t,e as o,f as i,Y as r,u as l,o as n,c as m,d as p,a as c,w as d,k as u,q as g,F as j,x as f,e4 as v,es as h,dO as y,bO as _,b,t as k,ep as T,dg as x,eh as C,dQ as $,cb as L,e7 as P,e8 as w,ec as D,g as M}from"./index-d93ecfd9.js";import{g as S,C as A}from"./index-eb769a5c.js";import{A as H}from"./AllArtists-e33e1687.js";import{C as I}from"./CoverLists-0e646f28.js";import{A as F}from"./AddPlaylist-0e9ef9cc.js";import{g as q}from"./getCoverUrl-bb08aa65.js";import{_ as R}from"./Image-46cbaef1.js";import{_ as U}from"./text-f881741e.js";import{_ as V}from"./Space-76cfe381.js";import{a as E}from"./headers-79a1892a.js";import{_ as O}from"./Spin-c12f3861.js";import{_ as G}from"./Tag-9bd41f20.js";import{_ as Q}from"./Divider-2b26e657.js";import"./Skeleton-8803bfe7.js";import"./use-houdini-2a8f5bbb.js";import"./album-72ad8940.js";import"./Input-19ebdc3b.js";import"./Suffix-1fd55ec3.js";import"./index-92eb66c0.js";import"./use-merged-state-bb55b613.js";import"./light-1b9db3a7.js";import"./FormItem-ccd063f6.js";import"./light-d411e82b.js";import"./Popover-92ca2497.js";import"./light-f76c98be.js";import"./Follower-829f72e1.js";import"./next-frame-once-924ab492.js";import"./cssr-2139d5e3.js";import"./use-compitable-f583eb1a.js";import"./Select-d00ca0af.js";import"./create-07671515.js";import"./light-25af1eec.js";import"./light-16e65505.js";import"./Empty-d19cae85.js";import"./Grid-86a1f343.js";import"./get-slot-a0e67e91.js";import"./Dropdown-ca523edc.js";import"./light-5ced6f1c.js";import"./create-ref-setter-ee697025.js";import"./CreatePlaylist-db76e905.js";import"./Checkbox-995e550a.js";import"./light-2c22dcb8.js";import"./Avatar-d697b90d.js";import"./utils-5d91cb42.js";import"./light-d2124738.js";import"./light-c2ad2c79.js";import"./Tooltip-0ede3859.js";import"./light-6dc1ea6d.js";import"./_common-89f2509f.js";import"./light-f8d78f18.js";import"./_common-991711fd.js";import"./light-3a92740e.js";const Y={key:0,class:"song"},Z={class:"detail"},z={class:"pic"},B={class:"cover-loading"},J={class:"right"},K={class:"intr"},N={class:"item"},X={class:"item"},W={key:1,class:"item"},ee={key:0,class:"comments"},se={class:"content"},ae={key:1,class:"simiPlayList"},te=e({__name:"SongView",setup(e){const{t:te}=s(),oe=a(),ie=t(),re=o(null),le=o(oe.currentRoute.value.query.id),ne=o(null),me=o([]),pe=o([]),ce=e=>{v(e).then((s=>{s.songs[0]?(ne.value=s.songs[0],$setSiteTitle(s.songs[0].name+" - "+s.songs[0].ar[0].name+" - "+te("general.name.song")),de(e),ue(e),"undefined"!=typeof $scrollToTop&&$scrollToTop()):$message.error(te("general.message.acquisitionFailed"))}))},de=e=>{S(e).then((e=>{e.total>0&&(me.value=e.hotComments)})).catch((e=>{console.error(te("general.message.acquisitionFailed"),e),$message.error(te("general.message.acquisitionFailed"))}))},ue=e=>{h(e).then((e=>{pe.value=[],e.playlists.forEach((e=>{pe.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:y(e.playCount)})}))}))};return i((()=>{le.value&&ce(le.value)})),r((()=>oe.currentRoute.value),(e=>{le.value=e.query.id,"song"==e.name&&ce(le.value)})),(e,s)=>{var a,t,o;const i=O,r=R,v=U,h=G,y=V,S=_,te=M,ce=E,de=Q;return l(ne)?(n(),m("div",Y,[p("div",Z,[p("div",z,[c(r,{"show-toolbar-tooltip":"",class:"coverImg","previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":l(q)(null==(a=l(ne))?void 0:a.al.picUrl),src:l(q)(null==(t=l(ne))?void 0:t.al.picUrl,1024),"fallback-src":"/img/music/pic/default.png"},{placeholder:d((()=>[p("div",B,[c(i)])])),_:1},8,["preview-src","src"]),c(r,{class:"shadow","preview-disabled":"",src:l(q)(null==(o=l(ne))?void 0:o.al.picUrl,1024),"fallback-src":"/img/music/pic/default.png"},null,8,["src"])]),p("div",J,[p("div",K,[c(v,{class:"name text-hidden",innerHTML:l(ne).name},null,8,["innerHTML"]),l(ne).alia[0]?(n(),u(v,{key:0,depth:"3",class:"alia",innerHTML:l(ne).alia[0]},null,8,["innerHTML"])):g("",!0),c(y,{class:"tag"},{default:d((()=>[1==l(ne).fee||4==l(ne).fee?(n(),u(h,{key:0,class:"vip",round:"",bordered:!1},{default:d((()=>[b(k(1==l(ne).fee?"VIP":"EP"),1)])),_:1})):g("",!0),l(ne).pc?(n(),u(h,{key:1,class:"cloud",round:"",type:"info",bordered:!1},{default:d((()=>[b(k(e.$t("general.name.cloud")),1)])),_:1})):g("",!0)])),_:1}),p("div",N,[c(S,{depth:3,component:l(T)},null,8,["component"]),l(ne).ar?(n(),u(H,{key:0,artistsData:l(ne).ar,isDark:!1},null,8,["artistsData"])):g("",!0)]),p("div",X,[c(S,{depth:3,component:l(x)},null,8,["component"]),c(v,{class:"text",innerHTML:l(ne).al.name,onClick:s[0]||(s[0]=e=>l(oe).push(`/album?id=${l(ne).al.id}`))},null,8,["innerHTML"])]),l(ne).publishTime?(n(),m("div",W,[c(S,{depth:3,component:l(C)},null,8,["component"]),c(v,{class:"text",innerHTML:l($)(l(ne).publishTime)},null,8,["innerHTML"])])):g("",!0)]),c(y,{class:"button"},{default:d((()=>[c(te,{type:"primary",strong:"",secondary:"",onClick:s[1]||(s[1]=e=>(e=>{const s={album:e.al,artist:e.ar,fee:e.fee,id:e.id,name:e.name};ie.setPersonalFmMode(!1),ie.addSongToPlaylists(s)})(l(ne)))},{icon:d((()=>[c(S,{component:l(L)},null,8,["component"])])),default:d((()=>[b(" "+k(e.$t("general.name.play")),1)])),_:1}),c(te,{strong:"",secondary:"",onClick:s[2]||(s[2]=e=>l(re).openAddToPlaylist(l(le)))},{icon:d((()=>[c(S,{component:l(P)},null,8,["component"])])),default:d((()=>[b(" "+k(e.$t("general.name.add")),1)])),_:1}),c(te,{strong:"",secondary:"",onClick:s[3]||(s[3]=e=>l(oe).push(`/comment?id=${l(ne).id}&page=1`))},{icon:d((()=>[c(S,{component:l(w)},null,8,["component"])])),default:d((()=>[b(" "+k(e.$t("general.name.comment")),1)])),_:1}),l(ne).mv?(n(),u(te,{key:0,strong:"",secondary:"",onClick:s[4]||(s[4]=e=>l(oe).push(`/video?id=${l(ne).mv}`))},{icon:d((()=>[c(S,{component:l(D)},null,8,["component"])])),default:d((()=>[b(" MV ")])),_:1})):g("",!0)])),_:1})])]),l(me)[0]?(n(),m("div",ee,[c(ce,{prefix:"bar"},{default:d((()=>[b(k(e.$t("general.name.hotComments")),1)])),_:1}),p("div",se,[(n(!0),m(j,null,f(l(me),(e=>(n(),u(A,{key:e,commentData:e},null,8,["commentData"])))),128))])])):g("",!0),l(pe)[0]?(n(),m("div",ae,[c(de),c(ce,{prefix:"bar"},{default:d((()=>[b(k(e.$t("other.containing")),1)])),_:1}),c(I,{listData:l(pe)},null,8,["listData"])])):g("",!0),c(F,{ref_key:"addPlayListRef",ref:re},null,512)])):g("",!0)}}},[["__scopeId","data-v-bdac9789"]]);export{te as default};
