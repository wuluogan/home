import{b as e}from"./album-72ad8940.js";import{_ as a,d8 as t,cP as r,e as s,Y as l,f as o,o as i,c as u,d as m,t as p,a as n,w as j,u as v,k as g,q as c,dQ as b,F as d,x as y,b as h}from"./index-d93ecfd9.js";import{C as f}from"./CoverLists-0e646f28.js";import{P as w}from"./index-e01b8113.js";import{_ as q}from"./Space-76cfe381.js";import{_}from"./Tag-9bd41f20.js";import"./AllArtists-e33e1687.js";import"./text-f881741e.js";import"./use-compitable-f583eb1a.js";import"./light-6dc1ea6d.js";import"./Input-19ebdc3b.js";import"./Suffix-1fd55ec3.js";import"./index-92eb66c0.js";import"./use-merged-state-bb55b613.js";import"./light-1b9db3a7.js";import"./FormItem-ccd063f6.js";import"./light-d411e82b.js";import"./Popover-92ca2497.js";import"./light-f76c98be.js";import"./Follower-829f72e1.js";import"./next-frame-once-924ab492.js";import"./cssr-2139d5e3.js";import"./Select-d00ca0af.js";import"./create-07671515.js";import"./light-25af1eec.js";import"./light-16e65505.js";import"./Empty-d19cae85.js";import"./getCoverUrl-bb08aa65.js";import"./Spin-c12f3861.js";import"./light-f8d78f18.js";import"./Image-46cbaef1.js";import"./utils-5d91cb42.js";import"./light-c2ad2c79.js";import"./Tooltip-0ede3859.js";import"./Grid-86a1f343.js";import"./get-slot-a0e67e91.js";import"./Skeleton-8803bfe7.js";import"./use-houdini-2a8f5bbb.js";import"./Dropdown-ca523edc.js";import"./light-5ced6f1c.js";import"./create-ref-setter-ee697025.js";import"./Pagination-eed167c0.js";import"./light-f5dc26c8.js";import"./_common-89f2509f.js";import"./_common-991711fd.js";const A={class:"new-album"},C={class:"title"},x={class:"key"},S=a({__name:"NewAlbumView",setup(a){const{t:S}=t(),T=r(),k=s([]),L=s(0),P=s(30),N=s(T.currentRoute.value.query.page?Number(T.currentRoute.value.query.page):1),R=s(T.currentRoute.value.query.area?T.currentRoute.value.query.area:"ALL"),$=[{label:S("general.type.all"),value:"ALL"},{label:S("general.type.china"),value:"ZH"},{label:S("general.type.western"),value:"EA"},{label:S("general.type.japan"),value:"JP"},{label:S("general.type.korea"),value:"KR"}],D=(a,t=30,r=0)=>{e(a,t,r).then((e=>{L.value=e.total,k.value=[],e.albums?e.albums.forEach((e=>{k.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:b(e.publishTime)})})):$message.error(S("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};l((()=>T.currentRoute.value),(e=>{R.value=e.query.area?e.query.area:"ALL",N.value=Number(e.query.page?e.query.page:1),"new-album"==e.name&&D(R.value,P.value,(N.value-1)*P.value)}));const F=e=>{P.value=e,D(R.value,e,(N.value-1)*P.value)},I=e=>{T.push({path:"/new-album",query:{area:R.value,page:e}})};return o((()=>{$setSiteTitle(S("home.title.newAlbum")),D(R.value,P.value,(N.value-1)*P.value)})),(e,a)=>{const t=_,r=q;return i(),u("div",A,[m("div",C,[m("span",x,p(e.$t("home.title.newAlbum")),1)]),n(r,{class:"category"},{default:j((()=>[(i(),u(d,null,y($,(e=>n(t,{class:"tag",round:"",key:e,bordered:!1,type:e.value==v(R)?"primary":"default",onClick:a=>{return t=e.value,void T.push({path:"/new-album",query:{area:t,page:1}});var t}},{default:j((()=>[h(p(e.label),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),n(f,{listData:v(k),listType:"album"},null,8,["listData"]),v(k)[0]?(i(),g(w,{key:0,pageNumber:v(N),totalCount:v(L),onPageSizeChange:F,onPageNumberChange:I},null,8,["pageNumber","totalCount"])):c("",!0)])}}},[["__scopeId","data-v-c7226567"]]);export{S as default};
