import{_ as t,e,f as i,am as s,S as n,o as a,c as o,m as r,v as l,d as h,b as c,F as d,x as p,t as u,p as v,l as f}from"./index-c72c5b0c.js";function m(t,e){return t+Math.floor(Math.random()*(e-t+1))}function w(t,e,i){return(t/i*(t/i)+e/i*(e/i)-1)*(t/i*(t/i)+e/i*(e/i)-1)*(t/i*(t/i)+e/i*(e/i)-1)-t/i*(t/i)*(e/i)*(e/i)*(e/i)<0}class g{constructor(t,e){this.x=t||0,this.y=e||0}clone(){return new g(this.x,this.y)}add(t){let e=this.clone();return e.x+=t.x,e.y+=t.y,e}sub(t){let e=this.clone();return e.x-=t.x,e.y-=t.y,e}div(t){let e=this.clone();return e.x/=t,e.y/=t,e}mul(t){let e=this.clone();return e.x*=t,e.y*=t,e}}class y{constructor(){let t,e,i,s=[];for(let n=10;n<30;n+=.2)i=n/Math.PI,t=16*Math.pow(Math.sin(i),3),e=13*Math.cos(i)-5*Math.cos(2*i)-2*Math.cos(3*i)-Math.cos(4*i),s.push(new g(t,e));this.points=s,this.length=s.length}get(t,e){return this.points[t].mul(e||1)}}class x{constructor(t,e,i,s){this.tree=t,i=i||1,s=s||"#FF0000",this.heart={point:e,scale:i,color:s,figure:new y},this.cirle={point:e,scale:i,color:s,radius:5}}draw(){this.drawHeart(),this.drawText()}addPosition(t,e){this.cirle.point=this.cirle.point.add(new g(t,e))}canMove(){return this.cirle.point.y<this.tree.height+20}move(t,e){this.clear(),this.drawCirle(),this.addPosition(t,e)}canScale(){return this.heart.scale>.2}setHeartScale(t){this.heart.scale*=t}scale(t){this.clear(),this.drawCirle(),this.drawHeart(),this.setHeartScale(t)}drawHeart(){var t=this.tree.ctx,e=this.heart,i=e.point,s=e.color,n=e.scale;t.save(),t.fillStyle=s,t.translate(i.x,i.y),t.beginPath(),t.moveTo(0,0);for(var a=0;a<e.figure.length;a++){var o=e.figure.get(a,n);t.lineTo(o.x,-o.y)}t.closePath(),t.fill(),t.restore()}drawCirle(){var t=this.tree.ctx,e=this.cirle,i=e.point,s=e.color,n=e.scale,a=e.radius;t.save(),t.fillStyle=s,t.translate(i.x,i.y),t.scale(n,n),t.beginPath(),t.moveTo(0,0),t.arc(0,0,a,0,2*Math.PI),t.closePath(),t.fill(),t.restore()}drawText(){var t=this.tree.ctx,e=this.heart,i=e.point,s=e.color,n=e.scale;t.save(),t.strokeStyle=s,t.fillStyle=s,t.translate(i.x,i.y),t.scale(n,n),t.moveTo(0,0),t.lineTo(15,15),t.lineTo(50,15),t.stroke(),t.moveTo(0,0),t.lineTo(-15,15),t.lineTo(-50,15),t.stroke(),t.moveTo(0,0),t.scale(.75,.75),t.font="12px 微软雅黑,Verdana",t.fillText("ZYX",30,16),t.fillText("WLG",-55,16),t.restore()}clear(){var t=this.tree.ctx,e=this.cirle,i=e.point,s=26*e.scale*2,n=s;t.clearRect(i.x-s,i.y-n,4*s,4*n)}hover(t,e){const i=this.heart.point,s=t-i.x,n=e-i.y;return Math.sqrt(s*s+n*n)<50*this.heart.scale}}class b{constructor(t,e,i,s){this.tree=t,this.point=new g(t.seed.heart.point.x,t.height-i/2),this.width=e,this.height=i,this.speed=s||2,this.length=0}draw(){var t=this.tree.ctx,e=this.point,i=this.length/2;t.save(),t.strokeStyle="rgb(35, 31, 32)",t.lineWidth=this.height,t.lineCap="round",t.lineJoin="round",t.translate(e.x,e.y),t.beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.lineTo(-i,0),t.stroke(),t.restore(),this.length<this.width&&(this.length+=this.speed)}}class T{constructor(t,e,i,s,n,a,o){this.tree=t,this.point1=e,this.point2=i,this.point3=s,this.radius=n,this.length=a||100,this.len=0,this.t=1/(this.length-1),this.branchs=o||[]}grow(){var t,e,i,s,n,a,o=this;o.len<=o.length?(e=[o.point1,o.point2,o.point3],i=o.len*o.t,s=e[0].mul((1-i)*(1-i)),n=e[1].mul(2*i*(1-i)),a=e[2].mul(i*i),t=s.add(n).add(a),o.draw(t),o.len+=1,o.radius*=.97):(o.tree.removeBranch(o),o.tree.addBranchs(o.branchs))}draw(t){var e=this.tree.ctx;e.save(),e.beginPath(),e.fillStyle="rgb(35, 31, 32)",e.shadowColor="rgb(35, 31, 32)",e.shadowBlur=2,e.moveTo(t.x,t.y),e.arc(t.x,t.y,this.radius,0,2*Math.PI),e.closePath(),e.fill(),e.restore()}}class M{constructor(t,e,i,s,n,a,o,r,l){this.tree=t,this.point=e,this.color=s||"rgb(255,"+m(0,255)+","+m(0,255)+")",this.alpha=n||m(.3,1),this.angle=a||m(0,360),this.scale=o||.1,this.place=r,this.speed=l,this.figure=i}setFigure(t){this.figure=t}flower(){var t=this;t.draw(),t.scale+=.1,t.scale>1&&t.tree.removeBloom(t)}draw(){var t=this,e=t.tree.ctx,i=t.figure;e.save(),e.fillStyle=t.color,e.globalAlpha=t.alpha,e.translate(t.point.x,t.point.y),e.scale(t.scale,t.scale),e.rotate(t.angle),e.beginPath(),e.moveTo(0,0);for(var s=0;s<i.length;s++){var n=i.get(s);e.lineTo(n.x,-n.y)}e.closePath(),e.fill(),e.restore()}jump(){var t=this,e=t.tree.height;t.point.x<-20||t.point.y>e+20?t.tree.removeBloom(t):(t.draw(),t.point=t.place.sub(t.point).div(t.speed).add(t.point),t.angle+=.05,t.speed-=1)}}class S{constructor(t,e,i,s){this.canvas=t,this.ctx=t.getContext("2d"),this.width=e,this.height=i,this.opt=s||{},this.record={},this.initSeed(),this.initFooter(),this.initBranch(),this.initBloom()}initSeed(){var t=this.opt.seed||{},e=t.x||this.width/2,i=t.y||this.height/2,s=new g(e,i),n=t.color||"#FF0000",a=t.scale||1;this.seed=new x(this,s,a,n)}initFooter(){var t=this.opt.footer||{},e=t.width||this.width,i=t.height||5,s=t.speed||2;this.footer=new b(this,e,i,s)}initBranch(){var t=this.opt.branch||[];this.branchs=[],this.addBranchs(t)}initBloom(){for(var t=this.opt.bloom||{},e=[],i=t.num||500,s=t.width||this.width,n=t.height||this.height,a=this.seed.heart.figure,o=0;o<i;o++)e.push(this.createBloom(s,n,240,a));this.blooms=[],this.bloomsCache=e}toDataURL(t){return this.canvas.toDataURL(t)}draw(t){var e=this.ctx,i=this.record[t];if(i){var s=i.point,n=i.image;e.save(),e.putImageData(n,s.x,s.y),e.restore()}}addBranch(t){this.branchs.push(t)}addBranchs(t){for(var e,i,s,n,a,o,r,l=0;l<t.length;l++)e=t[l],i=new g(e[0],e[1]),s=new g(e[2],e[3]),n=new g(e[4],e[5]),a=e[6],o=e[7],r=e[8],this.addBranch(new T(this,i,s,n,a,o,r))}removeBranch(t){for(var e=this.branchs,i=0;i<e.length;i++)e[i]===t&&e.splice(i,1)}canGrow(){return!!this.branchs.length}grow(){for(var t=this.branchs,e=0;e<t.length;e++){var i=t[e];i&&i.grow()}}addBloom(t){this.blooms.push(t)}removeBloom(t){for(var e=this.blooms,i=0;i<e.length;i++)e[i]===t&&e.splice(i,1)}createBloom(t,e,i,s,n,a,o,r,l,h){for(var c,d;;)if(w((c=m(20,t-20))-t/2,e-(e-40)/2-(d=m(20,e-20)),i))return new M(this,new g(c,d),s,n,a,o,r,l,h)}canFlower(){return!!this.blooms.length}flower(t){for(var e=this,i=e.bloomsCache.splice(0,t),s=0;s<i.length;s++)e.addBloom(i[s]);i=e.blooms;for(var n=0;n<i.length;n++)i[n].flower()}snapshot(t,e,i,s,n){var a=this.ctx.getImageData(e,i,s,n);this.record[t]={image:a,point:new g(e,i),width:s,height:n}}setSpeed(t,e){this.record[t||"move"].speed=e}move(t,e,i){var s=this.ctx,n=this.record[t||"move"],a=n.point,o=n.image,r=n.speed||10,l=n.width,h=n.height,c=a.x+r<e?a.x+r:e,d=a.y+r<i?a.y+r:i;return s.save(),s.clearRect(a.x,a.y,l,h),s.putImageData(o,c,d),s.restore(),n.point=new g(c,d),n.speed=.95*r,n.speed<2&&(n.speed=2),c<e||d<i}jump(){var t=this.blooms;if(t.length)for(var e=0;e<t.length;e++)t[e].jump();if(t.length&&t.length<6||!t.length){var i=this.opt.bloom||{},s=i.width||this.width,n=i.height||this.height,a=this.seed.heart.figure;for(e=0;e<m(1,2);e++)t.push(this.createBloom(s/2+s,n,240,a,null,1,null,1,new g(m(-100,600),720),m(200,300)))}}}!function(){var t=["#D61C59","#FF4500","#FF6347"],e=window.innerWidth,i={x:e/2,y:e/2},s=[],n=0,a=50;function o(t){e=window.innerWidth}function r(e){i.x=e.clientX,i.y=e.clientY;var o,r,l,c,d=Date.now();d-n>a&&(o=i.x,r=i.y,l=t[Math.floor(Math.random()*t.length)],(c=new h).init(o,r,l),s.push(c),n=d)}function l(){requestAnimationFrame(l),function(){for(var t=0;t<s.length;t++)s[t].update();for(t=s.length-1;t>=0;t--)s[t].lifeSpan<0&&(s[t].die(),s.splice(t,1))}()}function h(){this.character="❤",this.lifeSpan=120,this.initialStyles={position:"fixed",display:"inline-block",top:"0px",left:"0px",pointerEvents:"none","touch-action":"none","z-index":"10000000",fontSize:"25px","will-change":"transform"},this.init=function(t,e,i){this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:1},this.position={x:t+10,y:e+10},this.initialStyles.color=i,this.element=document.createElement("span"),this.element.innerHTML=this.character,function(t,e){for(var i in e)t.style[i]=e[i]}(this.element,this.initialStyles),this.update(),document.querySelector("body").appendChild(this.element)},this.update=function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.lifeSpan--,this.element.style.transform="translate3d("+this.position.x+"px,"+this.position.y+"px, 0) scale("+this.lifeSpan/120+")"},this.die=function(){this.element.parentNode.removeChild(this.element)}}"ontouchstart"in window||navigator.msMaxTouchPoints||(document.addEventListener("mousemove",r),window.addEventListener("resize",o),l())}();const k=t=>(v("data-v-7359c6e8"),t=t(),f(),t),B={id:"main"},L=k((()=>h("audio",{autoplay:"autopaly"},[h("source",{src:"/mp3/love.mp3",type:"audio/mp3"})],-1))),C={id:"error"},P=k((()=>h("a",{href:"http://www.google.cn/chrome/intl/zh-CN/landing_chrome.html?hl=zh-CN&brand=CHMI"},"Chrome",-1))),F=k((()=>h("a",{href:"http://firefox.com.cn/download/"},"Firefox",-1))),I={id:"wrap"},E={id:"text"},H=k((()=>h("br",null,null,-1))),R=k((()=>h("span",{class:"say"},null,-1))),_=k((()=>h("br",null,null,-1))),D={id:"clock-box-inside-text"},z=k((()=>h("span",{class:"STYLE1"},"与",-1))),W=k((()=>h("span",{class:"STYLE1"},"已经相恋了",-1))),Y=t({__name:"index",setup(t){const v=["亲爱的宝贝","花开一季，有落红为证","逝去的岁月，如何能托于烟尘","我总是惹你生气，但我们在一起的每一刻我都会记在心里，我会更加用心","我的唯一，我永远永远爱你","爱你"],f="2019-08-15T16:33:55",m=["WLG","ZYX"],w=e(null),g=e(null),y=e(null),x=e(null),b=e(!1);function T(t){const e=(+new Date-t.getTime())/1e3;let i=Math.floor(e/86400),s=e%86400,n=Math.floor(s/3600);n<10&&(n="0"+n),s%=3600;let a=Math.floor(s/60);a<10&&(a="0"+a);let o=Math.floor(s%60);o=(o+"").replace(/\.\d*/,"");const r='第 <span class="digit">'+i+'</span> 天 <span class="digit">'+n+'</span> 小时 <span class="digit">'+a+'</span> 分钟 <span class="digit">'+o+"</span> 秒";x.value.innerHTML=r,0!=parseInt(i/365)?document.title="在一起"+parseInt(i/365)+"年,感谢相伴!":0!=parseInt(i/30)?document.title="在一起"+parseInt(i/30)+"个月,感谢相伴!":document.title="在一起"+i+"天,感谢相伴!"}let M=null;function k(t){return new Promise((e=>setTimeout(e,t)))}let Y=null;function j(){const t=w.value;if(!t)return;const e=t.parentElement.clientWidth||window.innerWidth,i=t.parentElement.clientHeight||.8*window.innerHeight;t.width=e,t.height=i,t.style.width=e+"px",t.style.height=i+"px"}return i((async()=>{await s(),j(),window.addEventListener("resize",(()=>{Y&&clearTimeout(Y),Y=setTimeout(j,200)}));const t=w.value;if(!t.getContext)return void(b.value=!0);const e=t.width,i=t.height,n=new S(t,e,i,{seed:{x:e/2-20,color:"rgb(190, 26, 37)",scale:2},branch:[[535,680,570,250,500,200,30,100,[[540,500,455,417,340,400,13,100,[[450,435,434,430,394,395,2,40]]],[550,445,600,356,680,345,12,100,[[578,400,648,409,661,426,3,80]]],[539,281,537,248,534,217,3,40],[546,397,413,247,328,244,9,80,[[427,286,383,253,371,205,2,40],[498,345,435,315,395,330,4,60]]],[546,357,608,252,678,221,6,100,[[590,293,646,277,648,271,2,80]]]]]],bloom:{num:800,width:e,height:i},footer:{width:1200,height:5,speed:10}}),a=n.seed,o=n.footer;let r=1;const l=e=>{const i=t.getBoundingClientRect(),s=e.clientX-i.left,n=e.clientY-i.top;a.hover(s,n)&&(r=0,t.removeEventListener("click",l),t.removeEventListener("mousemove",h),t.classList.remove("hand"))},h=e=>{const i=t.getBoundingClientRect(),s=e.clientX-i.left,n=e.clientY-i.top,o=a.hover(s,n);t.classList.toggle("hand",o),t.title=o?"点击这里开始":""};t.addEventListener("click",l),t.addEventListener("mousemove",h);try{await async function(){for(a.draw();r;)await k(10);for(;a.canScale();)a.scale(.95),await k(10);for(;a.canMove();)a.move(0,2),o.draw(),await k(10)}(),await async function(){do{n.grow(),await k(10)}while(n.canGrow())}(),await async function(){do{n.flower(2),await k(10)}while(n.canFlower())}(),await async function(){for(n.snapshot("p1",240,0,610,680);n.move("p1",500,0);)o.draw(),await k(10);o.draw(),n.snapshot("p2",500,0,610,680),t.parentNode.style.background="url("+n.toDataURL("image/png")+")",t.style.background="#ffe",await k(300),t.style.background="none"}(),await function(){const t=new Date(f);return g.value.style.display="block",function(t){const e=t.innerHTML;let i=0;t.innerHTML="";const s=setInterval((()=>{"<"==e.substr(i,1)?i=e.indexOf(">",i)+1:i++,t.innerHTML=e.substring(0,i)+(1&i?"_":""),i>=e.length&&clearInterval(s)}),75)}(g.value),y.value.style.display="block",M=setInterval((()=>{T(t)}),1e3),T(t),Promise.resolve()}(),async function(){for(;;)n.ctx.clearRect(0,0,e,i),n.jump(),o.draw(),await k(25)}()}catch(c){console.error("动画执行出错:",c)}})),n((()=>{M&&clearInterval(M),window.removeEventListener("resize",(()=>{Y&&clearTimeout(Y),Y=setTimeout(j,200)}))})),(t,e)=>(a(),o("div",B,[L,r(h("div",C,[c(" 本页面采用HTML5编辑，目前您的浏览器无法显示，请换成谷歌("),P,c(")或者火狐("),F,c(")浏览器，或者其他游览器的最新版本。 ")],512),[[l,b.value]]),h("div",I,[h("div",E,[h("div",{id:"code",ref_key:"codeRef",ref:g},[(a(!0),o(d,null,p(v,((t,e)=>(a(),o("span",{key:e,class:"say"},[c(u(t)+" ",1),H,R,_])))),128))],512)]),h("div",{id:"clock-box",ref_key:"clockBoxRef",ref:y},[h("span",D,[c(u(m[0]),1),z,c(u(m[1]),1),W]),h("div",{id:"clock",ref_key:"clockRef",ref:x},null,512)],512),h("canvas",{id:"canvas",ref_key:"canvasRef",ref:w},null,512)])]))}},[["__scopeId","data-v-7359c6e8"]]);export{Y as default};
