import{c2 as e,a as s,_ as o,cN as t,cB as i,cO as a,e as r,f as l,Y as n,u as m,o as p,c,d,w as u,k as j,q as g,F as f,x as h,dm as v,dy as y,dc as C,bO as k,b as _,t as T,de as b,g as L}from"./index-c72c5b0c.js";import{g as x,C as w}from"./index-1b33abe7.js";import{A as $}from"./AllArtists-b2fee903.js";import{C as P}from"./CoverLists-b729b53c.js";import{A as D}from"./AddPlaylist-fbffd947.js";import{g as M}from"./getCoverUrl-bb08aa65.js";import{T as H}from"./Time-69873e21.js";import{_ as A}from"./Image-6ba3d672.js";import{_ as F}from"./text-64fc9966.js";import{_ as I}from"./Space-5d75b1a8.js";import{a as S}from"./headers-9bed30c4.js";import{P as U}from"./People-26086f57.js";import{R as V,L as R,C as q}from"./RecordDisc-b91e091f.js";import{P as E}from"./PlayOne-22adba7e.js";import{_ as O}from"./LinkTwo-8d6bc0a2.js";import{_ as B}from"./Tag-827106b2.js";import{_ as N}from"./Divider-de4c325a.js";import"./Skeleton-163a49d9.js";import"./use-houdini-1a86f12f.js";import"./album-8a3f3da2.js";import"./Input-b4caa030.js";import"./Suffix-af55cfcd.js";import"./index-92eb66c0.js";import"./use-merged-state-74230ec8.js";import"./light-6c88686a.js";import"./FormItem-e0127deb.js";import"./light-8d6c1748.js";import"./Popover-87b27d79.js";import"./light-cb0cf260.js";import"./Follower-ef4b8179.js";import"./next-frame-once-924ab492.js";import"./cssr-ed8d5782.js";import"./use-compitable-a1866e01.js";import"./Select-714380b7.js";import"./create-07671515.js";import"./light-20fa43af.js";import"./light-170bfcda.js";import"./Empty-3e1da814.js";import"./Unlike-d603c2d2.js";import"./Grid-1728937a.js";import"./get-slot-a0e67e91.js";import"./DeleteFour-7678c621.js";import"./Dropdown-db0b14d8.js";import"./light-37eaa122.js";import"./create-ref-setter-ee697025.js";import"./CreatePlaylist-a7b4fb4f.js";import"./Checkbox-edaaabdb.js";import"./light-c071e0c7.js";import"./Avatar-62f97100.js";import"./utils-48198701.js";import"./light-4ec95d76.js";import"./light-a43afc3c.js";import"./Tooltip-f5342231.js";import"./light-a7677734.js";import"./_common-89f2509f.js";import"./light-bf1b7eb7.js";import"./_common-991711fd.js";import"./light-5d80b650.js";const W=e("youtube",!0,(function(e){return s("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M11.0637 10.4144C16.6069 10.1381 20.9183 10 23.998 10C27.0781 10 31.3911 10.1382 36.937 10.4145V10.4145C39.9391 10.5641 42.3672 12.9119 42.6176 15.9072C42.8712 18.9412 42.998 21.6134 42.998 23.9238C42.998 26.2626 42.8681 28.972 42.6082 32.0522H42.6082C42.3586 35.0103 39.9833 37.3412 37.021 37.5349C32.2796 37.845 27.9386 38 23.998 38C20.058 38 15.7186 37.845 10.9798 37.5351V37.5351C8.01852 37.3414 5.6437 35.0119 5.39288 32.055C5.12966 28.9518 4.99805 26.2414 4.99805 23.9238C4.99805 21.6341 5.12651 18.961 5.38345 15.9044L5.38346 15.9044C5.63514 12.9103 8.06274 10.564 11.0637 10.4144Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),s("path",{d:"M21 19.6092V28.406C21 28.8794 21.3838 29.2631 21.8571 29.2631C22.0252 29.2631 22.1896 29.2137 22.3298 29.1211L28.9274 24.7605C29.3223 24.4995 29.4308 23.9677 29.1698 23.5728C29.1074 23.4784 29.0269 23.3973 28.933 23.3341L22.3354 18.8979C21.9426 18.6337 21.41 18.7381 21.1458 19.1309C21.0508 19.2723 21 19.4388 21 19.6092Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])})),Z={key:0,class:"song"},z={class:"detail"},G={class:"pic"},Y={class:"cover-loading"},J={class:"right"},K={class:"intr"},Q={class:"item"},X={class:"item"},ee={key:1,class:"item"},se={key:0,class:"comments"},oe={class:"content"},te={key:1,class:"simiPlayList"},ie=o({__name:"SongView",setup(e){const{t:o}=t(),ie=i(),ae=a(),re=r(null),le=r(ie.currentRoute.value.query.id),ne=r(null),me=r([]),pe=r([]),ce=e=>{v(e).then((s=>{s.songs[0]?(ne.value=s.songs[0],$setSiteTitle(s.songs[0].name+" - "+s.songs[0].ar[0].name+" - "+o("general.name.song")),de(e),ue(e),"undefined"!=typeof $scrollToTop&&$scrollToTop()):$message.error(o("general.message.acquisitionFailed"))}))},de=e=>{x(e).then((e=>{e.total>0&&(me.value=e.hotComments)})).catch((e=>{console.error(o("general.message.acquisitionFailed"),e),$message.error(o("general.message.acquisitionFailed"))}))},ue=e=>{y(e).then((e=>{pe.value=[],e.playlists.forEach((e=>{pe.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:C(e.playCount)})}))}))};return l((()=>{le.value&&ce(le.value)})),n((()=>ie.currentRoute.value),(e=>{le.value=e.query.id,"song"==e.name&&ce(le.value)})),(e,o)=>{var t,i,a;const r=O,l=A,n=F,v=B,y=I,C=k,x=L,ce=S,de=N;return m(ne)?(p(),c("div",Z,[d("div",z,[d("div",G,[s(l,{"show-toolbar-tooltip":"",class:"coverImg","previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":m(M)(null==(t=m(ne))?void 0:t.al.picUrl),src:m(M)(null==(i=m(ne))?void 0:i.al.picUrl,1024),"fallback-src":"/img/music/pic/default.png"},{placeholder:u((()=>[d("div",Y,[s(r)])])),_:1},8,["preview-src","src"]),s(l,{class:"shadow","preview-disabled":"",src:m(M)(null==(a=m(ne))?void 0:a.al.picUrl,1024),"fallback-src":"/img/music/pic/default.png"},null,8,["src"])]),d("div",J,[d("div",K,[s(n,{class:"name text-hidden",innerHTML:m(ne).name},null,8,["innerHTML"]),m(ne).alia[0]?(p(),j(n,{key:0,depth:"3",class:"alia",innerHTML:m(ne).alia[0]},null,8,["innerHTML"])):g("",!0),s(y,{class:"tag"},{default:u((()=>[1==m(ne).fee||4==m(ne).fee?(p(),j(v,{key:0,class:"vip",round:"",bordered:!1},{default:u((()=>[_(T(1==m(ne).fee?"VIP":"EP"),1)])),_:1})):g("",!0),m(ne).pc?(p(),j(v,{key:1,class:"cloud",round:"",type:"info",bordered:!1},{default:u((()=>[_(T(e.$t("general.name.cloud")),1)])),_:1})):g("",!0)])),_:1}),d("div",Q,[s(C,{depth:3,component:m(U)},null,8,["component"]),m(ne).ar?(p(),j($,{key:0,artistsData:m(ne).ar,isDark:!1},null,8,["artistsData"])):g("",!0)]),d("div",X,[s(C,{depth:3,component:m(V)},null,8,["component"]),s(n,{class:"text",innerHTML:m(ne).al.name,onClick:o[0]||(o[0]=e=>m(ie).push(`/music/album?id=${m(ne).al.id}`))},null,8,["innerHTML"])]),m(ne).publishTime?(p(),c("div",ee,[s(C,{depth:3,component:m(H)},null,8,["component"]),s(n,{class:"text",innerHTML:m(b)(m(ne).publishTime)},null,8,["innerHTML"])])):g("",!0)]),s(y,{class:"button"},{default:u((()=>[s(x,{type:"primary",strong:"",secondary:"",onClick:o[1]||(o[1]=e=>(e=>{const s={album:e.al,artist:e.ar,fee:e.fee,id:e.id,name:e.name};ae.setPersonalFmMode(!1),ae.addSongToPlaylists(s)})(m(ne)))},{icon:u((()=>[s(C,{component:m(E)},null,8,["component"])])),default:u((()=>[_(" "+T(e.$t("general.name.play")),1)])),_:1}),s(x,{strong:"",secondary:"",onClick:o[2]||(o[2]=e=>m(re).openAddToPlaylist(m(le)))},{icon:u((()=>[s(C,{component:m(R)},null,8,["component"])])),default:u((()=>[_(" "+T(e.$t("general.name.add")),1)])),_:1}),s(x,{strong:"",secondary:"",onClick:o[3]||(o[3]=e=>m(ie).push(`/music/comment?id=${m(ne).id}&page=1`))},{icon:u((()=>[s(C,{component:m(q)},null,8,["component"])])),default:u((()=>[_(" "+T(e.$t("general.name.comment")),1)])),_:1}),m(ne).mv?(p(),j(x,{key:0,strong:"",secondary:"",onClick:o[4]||(o[4]=e=>m(ie).push(`/music/video?id=${m(ne).mv}`))},{icon:u((()=>[s(C,{component:m(W)},null,8,["component"])])),default:u((()=>[_(" MV ")])),_:1})):g("",!0)])),_:1})])]),m(me)[0]?(p(),c("div",se,[s(ce,{prefix:"bar"},{default:u((()=>[_(T(e.$t("general.name.hotComments")),1)])),_:1}),d("div",oe,[(p(!0),c(f,null,h(m(me),(e=>(p(),j(w,{key:e,commentData:e},null,8,["commentData"])))),128))])])):g("",!0),m(pe)[0]?(p(),c("div",te,[s(de),s(ce,{prefix:"bar"},{default:u((()=>[_(T(e.$t("other.containing")),1)])),_:1}),s(P,{listData:m(pe)},null,8,["listData"])])):g("",!0),s(D,{ref_key:"addPlayListRef",ref:re},null,512)])):g("",!0)}}},[["__scopeId","data-v-08f9dcc0"]]);export{ie as default};
