import{B as t,D as e,bp as o,bq as r,br as n,e as l,f as a,J as s,i,I as d,O as f,y as p,a8 as u,be as h,bs as c,m,bt as g,bh as v,Y as b,am as x,Z as $,aJ as w,z as y,bu as M,bv as z}from"./index-d93ecfd9.js";import{b as B}from"./next-frame-once-924ab492.js";import{c as T,a as S,o as R}from"./cssr-2139d5e3.js";const Y=t("n-internal-select-menu"),X=t("n-internal-select-menu-body"),E="__disabled__";function L(t){const p=e(o,null),u=e(r,null),h=e(n,null),c=e(X,null),m=l();if("undefined"!=typeof document){m.value=document.fullscreenElement;const t=()=>{m.value=document.fullscreenElement};a((()=>{s("fullscreenchange",document,t)})),i((()=>{d("fullscreenchange",document,t)}))}return f((()=>{var e;const{to:o}=t;return void 0!==o?!1===o?E:!0===o?m.value||"body":o:(null==p?void 0:p.value)?null!==(e=p.value.$el)&&void 0!==e?e:p.value:(null==u?void 0:u.value)?u.value:(null==h?void 0:h.value)?h.value:(null==c?void 0:c.value)?c.value:null!=o?o:m.value||"body"}))}L.tdkey=E,L.propTo={type:[String,Object,Boolean],default:void 0};let C=null;function P(){if(null===C&&(C=document.getElementById("v-binder-view-measurer"),null===C)){C=document.createElement("div"),C.id="v-binder-view-measurer";const{style:t}=C;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(C)}return C.getBoundingClientRect()}function A(t){const e=t.getBoundingClientRect(),o=P();return{left:e.left-o.left,top:e.top-o.top,bottom:o.height+o.top-e.bottom,right:o.width+o.left-e.right,width:e.width,height:e.height}}function I(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:o,overflowY:r}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+r+o))return e}return I(e)}const D=p({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var o;u("VBinder",null===(o=h())||void 0===o?void 0:o.proxy);const r=e("VBinder",null),n=l(null);let a=[];const f=()=>{for(const t of a)d("scroll",t,c,!0);a=[]},p=new Set,c=()=>{B(m)},m=()=>{p.forEach((t=>t()))},g=new Set,v=()=>{g.forEach((t=>t()))};return i((()=>{d("resize",window,v),f()})),{targetRef:n,setTargetRef:e=>{n.value=e,r&&t.syncTargetWithParent&&r.setTargetRef(e)},addScrollListener:t=>{0===p.size&&(()=>{let t=n.value;for(;t=I(t),null!==t;)a.push(t);for(const e of a)s("scroll",e,c,!0)})(),p.has(t)||p.add(t)},removeScrollListener:t=>{p.has(t)&&p.delete(t),0===p.size&&f()},addResizeListener:t=>{0===g.size&&s("resize",window,v),g.has(t)||g.add(t)},removeResizeListener:t=>{g.has(t)&&g.delete(t),0===g.size&&d("resize",window,v)}}},render(){return c("binder",this.$slots)}}),V=p({name:"Target",setup(){const{setTargetRef:t,syncTarget:o}=e("VBinder");return{syncTarget:o,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?m(g("follower",this.$slots),[[e]]):g("follower",this.$slots)}}),W={top:"bottom",bottom:"top",left:"right",right:"left"},j={start:"end",center:"center",end:"start"},N={top:"height",bottom:"height",left:"width",right:"width"},O={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},_={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},J={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},k={top:!0,bottom:!1,left:!0,right:!1},q={top:"end",bottom:"start",left:"end",right:"start"};const F=T([T(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),T(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[T("> *",{pointerEvents:"all"})])]),Z=p({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const o=e("VBinder"),r=f((()=>void 0!==t.enabled?t.enabled:t.show)),n=l(null),s=l(null),d=()=>{const{syncTrigger:e}=t;e.includes("scroll")&&o.addScrollListener(h),e.includes("resize")&&o.addResizeListener(h)},p=()=>{o.removeScrollListener(h),o.removeResizeListener(h)};a((()=>{r.value&&(h(),d())}));const u=v();F.mount({id:"vueuc/binder",head:!0,anchorMetaName:S,ssr:u}),i((()=>{p()})),R((()=>{r.value&&h()}));const h=()=>{if(!r.value)return;const e=n.value;if(null===e)return;const l=o.targetRef,{x:a,y:i,overlap:d}=t,f=void 0!==a&&void 0!==i?function(t,e){const o=P();return{top:e,left:t,height:0,width:0,right:o.width-t,bottom:o.height-e}}(a,i):A(l);e.style.setProperty("--v-target-width",`${Math.round(f.width)}px`),e.style.setProperty("--v-target-height",`${Math.round(f.height)}px`);const{width:p,minWidth:u,placement:h,internalShift:c,flip:m}=t;e.setAttribute("v-placement",h),d?e.setAttribute("v-overlap",""):e.removeAttribute("v-overlap");const{style:g}=e;g.width="target"===p?`${f.width}px`:void 0!==p?p:"",g.minWidth="target"===u?`${f.width}px`:void 0!==u?u:"";const v=A(e),b=A(s.value),{left:x,top:$,placement:w}=function(t,e,o,r,n,l){if(!n||l)return{placement:t,top:0,left:0};const[a,s]=t.split("-");let i=null!=s?s:"center",d={top:0,left:0};const f=(t,n,l)=>{let a=0,s=0;const i=o[t]-e[n]-e[t];return i>0&&r&&(l?s=k[n]?i:-i:a=k[n]?i:-i),{left:a,top:s}},p="left"===a||"right"===a;if("center"!==i){const r=J[t],n=W[r],l=N[r];if(o[l]>e[l]){if(e[r]+e[l]<o[l]){const t=(o[l]-e[l])/2;e[r]<t||e[n]<t?e[r]<e[n]?(i=j[s],d=f(l,n,p)):d=f(l,r,p):i="center"}}else o[l]<e[l]&&e[n]<0&&e[r]>e[n]&&(i=j[s])}else{const t="bottom"===a||"top"===a?"left":"top",r=W[t],n=N[t],l=(o[n]-e[n])/2;(e[t]<l||e[r]<l)&&(e[t]>e[r]?(i=q[t],d=f(n,t,p)):(i=q[r],d=f(n,r,p)))}let u=a;return e[a]<o[N[a]]&&e[a]<e[W[a]]&&(u=W[a]),{placement:"center"!==i?`${u}-${i}`:u,left:d.left,top:d.top}}(h,f,v,c,m,d),y=function(t,e){return e?_[t]:O[t]}(w,d),{left:M,top:z,transform:B}=function(t,e,o,r,n,l){if(l)switch(t){case"bottom-start":case"left-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(o.top-e.top)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left+o.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2)}px`,left:`${Math.round(o.left-e.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(o.top-e.top+o.height)}px`,left:`${Math.round(o.left-e.left+o.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:""};case"bottom-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:""};case"right-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(o.top-e.top+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+o.width+n)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(o.top-e.top+o.height/2+r)}px`,left:`${Math.round(o.left-e.left+n)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(o.top-e.top+o.height+r)}px`,left:`${Math.round(o.left-e.left+o.width/2+n)}px`,transform:"translateX(-50%)"}}}(w,b,f,$,x,d);e.setAttribute("v-placement",w),e.style.setProperty("--v-offset-left",`${Math.round(x)}px`),e.style.setProperty("--v-offset-top",`${Math.round($)}px`),e.style.transform=`translateX(${M}) translateY(${z}) ${B}`,e.style.setProperty("--v-transform-origin",y),e.style.transformOrigin=y};b(r,(t=>{t?(d(),c()):p()}));const c=()=>{x().then(h).catch((t=>console.error(t)))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((e=>{b($(t,e),h)})),["teleportDisabled"].forEach((e=>{b($(t,e),c)})),b($(t,"syncTrigger"),(t=>{t.includes("resize")?o.addResizeListener(h):o.removeResizeListener(h),t.includes("scroll")?o.addScrollListener(h):o.removeScrollListener(h)}));const m=w(),g=f((()=>{const{to:e}=t;if(void 0!==e)return e;m.value}));return{VBinder:o,mergedEnabled:r,offsetContainerRef:s,followerRef:n,mergedTo:g,syncPosition:h}},render(){return y(z,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const o=y("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[y("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))]);return this.zindexable?m(o,[[M,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):o}})}});export{D as V,V as a,Z as b,X as c,Y as i,L as u};
