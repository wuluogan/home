import{b as e}from"./search-199a9ff5.js";import{d8 as t,cP as s,e as r,Y as o,f as a,o as i,c as m,a as u,u as l,k as p,q as j,dQ as n}from"./index-d93ecfd9.js";import{C as g}from"./CoverLists-0e646f28.js";import{P as v}from"./index-e01b8113.js";import"./album-72ad8940.js";import"./AllArtists-e33e1687.js";import"./text-f881741e.js";import"./use-compitable-f583eb1a.js";import"./light-6dc1ea6d.js";import"./Input-19ebdc3b.js";import"./Suffix-1fd55ec3.js";import"./index-92eb66c0.js";import"./use-merged-state-bb55b613.js";import"./light-1b9db3a7.js";import"./FormItem-ccd063f6.js";import"./light-d411e82b.js";import"./Popover-92ca2497.js";import"./light-f76c98be.js";import"./Follower-829f72e1.js";import"./next-frame-once-924ab492.js";import"./cssr-2139d5e3.js";import"./Select-d00ca0af.js";import"./create-07671515.js";import"./light-25af1eec.js";import"./light-16e65505.js";import"./Tag-9bd41f20.js";import"./_common-991711fd.js";import"./Empty-d19cae85.js";import"./Space-76cfe381.js";import"./get-slot-a0e67e91.js";import"./_common-89f2509f.js";import"./getCoverUrl-bb08aa65.js";import"./Spin-c12f3861.js";import"./light-f8d78f18.js";import"./Image-46cbaef1.js";import"./utils-5d91cb42.js";import"./light-c2ad2c79.js";import"./Tooltip-0ede3859.js";import"./Grid-86a1f343.js";import"./Skeleton-8803bfe7.js";import"./use-houdini-2a8f5bbb.js";import"./Dropdown-ca523edc.js";import"./light-5ced6f1c.js";import"./create-ref-setter-ee697025.js";import"./Pagination-eed167c0.js";import"./light-f5dc26c8.js";const c={class:"albums"},h={__name:"albums",setup(h){const{t:d}=t(),b=s(),y=r(b.currentRoute.value.query.keywords),f=r([]),q=r(0),C=r(30),x=r(b.currentRoute.value.query.page?Number(b.currentRoute.value.query.page):1),S=(t,s=30,r=0,o=10)=>{e(t,s,r,o).then((e=>{q.value=e.result.albumCount,f.value=[],e.result.albums?e.result.albums.forEach((e=>{f.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:n(e.publishTime)})})):$message.error(d("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};o((()=>b.currentRoute.value),(e=>{y.value=e.query.keywords,x.value=Number(e.query.page?e.query.page:1),"s-albums"==e.name&&S(y.value,C.value,(x.value-1)*C.value)}));const T=e=>{C.value=e,S(y.value,e,(x.value-1)*C.value)},P=e=>{b.push({path:"/search/albums",query:{keywords:y.value,page:e}})};return a((()=>{S(y.value,C.value,(x.value-1)*C.value)})),(e,t)=>(i(),m("div",c,[u(g,{listData:l(f),listType:"album"},null,8,["listData"]),l(f)[0]?(i(),p(v,{key:0,pageNumber:l(x),totalCount:l(q),onPageSizeChange:T,onPageNumberChange:P},null,8,["pageNumber","totalCount"])):j("",!0)]))}};export{h as default};
