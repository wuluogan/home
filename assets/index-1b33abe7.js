import{c9 as e,_ as a,cN as t,cQ as s,cB as n,o as i,k as c,w as m,d as o,c as l,q as r,a as d,b as p,t as u,u as v,dv as k,j as D,dc as g,ac as h,c4 as f,an as y}from"./index-c72c5b0c.js";import{_ as L}from"./text-64fc9966.js";import{_ as T}from"./Skeleton-163a49d9.js";const _=(a,t=0,s=null,n="music")=>e({method:"GET",url:`/comment/${n}`,params:{id:a,offset:t,before:s,timestamp:(new Date).getTime()}}),b={class:"user"},R={class:"avatar"},j=["src"],x=["src"],C={key:0,class:"associator"},H=["src"],M={class:"review"},w={class:"content"},U={key:0,class:"beReplied"},I={class:"thing"},O={class:"item"},V={key:0,class:"item"},$=a({__name:"index",props:{commentData:{type:Object,default:{}}},setup(a){const{t:_}=t(),$=s(),q=n(),z=a,A=()=>{if($.userLogin){const a=z.commentData.liked?0:1;((a,t,s,n=0)=>e({method:"GET",hiddenBar:!0,url:"/comment/like",params:{id:a,cid:t,t:s,type:n,timestamp:(new Date).getTime()}}))(q.currentRoute.value.query.id,z.commentData.commentId,a).then((e=>{200===e.code?(z.commentData.liked=!z.commentData.liked,z.commentData.likedCount+=a?1:-1):$message.error(_("general.message.operationFailed"))}))}else $message.error(_("general.message.needLogin"))};return(e,t)=>{const s=L,n=f,_=y,$=T;return i(),c(h,{mode:"out-in"},{default:m((()=>[Object.keys(a.commentData).length?(i(),c(_,{key:0,class:"comment",hoverable:""},{default:m((()=>{var e,t,c;return[o("div",b,[o("div",R,[o("img",{class:"avatarImg",src:a.commentData.user.avatarUrl.replace(/^http:/,"https:")+"?param=50y50",alt:"avatar"},null,8,j),(null==(e=a.commentData.user.vipRights)?void 0:e.redVipAnnualCount)>0?(i(),l("img",{key:0,class:"musicPackage",src:a.commentData.user.vipRights.musicPackage.iconUrl.replace(/^http:/,"https:"),alt:"redVipAnnualCount",title:"网易音乐人"},null,8,x)):r("",!0)]),(null==(t=a.commentData.user.vipRights)?void 0:t.redVipLevel)>0?(i(),l("div",C,[a.commentData.user.vipRights.associator?(i(),l("img",{key:0,src:a.commentData.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"黑胶会员"},null,8,H)):r("",!0)])):r("",!0)]),o("div",M,[o("div",w,[d(s,{class:"name"},{default:m((()=>[p(u(a.commentData.user.nickname)+"：",1)])),_:1}),d(s,{class:"text",innerHTML:a.commentData.content},null,8,["innerHTML"])]),a.commentData.beReplied[0]?(i(),l("div",U,[d(s,{class:"name"},{default:m((()=>[p(" @"+u(a.commentData.beReplied[0].user.nickname)+"： ",1)])),_:1}),d(s,{class:"text"},{default:m((()=>[p(u(a.commentData.beReplied[0].content),1)])),_:1})])):r("",!0),o("div",I,[o("div",O,[d(n,{size:"14",depth:3,component:"Time"}),d(s,{depth:3,innerHTML:v(k)(a.commentData.time)},null,8,["innerHTML"])]),(null==(c=a.commentData.ipLocation)?void 0:c.location)?(i(),l("div",V,[d(n,{size:"14",depth:3,component:"Location"}),d(s,{depth:3,innerHTML:a.commentData.ipLocation.location},null,8,["innerHTML"])])):r("",!0),o("div",{class:D(a.commentData.liked?"like liked":"like"),onClick:A},[d(n,{component:"ThumbsUp"}),p(" "+u(v(g)(a.commentData.likedCount)),1)],2)])])]})),_:1})):(i(),c($,{key:1,class:"skeleton"}))])),_:1})}}},[["__scopeId","data-v-919575af"]]);export{$ as C,_ as g};
