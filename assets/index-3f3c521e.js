import{_ as e,cN as a,cB as s,cQ as t,e as l,f as i,Y as n,c5 as r,o,c,u,d as m,a as d,w as p,k as g,q as v,c8 as f,g as _,cv as $,b,t as S,ac as y,c6 as z,cD as h,p as j,l as k,c4 as L,bO as A}from"./index-c72c5b0c.js";import{a as C,l as T}from"./artist-5e2ec7cd.js";import{_ as U}from"./Avatar-62f97100.js";import{_ as x}from"./text-64fc9966.js";import{_ as q}from"./Space-5d75b1a8.js";import{a as w,b as D}from"./Tabs-aac9f9b1.js";import{_ as M}from"./Scrollbar-4274af02.js";import"./utils-48198701.js";import"./Tag-827106b2.js";import"./_common-991711fd.js";import"./light-4ec95d76.js";import"./use-compitable-a1866e01.js";import"./light-a7677734.js";import"./get-slot-a0e67e91.js";import"./_common-89f2509f.js";import"./Add-b088e338.js";import"./use-merged-state-74230ec8.js";import"./cssr-ed8d5782.js";import"./light-66678653.js";const N={class:"artist"},R={key:0,class:"artistData"},F={class:"cover"},I={class:"data"},B={class:"num"},H={key:1,class:"error"},P=(e=>(j("data-v-edd9ccea"),e=e(),k(),e))((()=>m("br",null,null,-1))),V={key:3,class:"content"},E=e({__name:"index",setup(e){const{t:j}=a(),k=s(),E=t(),K=l(k.currentRoute.value.query.id),O=l(null),Q=l(!1),Y=l(!1),G=l(k.currentRoute.value.path.split("/")[2]),J=e=>{e&&C(e).then((e=>{O.value={id:e.data.artist.id,name:e.data.artist.name,occupation:e.data.identify?e.data.identify.imageDesc:null,cover:e.data.artist.cover,desc:e.data.artist.briefDesc,albumSize:e.data.artist.albumSize,musicSize:e.data.artist.musicSize,mvSize:e.data.artist.mvSize},$setSiteTitle(e.data.artist.name+" - "+j("general.name.artists")),"undefined"!=typeof $scrollToTop&&$scrollToTop()})).catch((e=>{k.go(-1),console.error(j("general.message.acquisitionFailed"),e),$message.error(j("general.message.acquisitionFailed"))}))},W=e=>{k.push({path:`/music/artist/${e}`,query:{id:K.value,page:1}})},X=e=>{if(E.getUserArtistLists.list[0]){return-1===E.getUserArtistLists.list.findIndex((a=>a.id===Number(e)))}return!0};return i((()=>{J(K.value),Y.value=X(K.value),!E.userLogin||E.getUserArtistLists.has||E.getUserArtistLists.isLoading||E.setUserArtistLists((()=>{K.value,X(K.value),Y.value=X(K.value)}))})),n((()=>k.currentRoute.value),(e=>{K.value=e.query.id,G.value=e.path.split("/")[2],Y.value=X(K.value),"artist"==e.path.split("/")[1]&&J(K.value)})),(e,a)=>{const s=U,t=x,l=L,i=A,n=_,C=q,J=M,Z=$,ee=D,ae=w,se=r("router-view");return o(),c("div",N,[u(K)&&u(O)?(o(),c("div",R,[m("div",F,[d(s,{round:"",class:"coverImg",src:u(O).cover.replace(/^http:/,"https:")+"?param=300y300","fallback-src":"/img/music/pic/default.png"},null,8,["src"])]),m("div",I,[d(t,{class:"name"},{default:p((()=>[b(S(u(O).name),1)])),_:1}),d(t,{class:"occupation",depth:3},{default:p((()=>[b(S(u(O).occupation),1)])),_:1}),m("div",B,[d(t,{class:"musicSize",onClick:a[0]||(a[0]=e=>W("songs"))},{default:p((()=>[d(l,{component:"MusicalNote"}),b(" "+S(e.$t("general.name.songSize",{size:u(O).musicSize})),1)])),_:1}),d(t,{class:"albumSize",onClick:a[1]||(a[1]=e=>W("albums"))},{default:p((()=>[d(l,{component:"Albums"}),b(" "+S(e.$t("general.name.albumSize",{size:u(O).albumSize})),1)])),_:1}),d(t,{class:"mvSize",onClick:a[2]||(a[2]=e=>W("videos"))},{default:p((()=>[d(l,{component:"Videocam"}),b(" "+S(e.$t("general.name.mvSize",{size:u(O).mvSize})),1)])),_:1})]),d(t,{class:"desc text-hidden",onClick:a[3]||(a[3]=e=>Q.value=!0)},{default:p((()=>[b(S(u(O).desc),1)])),_:1}),u(E).userLogin?(o(),g(C,{key:0,class:"button"},{default:p((()=>[d(n,{type:u(Y)?"primary":"default",strong:"",secondary:"",onClick:a[4]||(a[4]=e=>(e=>{const a=X(e.id)?1:2;T(a,e.id).then((s=>{200===s.code?($message.success(`${e.name} ${j(1==a?"menu.collection":"menu.cancelCollection",{name:j("general.dialog.success")})}`),E.setUserArtistLists((()=>{Y.value=X(K.value)}))):$message.error(`${e.name} ${j(1==a?"menu.collection":"menu.cancelCollection",{name:j("general.dialog.failed")})}`)}))})(u(O)))},{icon:p((()=>[d(i,{component:u(Y)?"PersonAdd":"PersonRemove"},null,8,["component"])])),default:p((()=>[b(" "+S(u(Y)?e.$t("menu.collection",{name:e.$t("general.name.artists")}):e.$t("menu.cancelCollection",{name:e.$t("general.name.artists")})),1)])),_:1},8,["type"])])),_:1})):v("",!0),d(Z,{class:"s-modal",show:u(Q),"onUpdate:show":a[5]||(a[5]=e=>f(Q)?Q.value=e:null),preset:"card",title:e.$t("general.name.artistDesc"),bordered:!1},{default:p((()=>[d(J,null,{default:p((()=>[d(t,{innerHTML:u(O).desc.replace(/\n/g,"<br>")},null,8,["innerHTML"])])),_:1})])),_:1},8,["show","title"])])])):u(K)?v("",!0):(o(),c("div",H,[d(t,null,{default:p((()=>[b(S(e.$t("general.name.noKeywords")),1)])),_:1}),P,d(n,{strong:"",secondary:"",onClick:a[6]||(a[6]=e=>u(k).go(-1)),style:{"margin-top":"20px"}},{default:p((()=>[b(S(e.$t("general.name.goBack")),1)])),_:1})])),u(O)?(o(),g(ae,{key:2,class:"main-tab",type:"segment","onUpdate:value":[W,a[7]||(a[7]=e=>f(G)?G.value=e:null)],value:u(G)},{default:p((()=>[d(ee,{name:"songs"},{default:p((()=>[b(S(e.$t("general.name.hotSong")),1)])),_:1}),d(ee,{name:"albums"},{default:p((()=>[b(S(e.$t("general.name.album")),1)])),_:1}),d(ee,{name:"videos"},{default:p((()=>[b(" MV")])),_:1})])),_:1},8,["value"])):v("",!0),u(O)?(o(),c("main",V,[d(se,{mvSize:u(O)?u(O).mvSize:null},{default:p((({Component:e})=>[(o(),g(h,null,[d(y,{name:"move",mode:"out-in"},{default:p((()=>[(o(),g(z(e)))])),_:2},1024)],1024))])),_:1},8,["mvSize"])])):v("",!0)])}}},[["__scopeId","data-v-edd9ccea"]]);export{E as default};
