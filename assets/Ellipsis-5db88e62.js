import{$ as e,a3 as i,a0 as t,y as l,C as n,A as s,e as r,s as o,a7 as a,z as c,bj as p}from"./index-c72c5b0c.js";import{_ as d}from"./Tooltip-f5342231.js";import{e as u}from"./light-93a0afe9.js";const g=e("ellipsis",{overflow:"hidden"},[i("line-clamp","\n white-space: nowrap;\n display: inline-block;\n vertical-align: bottom;\n max-width: 100%;\n "),t("line-clamp","\n display: -webkit-inline-box;\n -webkit-box-orient: vertical;\n "),t("cursor-pointer","\n cursor: pointer;\n ")]);function v(e){return`${e}-ellipsis--line-clamp`}function f(e,i){return`${e}-ellipsis--cursor-${i}`}const m=l({name:"Ellipsis",inheritAttrs:!1,props:Object.assign(Object.assign({},s.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),setup(e,{slots:i,attrs:t}){const{mergedClsPrefixRef:l}=n(e),d=s("Ellipsis","-ellipsis",g,u,e,l),m=r(null),h=r(null),b=r(null),w=r(!1),T=o((()=>{const{lineClamp:i}=e,{value:t}=w;return void 0!==i?{textOverflow:"","-webkit-line-clamp":t?"":i}:{textOverflow:t?"":"ellipsis","-webkit-line-clamp":""}}));function x(){let i=!1;const{value:t}=w;if(t)return!0;const{value:n}=m;if(n){const{lineClamp:t}=e;if(function(i){if(!i)return;const t=T.value,n=v(l.value);void 0!==e.lineClamp?k(i,n,"add"):k(i,n,"remove");for(const e in t)i.style[e]!==t[e]&&(i.style[e]=t[e])}(n),void 0!==t)i=n.scrollHeight<=n.offsetHeight;else{const{value:e}=h;e&&(i=e.getBoundingClientRect().width<=n.getBoundingClientRect().width)}!function(i,t){const n=f(l.value,"pointer");"click"!==e.expandTrigger||t?k(i,n,"remove"):k(i,n,"add")}(n,i)}return i}const C=o((()=>"click"===e.expandTrigger?()=>{var e;const{value:i}=w;i&&(null===(e=b.value)||void 0===e||e.setShow(!1)),w.value=!i}:void 0));a((()=>{var i;e.tooltip&&(null===(i=b.value)||void 0===i||i.setShow(!1))}));function k(e,i,t){"add"===t?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}return{mergedTheme:d,triggerRef:m,triggerInnerRef:h,tooltipRef:b,handleClick:C,renderTrigger:()=>c("span",Object.assign({},p(t,{class:[`${l.value}-ellipsis`,void 0!==e.lineClamp?v(l.value):void 0,"click"===e.expandTrigger?f(l.value,"pointer"):void 0],style:T.value}),{ref:"triggerRef",onClick:C.value,onMouseenter:"click"===e.expandTrigger?x:void 0}),e.lineClamp?i:c("span",{ref:"triggerInnerRef"},i)),getTooltipDisabled:x}},render(){var e;const{tooltip:i,renderTrigger:t,$slots:l}=this;if(i){const{mergedTheme:n}=this;return c(d,Object.assign({ref:"tooltipRef",placement:"top"},i,{getDisabled:this.getTooltipDisabled,theme:n.peers.Tooltip,themeOverrides:n.peerOverrides.Tooltip}),{trigger:t,default:null!==(e=l.tooltip)&&void 0!==e?e:l.default})}return t()}});export{m as _};
