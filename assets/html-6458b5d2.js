import{_ as e,c0 as t,e as a,Y as s,f as l,S as r,c5 as i,o as n,c as o,a as c,w as u,d as m,b as v,t as d}from"./index-d93ecfd9.js";import{N as p}from"./headers-79a1892a.js";import{_ as f}from"./Divider-2b26e657.js";import{_ as h}from"./text-f881741e.js";import{_ as y}from"./GradientText-8c62cc47.js";import"./light-6dc1ea6d.js";import"./light-3a92740e.js";import"./use-compitable-f583eb1a.js";import"./use-houdini-2a8f5bbb.js";const x={class:"container"},_={class:"p-4 rounded-2xl bg-white mb-4"},j={key:0,class:"flex justify-center items-center py-8"},L=["innerHTML"],T={key:2,class:"html-frame-container"},g=["src"],w=e({__name:"html",setup(e){const w=t(),H=a(""),M=a("HTML查看器"),b=a(!0),k=a(!1),$=a("待补充"),R=a(""),U=async()=>{b.value=!0,k.value=!1;try{let e=w.query.page;if(!e)return k.value=!0,void(H.value='<div class="text-center text-red-500">请提供HTML文件名参数</div>');e=String(e).replace(/-/g,"/");const t=`/html/${e}.html`,a=await fetch(t);if(!a.ok)throw new Error(`无法加载HTML文件: ${a.status} ${a.statusText}`);let s=await a.text();H.value=s;const l=new Blob([s],{type:"text/html"});R.value=URL.createObjectURL(l);const r=s.match(/<title>(.*?)<\/title>/);if(r&&r[1])M.value=r[1];else{const t=String(e).split("/").pop();M.value=`${t} - HTML查看器`}const i=s.match(/<meta\s+name=["']description["']\s+content=["'](.*?)["']\s*\/?>/i);i&&i[1]&&($.value=i[1])}catch(e){console.error("加载HTML文件失败:",e),k.value=!0,H.value=`<div class="text-center text-red-500">加载HTML文件失败: ${e.message}</div>`}finally{b.value=!1}};return s((()=>[w.params.name,w.query.name,w.query.page]),(()=>{U()})),l((()=>{U()})),r((()=>{R.value&&URL.revokeObjectURL(R.value)})),(e,t)=>{const a=y,s=p,l=i("el-skeleton"),r=f,w=h;return n(),o("div",x,[c(s,null,{default:u((()=>[c(a,{type:"info"},{default:u((()=>[v(d(M.value),1)])),_:1})])),_:1}),m("div",_,[b.value?(n(),o("div",j,[c(l,{rows:10,animated:""})])):k.value?(n(),o("div",{key:1,class:"py-8",innerHTML:H.value},null,8,L)):(n(),o("div",T,[m("iframe",{ref:"htmlFrame",class:"html-frame",src:R.value},null,8,g)]))]),c(r,{"title-placement":"left"},{default:u((()=>[v("描述")])),_:1}),c(w,null,{default:u((()=>[v(d($.value),1)])),_:1})])}}},[["__scopeId","data-v-aee7506a"]]);export{w as default};
